import { ADD_CUSTOMERS_TO_GROUP, ADD_NOTE_TO_CUSTOMER, CREATE_CUSTOMER, CREATE_CUSTOMER_ADDRESS, CREATE_CUSTOMER_GROUP, DELETE_CUSTOMER, DELETE_CUSTOMER_GROUP, DELETE_CUSTOMER_NOTE, GET_CUSTOMER, GET_CUSTOMER_GROUP_WITH_CUSTOMERS, GET_CUSTOMER_GROUPS, GET_CUSTOMER_HISTORY, GET_CUSTOMER_LIST, REMOVE_CUSTOMERS_FROM_GROUP, UPDATE_CUSTOMER, UPDATE_CUSTOMER_ADDRESS, UPDATE_CUSTOMER_GROUP, UPDATE_CUSTOMER_NOTE, } from '../definitions/customer-definitions';
export class CustomerDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getCustomerList(take = 10, skip = 0, filterTerm) {
        const filter = filterTerm
            ? {
                filter: {
                    emailAddress: {
                        contains: filterTerm,
                    },
                },
            }
            : {};
        return this.baseDataService.query(GET_CUSTOMER_LIST, {
            options: Object.assign({ take,
                skip }, filter),
        });
    }
    getCustomer(id, orderListOptions) {
        return this.baseDataService.query(GET_CUSTOMER, {
            id,
            orderListOptions,
        });
    }
    createCustomer(input, password) {
        return this.baseDataService.mutate(CREATE_CUSTOMER, {
            input,
            password,
        });
    }
    updateCustomer(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER, {
            input,
        });
    }
    deleteCustomer(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER, { id });
    }
    createCustomerAddress(customerId, input) {
        return this.baseDataService.mutate(CREATE_CUSTOMER_ADDRESS, {
            customerId,
            input,
        });
    }
    updateCustomerAddress(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_ADDRESS, {
            input,
        });
    }
    createCustomerGroup(input) {
        return this.baseDataService.mutate(CREATE_CUSTOMER_GROUP, {
            input,
        });
    }
    updateCustomerGroup(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_GROUP, {
            input,
        });
    }
    deleteCustomerGroup(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_GROUP, { id });
    }
    getCustomerGroupList(options) {
        return this.baseDataService.query(GET_CUSTOMER_GROUPS, {
            options,
        });
    }
    getCustomerGroupWithCustomers(id, options) {
        return this.baseDataService.query(GET_CUSTOMER_GROUP_WITH_CUSTOMERS, {
            id,
            options,
        });
    }
    addCustomersToGroup(groupId, customerIds) {
        return this.baseDataService.mutate(ADD_CUSTOMERS_TO_GROUP, {
            groupId,
            customerIds,
        });
    }
    removeCustomersFromGroup(groupId, customerIds) {
        return this.baseDataService.mutate(REMOVE_CUSTOMERS_FROM_GROUP, {
            groupId,
            customerIds,
        });
    }
    getCustomerHistory(id, options) {
        return this.baseDataService.query(GET_CUSTOMER_HISTORY, {
            id,
            options,
        });
    }
    addNoteToCustomer(customerId, note) {
        return this.baseDataService.mutate(ADD_NOTE_TO_CUSTOMER, {
            input: {
                note,
                isPublic: false,
                id: customerId,
            },
        });
    }
    updateCustomerNote(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_NOTE, {
            input,
        });
    }
    deleteCustomerNote(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_NOTE, {
            id,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tZXItZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9jdXN0b21lci1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBK0JBLE9BQU8sRUFDSCxzQkFBc0IsRUFDdEIsb0JBQW9CLEVBQ3BCLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIscUJBQXFCLEVBQ3JCLGVBQWUsRUFDZixxQkFBcUIsRUFDckIsb0JBQW9CLEVBQ3BCLFlBQVksRUFDWixpQ0FBaUMsRUFDakMsbUJBQW1CLEVBQ25CLG9CQUFvQixFQUNwQixpQkFBaUIsRUFDakIsMkJBQTJCLEVBQzNCLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIscUJBQXFCLEVBQ3JCLG9CQUFvQixHQUN2QixNQUFNLHFDQUFxQyxDQUFDO0FBSTdDLE1BQU0sT0FBTyxtQkFBbUI7SUFDNUIsWUFBb0IsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO0lBQUcsQ0FBQztJQUV4RCxlQUFlLENBQUMsT0FBZSxFQUFFLEVBQUUsT0FBZSxDQUFDLEVBQUUsVUFBbUI7UUFDcEUsTUFBTSxNQUFNLEdBQUcsVUFBVTtZQUNyQixDQUFDLENBQUM7Z0JBQ0ksTUFBTSxFQUFFO29CQUNKLFlBQVksRUFBRTt3QkFDVixRQUFRLEVBQUUsVUFBVTtxQkFDdkI7aUJBQ0o7YUFDSjtZQUNILENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDVCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUM3QixpQkFBaUIsRUFDakI7WUFDSSxPQUFPLGtCQUNILElBQUk7Z0JBQ0osSUFBSSxJQUNELE1BQU0sQ0FDWjtTQUNKLENBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxXQUFXLENBQUMsRUFBVSxFQUFFLGdCQUFtQztRQUN2RCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUEyQyxZQUFZ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LENBQUM7SUFDTixDQUFDO0lBRUQsa0JBQWtCLENBQUMsS0FBOEI7UUFDN0MsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FDOUIsb0JBQW9CLEVBQ3BCO1lBQ0ksS0FBSztTQUNSLENBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxFQUFVO1FBQ3pCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQzlCLG9CQUFvQixFQUNwQjtZQUNJLEVBQUU7U0FDTCxDQUNKLENBQUM7SUFDTixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIEFkZEN1c3RvbWVyc1RvR3JvdXAsXG4gICAgQWRkTm90ZVRvQ3VzdG9tZXIsXG4gICAgQ3JlYXRlQWRkcmVzc0lucHV0LFxuICAgIENyZWF0ZUN1c3RvbWVyLFxuICAgIENyZWF0ZUN1c3RvbWVyQWRkcmVzcyxcbiAgICBDcmVhdGVDdXN0b21lckdyb3VwLFxuICAgIENyZWF0ZUN1c3RvbWVyR3JvdXBJbnB1dCxcbiAgICBDcmVhdGVDdXN0b21lcklucHV0LFxuICAgIEN1c3RvbWVyR3JvdXBMaXN0T3B0aW9ucyxcbiAgICBDdXN0b21lckxpc3RPcHRpb25zLFxuICAgIERlbGV0ZUN1c3RvbWVyLFxuICAgIERlbGV0ZUN1c3RvbWVyR3JvdXAsXG4gICAgRGVsZXRlQ3VzdG9tZXJOb3RlLFxuICAgIEdldEN1c3RvbWVyLFxuICAgIEdldEN1c3RvbWVyR3JvdXBzLFxuICAgIEdldEN1c3RvbWVyR3JvdXBXaXRoQ3VzdG9tZXJzLFxuICAgIEdldEN1c3RvbWVySGlzdG9yeSxcbiAgICBHZXRDdXN0b21lckxpc3QsXG4gICAgSGlzdG9yeUVudHJ5TGlzdE9wdGlvbnMsXG4gICAgT3JkZXJMaXN0T3B0aW9ucyxcbiAgICBSZW1vdmVDdXN0b21lcnNGcm9tR3JvdXAsXG4gICAgVXBkYXRlQWRkcmVzc0lucHV0LFxuICAgIFVwZGF0ZUN1c3RvbWVyLFxuICAgIFVwZGF0ZUN1c3RvbWVyQWRkcmVzcyxcbiAgICBVcGRhdGVDdXN0b21lckdyb3VwLFxuICAgIFVwZGF0ZUN1c3RvbWVyR3JvdXBJbnB1dCxcbiAgICBVcGRhdGVDdXN0b21lcklucHV0LFxuICAgIFVwZGF0ZUN1c3RvbWVyTm90ZSxcbiAgICBVcGRhdGVDdXN0b21lck5vdGVJbnB1dCxcbn0gZnJvbSAnLi4vLi4vY29tbW9uL2dlbmVyYXRlZC10eXBlcyc7XG5pbXBvcnQge1xuICAgIEFERF9DVVNUT01FUlNfVE9fR1JPVVAsXG4gICAgQUREX05PVEVfVE9fQ1VTVE9NRVIsXG4gICAgQ1JFQVRFX0NVU1RPTUVSLFxuICAgIENSRUFURV9DVVNUT01FUl9BRERSRVNTLFxuICAgIENSRUFURV9DVVNUT01FUl9HUk9VUCxcbiAgICBERUxFVEVfQ1VTVE9NRVIsXG4gICAgREVMRVRFX0NVU1RPTUVSX0dST1VQLFxuICAgIERFTEVURV9DVVNUT01FUl9OT1RFLFxuICAgIEdFVF9DVVNUT01FUixcbiAgICBHRVRfQ1VTVE9NRVJfR1JPVVBfV0lUSF9DVVNUT01FUlMsXG4gICAgR0VUX0NVU1RPTUVSX0dST1VQUyxcbiAgICBHRVRfQ1VTVE9NRVJfSElTVE9SWSxcbiAgICBHRVRfQ1VTVE9NRVJfTElTVCxcbiAgICBSRU1PVkVfQ1VTVE9NRVJTX0ZST01fR1JPVVAsXG4gICAgVVBEQVRFX0NVU1RPTUVSLFxuICAgIFVQREFURV9DVVNUT01FUl9BRERSRVNTLFxuICAgIFVQREFURV9DVVNUT01FUl9HUk9VUCxcbiAgICBVUERBVEVfQ1VTVE9NRVJfTk9URSxcbn0gZnJvbSAnLi4vZGVmaW5pdGlvbnMvY3VzdG9tZXItZGVmaW5pdGlvbnMnO1xuXG5pbXBvcnQgeyBCYXNlRGF0YVNlcnZpY2UgfSBmcm9tICcuL2Jhc2UtZGF0YS5zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWVyRGF0YVNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYmFzZURhdGFTZXJ2aWNlOiBCYXNlRGF0YVNlcnZpY2UpIHt9XG5cbiAgICBnZXRDdXN0b21lckxpc3QodGFrZTogbnVtYmVyID0gMTAsIHNraXA6IG51bWJlciA9IDAsIGZpbHRlclRlcm0/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZmlsdGVyID0gZmlsdGVyVGVybVxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICBlbWFpbEFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbnM6IGZpbHRlclRlcm0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge307XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDdXN0b21lckxpc3QuUXVlcnksIEdldEN1c3RvbWVyTGlzdC5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgR0VUX0NVU1RPTUVSX0xJU1QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICB0YWtlLFxuICAgICAgICAgICAgICAgICAgICBza2lwLFxuICAgICAgICAgICAgICAgICAgICAuLi5maWx0ZXIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0Q3VzdG9tZXIoaWQ6IHN0cmluZywgb3JkZXJMaXN0T3B0aW9ucz86IE9yZGVyTGlzdE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEN1c3RvbWVyLlF1ZXJ5LCBHZXRDdXN0b21lci5WYXJpYWJsZXM+KEdFVF9DVVNUT01FUiwge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBvcmRlckxpc3RPcHRpb25zLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVDdXN0b21lcihpbnB1dDogQ3JlYXRlQ3VzdG9tZXJJbnB1dCwgcGFzc3dvcmQ/OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVDdXN0b21lci5NdXRhdGlvbiwgQ3JlYXRlQ3VzdG9tZXIuVmFyaWFibGVzPihcbiAgICAgICAgICAgIENSRUFURV9DVVNUT01FUixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ3VzdG9tZXIoaW5wdXQ6IFVwZGF0ZUN1c3RvbWVySW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVDdXN0b21lci5NdXRhdGlvbiwgVXBkYXRlQ3VzdG9tZXIuVmFyaWFibGVzPihcbiAgICAgICAgICAgIFVQREFURV9DVVNUT01FUixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ3VzdG9tZXIoaWQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUN1c3RvbWVyLk11dGF0aW9uLCBEZWxldGVDdXN0b21lci5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgREVMRVRFX0NVU1RPTUVSLFxuICAgICAgICAgICAgeyBpZCB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZUN1c3RvbWVyQWRkcmVzcyhjdXN0b21lcklkOiBzdHJpbmcsIGlucHV0OiBDcmVhdGVBZGRyZXNzSW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVDdXN0b21lckFkZHJlc3MuTXV0YXRpb24sIENyZWF0ZUN1c3RvbWVyQWRkcmVzcy5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgQ1JFQVRFX0NVU1RPTUVSX0FERFJFU1MsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ3VzdG9tZXJBZGRyZXNzKGlucHV0OiBVcGRhdGVBZGRyZXNzSW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVDdXN0b21lckFkZHJlc3MuTXV0YXRpb24sIFVwZGF0ZUN1c3RvbWVyQWRkcmVzcy5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgVVBEQVRFX0NVU1RPTUVSX0FERFJFU1MsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZUN1c3RvbWVyR3JvdXAoaW5wdXQ6IENyZWF0ZUN1c3RvbWVyR3JvdXBJbnB1dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZUN1c3RvbWVyR3JvdXAuTXV0YXRpb24sIENyZWF0ZUN1c3RvbWVyR3JvdXAuVmFyaWFibGVzPihcbiAgICAgICAgICAgIENSRUFURV9DVVNUT01FUl9HUk9VUCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ3VzdG9tZXJHcm91cChpbnB1dDogVXBkYXRlQ3VzdG9tZXJHcm91cElucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJHcm91cC5NdXRhdGlvbiwgVXBkYXRlQ3VzdG9tZXJHcm91cC5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgVVBEQVRFX0NVU1RPTUVSX0dST1VQLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBkZWxldGVDdXN0b21lckdyb3VwKGlkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxEZWxldGVDdXN0b21lckdyb3VwLk11dGF0aW9uLCBEZWxldGVDdXN0b21lckdyb3VwLlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBERUxFVEVfQ1VTVE9NRVJfR1JPVVAsXG4gICAgICAgICAgICB7IGlkIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZ2V0Q3VzdG9tZXJHcm91cExpc3Qob3B0aW9ucz86IEN1c3RvbWVyR3JvdXBMaXN0T3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q3VzdG9tZXJHcm91cHMuUXVlcnksIEdldEN1c3RvbWVyR3JvdXBzLlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBHRVRfQ1VTVE9NRVJfR1JPVVBTLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldEN1c3RvbWVyR3JvdXBXaXRoQ3VzdG9tZXJzKGlkOiBzdHJpbmcsIG9wdGlvbnM6IEN1c3RvbWVyTGlzdE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PFxuICAgICAgICAgICAgR2V0Q3VzdG9tZXJHcm91cFdpdGhDdXN0b21lcnMuUXVlcnksXG4gICAgICAgICAgICBHZXRDdXN0b21lckdyb3VwV2l0aEN1c3RvbWVycy5WYXJpYWJsZXNcbiAgICAgICAgPihHRVRfQ1VTVE9NRVJfR1JPVVBfV0lUSF9DVVNUT01FUlMsIHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkQ3VzdG9tZXJzVG9Hcm91cChncm91cElkOiBzdHJpbmcsIGN1c3RvbWVySWRzOiBzdHJpbmdbXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPEFkZEN1c3RvbWVyc1RvR3JvdXAuTXV0YXRpb24sIEFkZEN1c3RvbWVyc1RvR3JvdXAuVmFyaWFibGVzPihcbiAgICAgICAgICAgIEFERF9DVVNUT01FUlNfVE9fR1JPVVAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ3JvdXBJZCxcbiAgICAgICAgICAgICAgICBjdXN0b21lcklkcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVtb3ZlQ3VzdG9tZXJzRnJvbUdyb3VwKGdyb3VwSWQ6IHN0cmluZywgY3VzdG9tZXJJZHM6IHN0cmluZ1tdKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XG4gICAgICAgICAgICBSZW1vdmVDdXN0b21lcnNGcm9tR3JvdXAuTXV0YXRpb24sXG4gICAgICAgICAgICBSZW1vdmVDdXN0b21lcnNGcm9tR3JvdXAuVmFyaWFibGVzXG4gICAgICAgID4oUkVNT1ZFX0NVU1RPTUVSU19GUk9NX0dST1VQLCB7XG4gICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgY3VzdG9tZXJJZHMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldEN1c3RvbWVySGlzdG9yeShpZDogc3RyaW5nLCBvcHRpb25zPzogSGlzdG9yeUVudHJ5TGlzdE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEN1c3RvbWVySGlzdG9yeS5RdWVyeSwgR2V0Q3VzdG9tZXJIaXN0b3J5LlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBHRVRfQ1VTVE9NRVJfSElTVE9SWSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhZGROb3RlVG9DdXN0b21lcihjdXN0b21lcklkOiBzdHJpbmcsIG5vdGU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPEFkZE5vdGVUb0N1c3RvbWVyLk11dGF0aW9uLCBBZGROb3RlVG9DdXN0b21lci5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgQUREX05PVEVfVE9fQ1VTVE9NRVIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbm90ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNQdWJsaWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpZDogY3VzdG9tZXJJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICB1cGRhdGVDdXN0b21lck5vdGUoaW5wdXQ6IFVwZGF0ZUN1c3RvbWVyTm90ZUlucHV0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJOb3RlLk11dGF0aW9uLCBVcGRhdGVDdXN0b21lck5vdGUuVmFyaWFibGVzPihcbiAgICAgICAgICAgIFVQREFURV9DVVNUT01FUl9OT1RFLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBkZWxldGVDdXN0b21lck5vdGUoaWQ6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUN1c3RvbWVyTm90ZS5NdXRhdGlvbiwgRGVsZXRlQ3VzdG9tZXJOb3RlLlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBERUxFVEVfQ1VTVE9NRVJfTk9URSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19