import { pick } from '@vendure/common/lib/pick';
import { CREATE_FACET, CREATE_FACET_VALUES, DELETE_FACET, DELETE_FACET_VALUES, GET_FACET_LIST, GET_FACET_WITH_VALUES, UPDATE_FACET, UPDATE_FACET_VALUES, } from '../definitions/facet-definitions';
export class FacetDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getFacets(take = 10, skip = 0) {
        return this.baseDataService.query(GET_FACET_LIST, {
            options: {
                take,
                skip,
            },
        });
    }
    getAllFacets() {
        return this.baseDataService.query(GET_FACET_LIST, {});
    }
    getFacet(id) {
        return this.baseDataService.query(GET_FACET_WITH_VALUES, {
            id,
        });
    }
    createFacet(facet) {
        const input = {
            input: pick(facet, ['code', 'isPrivate', 'translations', 'values', 'customFields']),
        };
        return this.baseDataService.mutate(CREATE_FACET, input);
    }
    updateFacet(facet) {
        const input = {
            input: pick(facet, ['id', 'code', 'isPrivate', 'translations', 'customFields']),
        };
        return this.baseDataService.mutate(UPDATE_FACET, input);
    }
    deleteFacet(id, force) {
        return this.baseDataService.mutate(DELETE_FACET, {
            id,
            force,
        });
    }
    createFacetValues(facetValues) {
        const input = {
            input: facetValues.map(pick(['facetId', 'code', 'translations', 'customFields'])),
        };
        return this.baseDataService.mutate(CREATE_FACET_VALUES, input);
    }
    updateFacetValues(facetValues) {
        const input = {
            input: facetValues.map(pick(['id', 'code', 'translations', 'customFields'])),
        };
        return this.baseDataService.mutate(UPDATE_FACET_VALUES, input);
    }
    deleteFacetValues(ids, force) {
        return this.baseDataService.mutate(DELETE_FACET_VALUES, {
            ids,
            force,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFjZXQtZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9mYWNldC1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBZ0JoRCxPQUFPLEVBQ0gsWUFBWSxFQUNaLG1CQUFtQixFQUNuQixZQUFZLEVBQ1osbUJBQW1CLEVBQ25CLGNBQWMsRUFDZCxxQkFBcUIsRUFDckIsWUFBWSxFQUNaLG1CQUFtQixHQUN0QixNQUFNLGtDQUFrQyxDQUFDO0FBSTFDLE1BQU0sT0FBTyxnQkFBZ0I7SUFDekIsWUFBb0IsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO0lBQUcsQ0FBQztJQUV4RCxTQUFTLENBQUMsT0FBZSxFQUFFLEVBQUUsT0FBZSxDQUFDO1FBQ3pDLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQTZDLGNBQWMsRUFBRTtZQUMxRixPQUFPLEVBQUU7Z0JBQ0wsSUFBSTtnQkFDSixJQUFJO2FBQ1A7U0FDSixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsWUFBWTtRQUNSLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQTZDLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RyxDQUFDO0lBRUQsUUFBUSxDQUFDLEVBQVU7UUFDZixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUM3QixxQkFBcUIsRUFDckI7WUFDSSxFQUFFO1NBQ0wsQ0FDSixDQUFDO0lBQ04sQ0FBQztJQUVELFdBQVcsQ0FBQyxLQUF1QjtRQUMvQixNQUFNLEtBQUssR0FBMEI7WUFDakMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsY0FBYyxDQUFDLENBQUM7U0FDdEYsQ0FBQztRQUNGLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQThDLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN6RyxDQUFDO0lBRUQsV0FBVyxDQUFDLEtBQXVCO1FBQy9CLE1BQU0sS0FBSyxHQUEwQjtZQUNqQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLGNBQWMsRUFBRSxjQUFjLENBQUMsQ0FBQztTQUNsRixDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBOEMsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3pHLENBQUM7SUFFRCxXQUFXLENBQUMsRUFBVSxFQUFFLEtBQWM7UUFDbEMsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBOEMsWUFBWSxFQUFFO1lBQzFGLEVBQUU7WUFDRixLQUFLO1NBQ1IsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELGlCQUFpQixDQUFDLFdBQW9DO1FBQ2xELE1BQU0sS0FBSyxHQUFnQztZQUN2QyxLQUFLLEVBQUUsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLGNBQWMsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO1NBQ3BGLENBQUM7UUFDRixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUM5QixtQkFBbUIsRUFDbkIsS0FBSyxDQUNSLENBQUM7SUFDTixDQUFDO0lBRUQsaUJBQWlCLENBQUMsV0FBb0M7UUFDbEQsTUFBTSxLQUFLLEdBQWdDO1lBQ3ZDLEtBQUssRUFBRSxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7U0FDL0UsQ0FBQztRQUNGLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQzlCLG1CQUFtQixFQUNuQixLQUFLLENBQ1IsQ0FBQztJQUNOLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxHQUFhLEVBQUUsS0FBYztRQUMzQyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUM5QixtQkFBbUIsRUFDbkI7WUFDSSxHQUFHO1lBQ0gsS0FBSztTQUNSLENBQ0osQ0FBQztJQUNOLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBpY2sgfSBmcm9tICdAdmVuZHVyZS9jb21tb24vbGliL3BpY2snO1xuXG5pbXBvcnQge1xuICAgIENyZWF0ZUZhY2V0LFxuICAgIENyZWF0ZUZhY2V0SW5wdXQsXG4gICAgQ3JlYXRlRmFjZXRWYWx1ZUlucHV0LFxuICAgIENyZWF0ZUZhY2V0VmFsdWVzLFxuICAgIERlbGV0ZUZhY2V0LFxuICAgIERlbGV0ZUZhY2V0VmFsdWVzLFxuICAgIEdldEZhY2V0TGlzdCxcbiAgICBHZXRGYWNldFdpdGhWYWx1ZXMsXG4gICAgVXBkYXRlRmFjZXQsXG4gICAgVXBkYXRlRmFjZXRJbnB1dCxcbiAgICBVcGRhdGVGYWNldFZhbHVlSW5wdXQsXG4gICAgVXBkYXRlRmFjZXRWYWx1ZXMsXG59IGZyb20gJy4uLy4uL2NvbW1vbi9nZW5lcmF0ZWQtdHlwZXMnO1xuaW1wb3J0IHtcbiAgICBDUkVBVEVfRkFDRVQsXG4gICAgQ1JFQVRFX0ZBQ0VUX1ZBTFVFUyxcbiAgICBERUxFVEVfRkFDRVQsXG4gICAgREVMRVRFX0ZBQ0VUX1ZBTFVFUyxcbiAgICBHRVRfRkFDRVRfTElTVCxcbiAgICBHRVRfRkFDRVRfV0lUSF9WQUxVRVMsXG4gICAgVVBEQVRFX0ZBQ0VULFxuICAgIFVQREFURV9GQUNFVF9WQUxVRVMsXG59IGZyb20gJy4uL2RlZmluaXRpb25zL2ZhY2V0LWRlZmluaXRpb25zJztcblxuaW1wb3J0IHsgQmFzZURhdGFTZXJ2aWNlIH0gZnJvbSAnLi9iYXNlLWRhdGEuc2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBGYWNldERhdGFTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJhc2VEYXRhU2VydmljZTogQmFzZURhdGFTZXJ2aWNlKSB7fVxuXG4gICAgZ2V0RmFjZXRzKHRha2U6IG51bWJlciA9IDEwLCBza2lwOiBudW1iZXIgPSAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRGYWNldExpc3QuUXVlcnksIEdldEZhY2V0TGlzdC5WYXJpYWJsZXM+KEdFVF9GQUNFVF9MSVNULCB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgdGFrZSxcbiAgICAgICAgICAgICAgICBza2lwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0QWxsRmFjZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0RmFjZXRMaXN0LlF1ZXJ5LCBHZXRGYWNldExpc3QuVmFyaWFibGVzPihHRVRfRkFDRVRfTElTVCwge30pO1xuICAgIH1cblxuICAgIGdldEZhY2V0KGlkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEZhY2V0V2l0aFZhbHVlcy5RdWVyeSwgR2V0RmFjZXRXaXRoVmFsdWVzLlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBHRVRfRkFDRVRfV0lUSF9WQUxVRVMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZUZhY2V0KGZhY2V0OiBDcmVhdGVGYWNldElucHV0KSB7XG4gICAgICAgIGNvbnN0IGlucHV0OiBDcmVhdGVGYWNldC5WYXJpYWJsZXMgPSB7XG4gICAgICAgICAgICBpbnB1dDogcGljayhmYWNldCwgWydjb2RlJywgJ2lzUHJpdmF0ZScsICd0cmFuc2xhdGlvbnMnLCAndmFsdWVzJywgJ2N1c3RvbUZpZWxkcyddKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVGYWNldC5NdXRhdGlvbiwgQ3JlYXRlRmFjZXQuVmFyaWFibGVzPihDUkVBVEVfRkFDRVQsIGlucHV0KTtcbiAgICB9XG5cbiAgICB1cGRhdGVGYWNldChmYWNldDogVXBkYXRlRmFjZXRJbnB1dCkge1xuICAgICAgICBjb25zdCBpbnB1dDogVXBkYXRlRmFjZXQuVmFyaWFibGVzID0ge1xuICAgICAgICAgICAgaW5wdXQ6IHBpY2soZmFjZXQsIFsnaWQnLCAnY29kZScsICdpc1ByaXZhdGUnLCAndHJhbnNsYXRpb25zJywgJ2N1c3RvbUZpZWxkcyddKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVGYWNldC5NdXRhdGlvbiwgVXBkYXRlRmFjZXQuVmFyaWFibGVzPihVUERBVEVfRkFDRVQsIGlucHV0KTtcbiAgICB9XG5cbiAgICBkZWxldGVGYWNldChpZDogc3RyaW5nLCBmb3JjZTogYm9vbGVhbikge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUZhY2V0Lk11dGF0aW9uLCBEZWxldGVGYWNldC5WYXJpYWJsZXM+KERFTEVURV9GQUNFVCwge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBmb3JjZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlRmFjZXRWYWx1ZXMoZmFjZXRWYWx1ZXM6IENyZWF0ZUZhY2V0VmFsdWVJbnB1dFtdKSB7XG4gICAgICAgIGNvbnN0IGlucHV0OiBDcmVhdGVGYWNldFZhbHVlcy5WYXJpYWJsZXMgPSB7XG4gICAgICAgICAgICBpbnB1dDogZmFjZXRWYWx1ZXMubWFwKHBpY2soWydmYWNldElkJywgJ2NvZGUnLCAndHJhbnNsYXRpb25zJywgJ2N1c3RvbUZpZWxkcyddKSksXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlRmFjZXRWYWx1ZXMuTXV0YXRpb24sIENyZWF0ZUZhY2V0VmFsdWVzLlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBDUkVBVEVfRkFDRVRfVkFMVUVTLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdXBkYXRlRmFjZXRWYWx1ZXMoZmFjZXRWYWx1ZXM6IFVwZGF0ZUZhY2V0VmFsdWVJbnB1dFtdKSB7XG4gICAgICAgIGNvbnN0IGlucHV0OiBVcGRhdGVGYWNldFZhbHVlcy5WYXJpYWJsZXMgPSB7XG4gICAgICAgICAgICBpbnB1dDogZmFjZXRWYWx1ZXMubWFwKHBpY2soWydpZCcsICdjb2RlJywgJ3RyYW5zbGF0aW9ucycsICdjdXN0b21GaWVsZHMnXSkpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZUZhY2V0VmFsdWVzLk11dGF0aW9uLCBVcGRhdGVGYWNldFZhbHVlcy5WYXJpYWJsZXM+KFxuICAgICAgICAgICAgVVBEQVRFX0ZBQ0VUX1ZBTFVFUyxcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGRlbGV0ZUZhY2V0VmFsdWVzKGlkczogc3RyaW5nW10sIGZvcmNlOiBib29sZWFuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlRmFjZXRWYWx1ZXMuTXV0YXRpb24sIERlbGV0ZUZhY2V0VmFsdWVzLlZhcmlhYmxlcz4oXG4gICAgICAgICAgICBERUxFVEVfRkFDRVRfVkFMVUVTLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkcyxcbiAgICAgICAgICAgICAgICBmb3JjZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxufVxuIl19