import { Pipe } from '@angular/core';
export class AssetPreviewPipe {
    transform(asset, preset = 'thumb') {
        if (!asset) {
            return '';
        }
        if (!asset.preview || typeof asset.preview !== 'string') {
            throw new Error(`Expected an Asset, got ${JSON.stringify(asset)}`);
        }
        const fp = asset.focalPoint ? `&fpx=${asset.focalPoint.x}&fpy=${asset.focalPoint.y}` : '';
        if (Number.isNaN(Number(preset))) {
            return `${asset.preview}?preset=${preset}${fp}`;
        }
        else {
            return `${asset.preview}?w=${preset}&h=${preset}${fp}`;
        }
    }
}
AssetPreviewPipe.decorators = [
    { type: Pipe, args: [{
                name: 'assetPreview',
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXQtcHJldmlldy5waXBlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9zaGFyZWQvcGlwZXMvYXNzZXQtcHJldmlldy5waXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBT3BELE1BQU0sT0FBTyxnQkFBZ0I7SUFDekIsU0FBUyxDQUFDLEtBQXFCLEVBQUUsU0FBMEIsT0FBTztRQUM5RCxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1IsT0FBTyxFQUFFLENBQUM7U0FDYjtRQUNELElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxJQUFJLE9BQU8sS0FBSyxDQUFDLE9BQU8sS0FBSyxRQUFRLEVBQUU7WUFDckQsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDdEU7UUFDRCxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxRQUFRLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxRQUFRLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUMxRixJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUU7WUFDOUIsT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLFdBQVcsTUFBTSxHQUFHLEVBQUUsRUFBRSxDQUFDO1NBQ25EO2FBQU07WUFDSCxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sTUFBTSxNQUFNLE1BQU0sTUFBTSxHQUFHLEVBQUUsRUFBRSxDQUFDO1NBQzFEO0lBQ0wsQ0FBQzs7O1lBakJKLElBQUksU0FBQztnQkFDRixJQUFJLEVBQUUsY0FBYzthQUN2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgQXNzZXRGcmFnbWVudCB9IGZyb20gJy4uLy4uL2NvbW1vbi9nZW5lcmF0ZWQtdHlwZXMnO1xuXG5AUGlwZSh7XG4gICAgbmFtZTogJ2Fzc2V0UHJldmlldycsXG59KVxuZXhwb3J0IGNsYXNzIEFzc2V0UHJldmlld1BpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcbiAgICB0cmFuc2Zvcm0oYXNzZXQ/OiBBc3NldEZyYWdtZW50LCBwcmVzZXQ6IHN0cmluZyB8IG51bWJlciA9ICd0aHVtYicpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIWFzc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhc3NldC5wcmV2aWV3IHx8IHR5cGVvZiBhc3NldC5wcmV2aWV3ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBhbiBBc3NldCwgZ290ICR7SlNPTi5zdHJpbmdpZnkoYXNzZXQpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZwID0gYXNzZXQuZm9jYWxQb2ludCA/IGAmZnB4PSR7YXNzZXQuZm9jYWxQb2ludC54fSZmcHk9JHthc3NldC5mb2NhbFBvaW50Lnl9YCA6ICcnO1xuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKE51bWJlcihwcmVzZXQpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2Fzc2V0LnByZXZpZXd9P3ByZXNldD0ke3ByZXNldH0ke2ZwfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7YXNzZXQucHJldmlld30/dz0ke3ByZXNldH0maD0ke3ByZXNldH0ke2ZwfWA7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=