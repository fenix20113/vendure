!function(){function e(t,c,n){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(c):r.value}})(t,c,n||t)}function t(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var c,n=o(e);if(t){var r=o(this).constructor;c=Reflect.construct(n,arguments,r)}else c=n.apply(this,arguments);return i(this,c)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var c=[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(c.push(a.value),!t||c.length!==t);n=!0);}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return c}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var c;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=u(e))||t&&e&&"number"==typeof e.length){c&&(e=c);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==c.return||c.return()}finally{if(o)throw i}}}}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return m(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}function f(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,c){return t&&f(e.prototype,t),c&&f(e,c),e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{eOA6:function(n,i,u){"use strict";u.r(i),u.d(i,"AddCountryToZoneDialogComponent",function(){return z}),u.d(i,"AdminDetailComponent",function(){return be}),u.d(i,"AdministratorListComponent",function(){return Ie}),u.d(i,"ChannelDetailComponent",function(){return Xe}),u.d(i,"ChannelListComponent",function(){return Ke}),u.d(i,"CountryDetailComponent",function(){return nt}),u.d(i,"CountryListComponent",function(){return gt}),u.d(i,"GlobalSettingsComponent",function(){return Ot}),u.d(i,"PaymentMethodDetailComponent",function(){return At}),u.d(i,"PaymentMethodListComponent",function(){return Et}),u.d(i,"PermissionGridComponent",function(){return te}),u.d(i,"ProfileComponent",function(){return Bt}),u.d(i,"RoleDetailComponent",function(){return ec}),u.d(i,"RoleListComponent",function(){return gc}),u.d(i,"ShippingEligibilityTestResultComponent",function(){return Oc}),u.d(i,"ShippingMethodDetailComponent",function(){return nn}),u.d(i,"ShippingMethodListComponent",function(){return mn}),u.d(i,"ShippingMethodTestResultComponent",function(){return Wc}),u.d(i,"TaxCategoryDetailComponent",function(){return hn}),u.d(i,"TaxCategoryListComponent",function(){return Fn}),u.d(i,"TaxRateDetailComponent",function(){return Vn}),u.d(i,"TaxRateListComponent",function(){return Nn}),u.d(i,"TestAddressFormComponent",function(){return xc}),u.d(i,"TestOrderBuilderComponent",function(){return Vc}),u.d(i,"ZoneDetailDialogComponent",function(){return Un}),u.d(i,"ZoneListComponent",function(){return or}),u.d(i,"ZoneMemberControlsDirective",function(){return v}),u.d(i,"ZoneMemberListHeaderDirective",function(){return y}),u.d(i,"ZoneMemberListComponent",function(){return M}),u.d(i,"AdministratorResolver",function(){return sr}),u.d(i,"ChannelResolver",function(){return lr}),u.d(i,"CountryResolver",function(){return dr}),u.d(i,"GlobalSettingsResolver",function(){return ur}),u.d(i,"PaymentMethodResolver",function(){return mr}),u.d(i,"ProfileResolver",function(){return fr}),u.d(i,"RoleResolver",function(){return br}),u.d(i,"ShippingMethodResolver",function(){return gr}),u.d(i,"TaxCategoryResolver",function(){return hr}),u.d(i,"TaxRateResolver",function(){return pr}),u.d(i,"SettingsModule",function(){return Tr}),u.d(i,"settingsRoutes",function(){return vr}),u.d(i,"administratorBreadcrumb",function(){return yr}),u.d(i,"channelBreadcrumb",function(){return Cr}),u.d(i,"roleBreadcrumb",function(){return kr}),u.d(i,"taxCategoryBreadcrumb",function(){return Or}),u.d(i,"taxRateBreadcrumb",function(){return Qr}),u.d(i,"countryBreadcrumb",function(){return Fr}),u.d(i,"shippingMethodBreadcrumb",function(){return Sr}),u.d(i,"paymentMethodBreadcrumb",function(){return Ir});var m=u("t9nd"),f=u("lJxs"),h=u("fXoL"),p=u("xUfP"),v=function e(t){g(this,e),this.templateRef=t};v.\u0275fac=function(e){return new(e||v)(h.bc(h.ab))},v.\u0275dir=h.Wb({type:v,selectors:[["","vdrZoneMemberControls",""]]});var y=function e(t){g(this,e),this.templateRef=t};y.\u0275fac=function(e){return new(e||y)(h.bc(h.ab))},y.\u0275dir=h.Wb({type:y,selectors:[["","vdrZoneMemberListHeader",""]]});var C=u("ofXK"),k=u("Bzlx"),O=u("3Pt+"),Q=u("CotX"),F=u("r2d8"),S=u("8MG2"),I=u("sYmb"),T=u("V0to");function P(e,t){1&e&&h.dc(0)}function j(e,t){if(1&e&&(h.fc(0),h.Tc(1,P,1,0,"ng-container",4),h.ec()),2&e){var c=h.rc();h.Qb(1),h.yc("ngTemplateOutlet",c.headerTemplate.templateRef)}}function D(e,t){1&e&&h.dc(0)}var V=function(e){return{member:e}};function w(e,t){if(1&e&&(h.fc(0),h.Tc(1,D,1,0,"ng-container",7),h.ec()),2&e){var c=h.rc().item,n=h.rc();h.Qb(1),h.yc("ngTemplateOutlet",n.controlsTemplate.templateRef)("ngTemplateOutletContext",h.Cc(2,V,c))}}function x(e,t){if(1&e&&(h.hc(0,"td",5),h.Vc(1),h.gc(),h.hc(2,"td",5),h.Vc(3),h.gc(),h.hc(4,"td",5),h.cc(5,"clr-icon"),h.gc(),h.hc(6,"td",6),h.Tc(7,w,2,4,"ng-container",1),h.gc()),2&e){var c=t.item,n=h.rc();h.Qb(1),h.Wc(c.code),h.Qb(2),h.Wc(c.name),h.Qb(2),h.Tb("is-success",c.enabled),h.Rb("shape",c.enabled?"check":"times"),h.Qb(2),h.yc("ngIf",n.controlsTemplate)}}var L=function(){return["UpdateSettings","UpdateZone"]},M=function(){function e(){var t=this;g(this,e),this.members=[],this.selectedMemberIds=[],this.selectionChange=new h.t,this.filterTerm="",this.isMemberSelected=function(e){return-1<t.selectedMemberIds.indexOf(e.id)}}return b(e,[{key:"filteredMembers",value:function(){if(""!==this.filterTerm){var e=this.filterTerm.toLocaleLowerCase();return this.members.filter(function(t){return t.name.toLocaleLowerCase().includes(e)||t.code.toLocaleLowerCase().includes(e)})}return this.members}},{key:"areAllSelected",value:function(){return!!this.members&&this.selectedMemberIds.length===this.members.length}},{key:"toggleSelectAll",value:function(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(function(e){return e.id}))}},{key:"toggleSelectMember",value:function(e){this.selectedMemberIds.includes(e.id)?this.selectionChange.emit(this.selectedMemberIds.filter(function(t){return t!==e.id})):this.selectionChange.emit([].concat(d(this.selectedMemberIds),[e.id]))}}]),e}();M.\u0275fac=function(e){return new(e||M)},M.\u0275cmp=h.Vb({type:M,selectors:[["vdr-zone-member-list"]],contentQueries:function(e,t,c){var n;(1&e&&(h.Ub(c,y,1),h.Ub(c,v,1)),2&e)&&(h.Hc(n=h.qc())&&(t.headerTemplate=n.first),h.Hc(n=h.qc())&&(t.controlsTemplate=n.first))},inputs:{members:"members",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange"},decls:17,vars:20,consts:[[1,"members-header"],[4,"ngIf"],["type","text",3,"placeholder","ngModel","ngModelChange"],[3,"items","allSelected","isRowSelectedFn","rowSelectChange","allSelectChange"],[4,"ngTemplateOutlet"],[1,"left","align-middle"],[1,"right","align-middle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){1&e&&(h.hc(0,"div",0),h.Tc(1,j,2,1,"ng-container",1),h.hc(2,"input",2),h.pc("ngModelChange",function(e){return t.filterTerm=e}),h.sc(3,"translate"),h.gc(),h.gc(),h.hc(4,"vdr-data-table",3),h.pc("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),h.sc(5,"hasPermission"),h.hc(6,"vdr-dt-column"),h.Vc(7),h.sc(8,"translate"),h.gc(),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.cc(15,"vdr-dt-column"),h.Tc(16,x,8,6,"ng-template"),h.gc()),2&e&&(h.Qb(1),h.yc("ngIf",t.headerTemplate),h.Qb(1),h.yc("placeholder",h.tc(3,9,"settings.filter-by-member-name"))("ngModel",t.filterTerm),h.Qb(2),h.yc("items",t.filteredMembers())("allSelected",t.areAllSelected())("isRowSelectedFn",h.tc(5,11,h.Bc(19,L))&&t.isMemberSelected),h.Qb(3),h.Wc(h.tc(8,13,"common.code")),h.Qb(3),h.Wc(h.tc(11,15,"common.name")),h.Qb(3),h.Wc(h.tc(14,17,"common.enabled")))},directives:[C.o,k.a,O.b,O.p,O.s,Q.a,F.a,C.t,S.o],pipes:[I.d,T.a],styles:[".members-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid var(--color-component-border-200)}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});var A=u("jHbs"),$=function(e){return{zoneName:e}};function N(e,t){if(1&e&&(h.Vc(0),h.sc(1,"translate")),2&e){var c=h.rc();h.Wc(h.uc(1,1,"settings.add-countries-to-zone",h.Cc(4,$,c.zoneName)))}}function R(e,t){if(1&e){var c=h.ic();h.hc(0,"button",3),h.pc("click",function(){return h.Lc(c),h.rc().cancel()}),h.Vc(1),h.sc(2,"translate"),h.gc(),h.hc(3,"button",4),h.pc("click",function(){return h.Lc(c),h.rc().add()}),h.Vc(4),h.sc(5,"translate"),h.gc()}if(2&e){var n=h.rc();h.Qb(1),h.Wc(h.tc(2,3,"common.cancel")),h.Qb(2),h.yc("disabled",!n.selectedMemberIds.length),h.Qb(1),h.Xc(" ",h.uc(5,5,"settings.add-countries-to-zone",h.Cc(8,$,n.zoneName))," ")}}var z=function(){function e(t){g(this,e),this.dataService=t,this.currentMembers=[],this.selectedMemberIds=[]}return b(e,[{key:"ngOnInit",value:function(){var e=this.currentMembers.map(function(e){return e.id});this.availableCountries$=this.dataService.settings.getCountries(999).mapStream(function(e){return e.countries.items}).pipe(Object(f.a)(function(t){return t.filter(function(t){return!e.includes(t.id)})}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedMemberIds)}}]),e}();z.\u0275fac=function(e){return new(e||z)(h.bc(m.s))},z.\u0275cmp=h.Vb({type:z,selectors:[["vdr-add-country-to-zone-dialog"]],decls:4,vars:4,consts:[["vdrDialogTitle",""],[3,"members","selectedMemberIds","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(h.Tc(0,N,2,6,"ng-template",0),h.hc(1,"vdr-zone-member-list",1),h.pc("selectionChange",function(e){return t.selectedMemberIds=e}),h.sc(2,"async"),h.gc(),h.Tc(3,R,6,10,"ng-template",2)),2&e&&(h.Qb(1),h.yc("members",h.tc(2,2,t.availableCountries$))("selectedMemberIds",t.selectedMemberIds))},directives:[p.a,M,A.a],pipes:[C.b,I.d],styles:[""],changeDetection:0});var W=u("OxKu"),X=u("gQU7"),E=u("IzEk"),_=u("5+tZ"),G=u("tyNb"),U=u("uEVm"),Z=u("iszU"),B=u("nqNv"),q=u("1XD6"),H=u("ZOsW"),K=u("gXNc");function Y(e,t){if(1&e){var c=h.ic();h.hc(0,"button",4),h.pc("click",function(){h.Lc(c);var e=h.rc().$implicit;return h.rc().toggleAll(e.permissions)}),h.Vc(1),h.sc(2,"translate"),h.gc()}2&e&&(h.Qb(1),h.Xc(" ",h.tc(2,1,"common.toggle-all")," "))}function J(e,t){if(1&e){var c=h.ic();h.hc(0,"td"),h.hc(1,"vdr-select-toggle",5),h.pc("selectedChange",function(e){h.Lc(c);var n=t.$implicit;return h.rc(2).setPermission(n.name,e)}),h.gc(),h.gc()}if(2&e){var n=t.$implicit,r=h.rc().$implicit,i=h.rc();h.Rb("colspan",1===r.permissions.length?4:1),h.Qb(1),h.yc("title",n.description)("label",n.name)("disabled",i.readonly)("selected",null==i.activePermissions?null:i.activePermissions.includes(n.name))}}function ee(e,t){if(1&e&&(h.hc(0,"tr"),h.hc(1,"td",2),h.hc(2,"div"),h.hc(3,"strong"),h.Vc(4),h.sc(5,"translate"),h.gc(),h.gc(),h.hc(6,"small"),h.Vc(7),h.sc(8,"translate"),h.gc(),h.cc(9,"br"),h.Tc(10,Y,3,3,"button",3),h.gc(),h.Tc(11,J,2,5,"td",1),h.gc()),2&e){var c=t.$implicit,n=h.rc();h.Qb(4),h.Wc(h.tc(5,4,c.label)),h.Qb(3),h.Wc(h.tc(8,6,c.description)),h.Qb(3),h.yc("ngIf",1<c.permissions.length&&!n.readonly),h.Qb(1),h.yc("ngForOf",c.permissions)}}var te=function(){function e(){g(this,e),this.readonly=!1,this.permissionChange=new h.t}return b(e,[{key:"ngOnInit",value:function(){this.buildGrid()}},{key:"setPermission",value:function(e,t){this.readonly||this.permissionChange.emit({permission:e,value:t})}},{key:"toggleAll",value:function(e){var t,c=this,n=e.some(function(e){return!c.activePermissions.includes(e.name)}),r=l(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.permissionChange.emit({permission:i.name,value:n})}}catch(a){r.e(a)}finally{r.f()}}},{key:"buildGrid",value:function(){var e,t,c=this,n=new Map,r=[],i=/^(Create|Read|Update|Delete)([a-zA-Z]+)$/,a=l(this.permissionDefinitions);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(i.test(o.name)){var u=null===(e=o.name.match(i))||void 0===e?void 0:e[2];if(u){var m=n.get(u);m?m.push(o):n.set(u,[o])}}else o.assignable&&r.push(o)}}catch(f){a.e(f)}finally{a.f()}this.gridData=[].concat(d(r.map(function(e){return{label:e.name,description:e.description,permissions:[e]}})),d(Array.from(n.entries()).map(function(e){var t=s(e,2),n=t[0],r=t[1];return{label:n,description:c.extractCrudDescription(r[0]),permissions:r}})))}},{key:"extractCrudDescription",value:function(e){return e.description.replace(/Grants permission to [\w]+/,"Grants permissions on")}}]),e}();te.\u0275fac=function(e){return new(e||te)},te.\u0275cmp=h.Vb({type:te,selectors:[["vdr-permission-grid"]],inputs:{permissionDefinitions:"permissionDefinitions",activePermissions:"activePermissions",readonly:"readonly"},outputs:{permissionChange:"permissionChange"},decls:3,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"permission-group","left"],["class","btn btn-sm btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-link",3,"click"],["size","small",3,"title","label","disabled","selected","selectedChange"]],template:function(e,t){1&e&&(h.hc(0,"table",0),h.hc(1,"tbody"),h.Tc(2,ee,12,8,"tr",1),h.gc(),h.gc()),2&e&&(h.Qb(2),h.yc("ngForOf",t.gridData))},directives:[C.n,C.o,K.a],pipes:[I.d],styles:["td.permission-group[_ngcontent-%COMP%]{max-width:300px;background-color:var(--color-component-bg-200)}"],changeDetection:0});var ce=u("W7hW"),ne=u("Lbhx"),re=u("a1B0");function ie(e,t){if(1&e){var c=h.ic();h.hc(0,"button",19),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function ae(e,t){if(1&e){var c=h.ic();h.hc(0,"button",19),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function oe(e,t){1&e&&h.Tc(0,ae,3,4,"button",20),2&e&&h.yc("vdrIfPermissions","UpdateAdministrator")}function se(e,t){1&e&&(h.hc(0,"vdr-form-field",21),h.sc(1,"translate"),h.cc(2,"input",22),h.gc()),2&e&&h.yc("label",h.tc(1,1,"settings.password"))}function le(e,t){1&e&&(h.hc(0,"vdr-form-field",23),h.sc(1,"translate"),h.cc(2,"input",22),h.gc()),2&e&&h.yc("label",h.tc(1,2,"settings.password"))("readOnlyToggle",!0)}function de(e,t){if(1&e&&h.cc(0,"vdr-custom-field-control",27),2&e){var c=h.rc().$implicit,n=h.rc(2);h.yc("customFieldsFormGroup",n.detailForm.get("customFields"))("customField",c)}}function ue(e,t){if(1&e&&(h.fc(0),h.Tc(1,de,1,2,"vdr-custom-field-control",26),h.ec()),2&e){var c=t.$implicit,n=h.rc(2);h.Qb(1),h.yc("ngIf",n.customFieldIsSet(c.name))}}function me(e,t){if(1&e&&(h.hc(0,"section",24),h.hc(1,"label"),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,ue,2,1,"ng-container",25),h.gc()),2&e){var c=h.rc();h.Qb(2),h.Wc(h.tc(3,2,"common.custom-fields")),h.Qb(2),h.yc("ngForOf",c.customFields)}}function fe(e,t){if(1&e){var c=h.ic();h.hc(0,"li",28),h.hc(1,"button",29),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc().selectedChannelId=e.channelId}),h.Vc(2),h.sc(3,"translate"),h.sc(4,"channelCodeToLabel"),h.gc(),h.gc()}if(2&e){var n=t.$implicit,r=h.rc();h.Qb(1),h.Tb("active",r.selectedChannelId===n.channelId),h.yc("id",n.channelId),h.Rb("aria-selected",r.selectedChannelId===n.channelId),h.Qb(1),h.Xc(" ",h.tc(3,5,h.tc(4,7,n.channelCode))," ")}}var be=function(e){c(i,e);var n=r(i);function i(e,c,r,a,o,s,l){var d;return g(this,i),(d=n.call(this,c,e,r,o)).changeDetector=a,d.dataService=o,d.formBuilder=s,d.notificationService=l,d.selectedRoles=[],d.selectedRolePermissions={},d.selectedChannelId=null,d.customFields=d.getCustomFieldConfig("Administrator"),d.detailForm=d.formBuilder.group({emailAddress:["",O.C.required],firstName:["",O.C.required],lastName:["",O.C.required],password:[""],roles:[[]],customFields:d.formBuilder.group(d.customFields.reduce(function(e,c){return Object.assign(Object.assign({},e),t({},c.name,""))},{}))}),d}return b(i,[{key:"getAvailableChannels",value:function(){return Object.values(this.selectedRolePermissions)}},{key:"ngOnInit",value:function(){var e=this;this.init(),this.administrator$=this.entity$,this.allRoles$=this.dataService.administrator.getRoles(999).mapStream(function(e){return e.roles.items.filter(function(e){return e.code!==X.CUSTOMER_ROLE_CODE})}),this.dataService.client.userStatus().single$.subscribe(function(t){if(!t.userStatus.permissions.includes(m.H.UpdateAdministrator)){var c=e.detailForm.get("roles");c&&c.disable()}}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"rolesChanged",value:function(e){this.buildPermissionsMap()}},{key:"getPermissionsForSelectedChannel",value:function(){function e(e){return Object.entries(e).filter(function(e){var t=s(e,2);t[0];return t[1]}).map(function(e){var t=s(e,2),c=t[0];t[1];return c})}if(this.selectedChannelId&&this.selectedRolePermissions[this.selectedChannelId])return e(this.selectedRolePermissions[this.selectedChannelId].permissions);var t=Object.values(this.selectedRolePermissions);return 0<t.length?(this.selectedChannelId=t[0].channelId,e(t[0].permissions)):[]}},{key:"create",value:function(){var e=this,t=this.detailForm.value,c={emailAddress:t.emailAddress,firstName:t.firstName,lastName:t.lastName,password:t.password,customFields:t.customFields,roleIds:t.roles.map(function(e){return e.id})};this.dataService.administrator.createAdministrator(c).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createAdministrator.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"Administrator"})})}},{key:"save",value:function(){var e=this;this.administrator$.pipe(Object(E.a)(1),Object(_.a)(function(t){var c=t.id,n=e.detailForm.value,r={id:c,emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,password:n.password,customFields:n.customFields,roleIds:n.roles.map(function(e){return e.id})};return e.dataService.administrator.updateAdministrator(r)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"Administrator"})})}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,roles:e.user.roles}),this.customFields.length){var c,n=this.detailForm.get("customFields"),r=l(this.customFields);try{for(r.s();!(c=r.n()).done;){var i=c.value.name,a=e.customFields[i],o=n.get(i);o&&o.patchValue(a)}}catch(d){r.e(d)}finally{r.f()}}var s=this.detailForm.get("password");s&&(e.id?s.setValidators([]):s.setValidators([O.C.required])),this.buildPermissionsMap()}},{key:"buildPermissionsMap",value:function(){var e=this.detailForm.get("roles");if(e){var t,c=e.value,n=new Map,r=new Map,i=l(c);try{for(i.s();!(t=i.n()).done;){var a,o=t.value,s=l(o.channels);try{var d=function(){var e=a.value,t=n.get(e.id)||new Set;o.permissions.forEach(function(e){return t.add(e)}),n.set(e.id,t),r.set(e.id,e.code)};for(s.s();!(a=s.n()).done;)d()}catch(y){s.e(y)}finally{s.f()}}}catch(y){i.e(y)}finally{i.f()}this.selectedRolePermissions={};for(var u=0,m=Array.from(n.keys());u<m.length;u++){var f,b=m[u],g=n.get(b),h={},p=l(this.serverConfigService.getPermissionDefinitions());try{for(p.s();!(f=p.n()).done;){var v=f.value;h[v.name]=g.has(v.name)}}catch(y){p.e(y)}finally{p.f()}this.selectedRolePermissions[b]={channelId:b,channelCode:r.get(b),permissions:h}}}}}]),i}(m.l);be.\u0275fac=function(e){return new(e||be)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},be.\u0275cmp=h.Vb({type:be,selectors:[["vdr-admin-detail"]],features:[h.Nb],decls:37,vars:47,consts:[[3,"entity"],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],[1,"clr-control-label"],["formControlName","roles","bindLabel","description",3,"items","multiple","hideSelected","change"],["role","tablist",1,"nav"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"activePermissions","permissionDefinitions","readonly"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Administrator",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Administrator",3,"customFieldsFormGroup","customField"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"id","click"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,ie,3,4,"button",2),h.sc(7,"async"),h.Tc(8,oe,1,1,"ng-template",null,3,h.Uc),h.gc(),h.gc(),h.hc(10,"form",4),h.hc(11,"vdr-form-field",5),h.sc(12,"translate"),h.cc(13,"input",6),h.sc(14,"hasPermission"),h.gc(),h.hc(15,"vdr-form-field",7),h.sc(16,"translate"),h.cc(17,"input",8),h.sc(18,"hasPermission"),h.gc(),h.hc(19,"vdr-form-field",9),h.sc(20,"translate"),h.cc(21,"input",10),h.sc(22,"hasPermission"),h.gc(),h.Tc(23,se,3,3,"vdr-form-field",11),h.sc(24,"async"),h.Tc(25,le,3,4,"vdr-form-field",12),h.sc(26,"async"),h.sc(27,"hasPermission"),h.Tc(28,me,5,4,"section",13),h.hc(29,"label",14),h.Vc(30),h.sc(31,"translate"),h.gc(),h.hc(32,"ng-select",15),h.pc("change",function(e){return t.rolesChanged(e)}),h.sc(33,"async"),h.gc(),h.hc(34,"ul",16),h.Tc(35,fe,5,9,"li",17),h.gc(),h.cc(36,"vdr-permission-grid",18),h.gc()),2&e){var c=h.Ic(9);h.Qb(2),h.yc("entity",h.tc(3,21,t.entity$)),h.Qb(4),h.yc("ngIf",h.tc(7,23,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(12,25,"settings.email-address")),h.Qb(2),h.yc("readonly",!h.tc(14,27,"UpdateAdministrator")),h.Qb(2),h.yc("label",h.tc(16,29,"settings.first-name")),h.Qb(2),h.yc("readonly",!h.tc(18,31,"UpdateAdministrator")),h.Qb(2),h.yc("label",h.tc(20,33,"settings.last-name")),h.Qb(2),h.yc("readonly",!h.tc(22,35,"UpdateAdministrator")),h.Qb(2),h.yc("ngIf",h.tc(24,37,t.isNew$)),h.Qb(2),h.yc("ngIf",!h.tc(26,39,t.isNew$)&&h.tc(27,41,"UpdateAdministrator")),h.Qb(3),h.yc("ngIf",t.customFields.length),h.Qb(2),h.Wc(h.tc(31,43,"settings.roles")),h.Qb(2),h.yc("items",h.tc(33,45,t.allRoles$))("multiple",!0)("hideSelected",!0),h.Qb(3),h.yc("ngForOf",t.getAvailableChannels()),h.Qb(1),h.yc("activePermissions",t.getPermissionsForSelectedChannel())("permissionDefinitions",t.permissionDefinitions)("readonly",!0)}},directives:[U.a,U.b,Z.a,U.c,B.a,C.o,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,S.u,H.a,C.n,te,ce.a,O.k,ne.a],pipes:[C.b,I.d,T.a,re.a],styles:[""],changeDetection:0});var ge=u("EY2u"),he=u("eIep"),pe=u("ef/U"),ve=u("zzDm"),ye=u("eBFp"),Ce=u("IKcI"),ke=u("EFLa"),Oe=function(){return["./create"]};function Qe(e,t){1&e&&(h.hc(0,"a",3),h.cc(1,"clr-icon",4),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,Oe)),h.Qb(2),h.Xc(" ",h.tc(3,2,"admin.create-new-administrator")," "))}var Fe=function(e){return["./",e]};function Se(e,t){if(1&e){var c=h.ic();h.hc(0,"td",5),h.Vc(1),h.gc(),h.hc(2,"td",5),h.Vc(3),h.gc(),h.hc(4,"td",5),h.Vc(5),h.gc(),h.hc(6,"td",6),h.cc(7,"vdr-table-row-action",7),h.sc(8,"translate"),h.gc(),h.hc(9,"td"),h.hc(10,"vdr-dropdown"),h.hc(11,"button",8),h.Vc(12),h.sc(13,"translate"),h.cc(14,"clr-icon",9),h.gc(),h.hc(15,"vdr-dropdown-menu",10),h.hc(16,"button",11),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteAdministrator(e)}),h.sc(17,"hasPermission"),h.cc(18,"clr-icon",12),h.Vc(19),h.sc(20,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item;h.Qb(1),h.Wc(n.firstName),h.Qb(2),h.Wc(n.lastName),h.Qb(2),h.Wc(n.emailAddress),h.Qb(2),h.yc("label",h.tc(8,8,"common.edit"))("linkTo",h.Cc(16,Fe,n.id)),h.Qb(5),h.Xc(" ",h.tc(13,10,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(17,12,"DeleteAdministrator")),h.Qb(3),h.Xc(" ",h.tc(20,14,"common.delete")," ")}}var Ie=function(t){c(i,t);var n=r(i);function i(t,c,r,s,l){var d,u;return g(this,i),(u=n.call(this,c,r)).dataService=t,u.modalService=s,u.notificationService=l,e((d=a(u),o(i.prototype)),"setQueryFn",d).call(d,function(){var e;return(e=u.dataService.administrator).getAdministrators.apply(e,arguments)},function(e){return e.administrators}),u}return b(i,[{key:"deleteAdministrator",value:function(e){var t=this;return this.modalService.dialog({title:Object(W.a)("catalog.confirm-delete-administrator"),body:"".concat(e.firstName," ").concat(e.lastName),buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.administrator.deleteAdministrator(e.id):ge.a})).subscribe(function(){t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"Administrator"}),t.refresh()},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"Administrator"})})}}]),i}(m.n);Ie.\u0275fac=function(e){return new(e||Ie)(h.bc(m.s),h.bc(G.e),h.bc(G.a),h.bc(m.F),h.bc(m.G))},Ie.\u0275cmp=h.Vb({type:Ie,selectors:[["vdr-administrator-list"]],features:[h.Nb],decls:21,vars:22,consts:[["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,Qe,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.pc("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.sc(8,"async"),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.hc(15,"vdr-dt-column"),h.Vc(16),h.sc(17,"translate"),h.gc(),h.cc(18,"vdr-dt-column"),h.cc(19,"vdr-dt-column"),h.Tc(20,Se,21,18,"ng-template"),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions","CreateAdministrator"),h.Qb(1),h.yc("items",h.tc(5,8,t.items$))("itemsPerPage",h.tc(6,10,t.itemsPerPage$))("totalItems",h.tc(7,12,t.totalItems$))("currentPage",h.tc(8,14,t.currentPage$)),h.Qb(6),h.Wc(h.tc(11,16,"settings.first-name")),h.Qb(3),h.Wc(h.tc(14,18,"settings.last-name")),h.Qb(3),h.Wc(h.tc(17,20,"settings.email-address")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,pe.a,ve.a,ye.a,Ce.a,ke.a],pipes:[C.b,I.d,T.a],styles:[""]});var Te=u("Fh+9"),Pe=u("YxnJ");function je(e,t){if(1&e){var c=h.ic();h.hc(0,"button",22),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",!n.saveButtonEnabled()),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function De(e,t){if(1&e){var c=h.ic();h.hc(0,"button",22),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",!n.saveButtonEnabled()),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}var Ve=function(){return["SuperAdmin","UpdateChannel"]};function we(e,t){1&e&&h.Tc(0,De,3,4,"button",23),2&e&&h.yc("vdrIfPermissions",h.Bc(1,Ve))}function xe(e,t){if(1&e&&(h.hc(0,"option",24),h.Vc(1),h.sc(2,"localeCurrencyName"),h.gc()),2&e){var c=t.$implicit;h.yc("value",c),h.Qb(1),h.Wc(h.tc(2,2,c))}}function Le(e,t){if(1&e&&(h.hc(0,"option",24),h.Vc(1),h.sc(2,"translate"),h.sc(3,"uppercase"),h.gc()),2&e){var c=t.$implicit;h.yc("value",c),h.Qb(1),h.Yc(" ",h.tc(2,3,"lang."+c)," (",h.tc(3,5,c),") ")}}function Me(e,t){if(1&e&&(h.hc(0,"option",24),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.yc("value",c.id),h.Qb(1),h.Wc(c.name)}}function Ae(e,t){1&e&&(h.hc(0,"clr-alert",25),h.hc(1,"clr-alert-item"),h.hc(2,"span",26),h.Vc(3),h.sc(4,"translate"),h.gc(),h.gc(),h.gc()),2&e&&(h.yc("clrAlertClosable",!1),h.Qb(3),h.Xc(" ",h.tc(4,2,"error.no-default-tax-zone-set")," "))}function $e(e,t){if(1&e&&(h.hc(0,"option",24),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.yc("value",c.id),h.Qb(1),h.Wc(c.name)}}function Ne(e,t){1&e&&(h.hc(0,"clr-alert",27),h.hc(1,"clr-alert-item"),h.hc(2,"span",26),h.Vc(3),h.sc(4,"translate"),h.gc(),h.gc(),h.gc()),2&e&&(h.yc("clrAlertClosable",!1),h.Qb(3),h.Xc(" ",h.tc(4,2,"error.no-default-shipping-zone-set")," "))}function Re(e,t){if(1&e&&h.cc(0,"vdr-custom-field-control",31),2&e){var c=h.rc().$implicit,n=h.rc(2);h.yc("customFieldsFormGroup",n.detailForm.get("customFields"))("customField",c)}}function ze(e,t){if(1&e&&(h.fc(0),h.Tc(1,Re,1,2,"vdr-custom-field-control",30),h.ec()),2&e){var c=t.$implicit,n=h.rc(2);h.Qb(1),h.yc("ngIf",n.customFieldIsSet(c.name))}}function We(e,t){if(1&e&&(h.hc(0,"section",28),h.hc(1,"label"),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,ze,2,1,"ng-container",29),h.gc()),2&e){var c=h.rc();h.Qb(2),h.Wc(h.tc(3,2,"common.custom-fields")),h.Qb(2),h.yc("ngForOf",c.customFields)}}var Xe=function(e){c(i,e);var n=r(i);function i(e,c,r,a,o,s,l){var d;return g(this,i),(d=n.call(this,c,e,r,o)).serverConfigService=r,d.changeDetector=a,d.dataService=o,d.formBuilder=s,d.notificationService=l,d.currencyCodes=Object.values(m.q),d.updatePermission=[m.H.SuperAdmin,m.H.UpdateChannel,m.H.CreateChannel],d.customFields=d.getCustomFieldConfig("Channel"),d.detailForm=d.formBuilder.group({code:["",O.C.required],token:["",O.C.required],pricesIncludeTax:[!1],currencyCode:[""],defaultShippingZoneId:["",O.C.required],defaultLanguageCode:[],defaultTaxZoneId:["",O.C.required],customFields:d.formBuilder.group(d.customFields.reduce(function(e,c){return Object.assign(Object.assign({},e),t({},c.name,""))},{}))}),d}return b(i,[{key:"ngOnInit",value:function(){this.init(),this.zones$=this.dataService.settings.getZones().mapSingle(function(e){return e.zones}),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,c={code:t.code,token:t.token,defaultLanguageCode:t.defaultLanguageCode,pricesIncludeTax:t.pricesIncludeTax,currencyCode:t.currencyCode,defaultShippingZoneId:t.defaultShippingZoneId,defaultTaxZoneId:t.defaultTaxZoneId,customFields:t.customFields};this.dataService.settings.createChannel(c).pipe(Object(_.a)(function(t){var c=t.createChannel;return e.dataService.auth.currentUser().single$.pipe(Object(f.a)(function(e){return{me:e.me,createChannel:c}}))}),Object(_.a)(function(t){var c=t.me,n=t.createChannel;return e.dataService.client.updateUserChannels(c.channels).pipe(Object(f.a)(function(){return n}))})).subscribe(function(t){switch(t.__typename){case"Channel":e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"Channel"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.id],{relativeTo:e.route});break;case"LanguageNotAvailableError":e.notificationService.error(t.message)}})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.entity$.pipe(Object(E.a)(1),Object(_.a)(function(c){var n={id:c.id,code:t.code,pricesIncludeTax:t.pricesIncludeTax,currencyCode:t.currencyCode,defaultShippingZoneId:t.defaultShippingZoneId,defaultLanguageCode:t.defaultLanguageCode,defaultTaxZoneId:t.defaultTaxZoneId,customFields:t.customFields};return e.dataService.settings.updateChannel(n)})).subscribe(function(t){var c=t.updateChannel;switch(c.__typename){case"Channel":e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Channel"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck();break;case"LanguageNotAvailableError":e.notificationService.error(c.message)}})}}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({code:e.code,token:e.token||this.generateToken(),pricesIncludeTax:e.pricesIncludeTax,currencyCode:e.currencyCode,defaultShippingZoneId:e.defaultShippingZone?e.defaultShippingZone.id:"",defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZone?e.defaultTaxZone.id:""}),this.customFields.length){var c,n=this.detailForm.get("customFields"),r=l(this.customFields);try{for(r.s();!(c=r.n()).done;){var i=c.value.name,a=e.customFields[i],o=n.get(i);o&&o.patchValue(a)}}catch(d){r.e(d)}finally{r.f()}}if(e.code===X.DEFAULT_CHANNEL_CODE){var s=this.detailForm.get("code");s&&s.disable()}}},{key:"generateToken",value:function(){var e=function(){return Math.random().toString(36).substr(3,10)};return"".concat(e()).concat(e())}}]),i}(m.l);Xe.\u0275fac=function(e){return new(e||Xe)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},Xe.\u0275cmp=h.Vb({type:Xe,selectors:[["vdr-channel-detail"]],features:[h.Nb],decls:50,vars:63,consts:[[3,"entity"],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","defaultTaxZoneId",3,"label"],["clrSelect","","name","currencyCode","formControlName","currencyCode",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","defaultLanguage",3,"label"],["clrSelect","","name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["clrSelect","","name","defaultTaxZoneId","formControlName","defaultTaxZoneId",3,"vdrDisabled"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["clrSelect","","name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["clrAlertType","warning",3,"clrAlertClosable",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["clrAlertType","warning",3,"clrAlertClosable"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Channel",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Channel",3,"customFieldsFormGroup","customField"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,je,3,4,"button",2),h.sc(7,"async"),h.Tc(8,we,1,2,"ng-template",null,3,h.Uc),h.gc(),h.gc(),h.hc(10,"form",4),h.hc(11,"vdr-form-field",5),h.sc(12,"translate"),h.cc(13,"input",6),h.sc(14,"hasPermission"),h.gc(),h.hc(15,"vdr-form-field",7),h.sc(16,"translate"),h.cc(17,"input",8),h.sc(18,"hasPermission"),h.gc(),h.hc(19,"vdr-form-field",9),h.sc(20,"translate"),h.hc(21,"select",10),h.sc(22,"hasPermission"),h.Tc(23,xe,3,4,"option",11),h.gc(),h.gc(),h.hc(24,"vdr-form-field",12),h.sc(25,"translate"),h.hc(26,"select",13),h.sc(27,"hasPermission"),h.Tc(28,Le,4,7,"option",11),h.sc(29,"async"),h.gc(),h.gc(),h.hc(30,"vdr-form-field",14),h.sc(31,"translate"),h.hc(32,"clr-toggle-wrapper"),h.cc(33,"input",15),h.sc(34,"hasPermission"),h.gc(),h.gc(),h.hc(35,"vdr-form-field",9),h.sc(36,"translate"),h.hc(37,"select",16),h.sc(38,"hasPermission"),h.Tc(39,Me,2,2,"option",11),h.sc(40,"async"),h.gc(),h.gc(),h.Tc(41,Ae,5,4,"clr-alert",17),h.hc(42,"vdr-form-field",18),h.sc(43,"translate"),h.hc(44,"select",19),h.sc(45,"hasPermission"),h.Tc(46,$e,2,2,"option",11),h.sc(47,"async"),h.gc(),h.gc(),h.Tc(48,Ne,5,4,"clr-alert",20),h.Tc(49,We,5,4,"section",21),h.gc()),2&e){var c=h.Ic(9);h.Qb(2),h.yc("entity",h.tc(3,25,t.entity$)),h.Qb(4),h.yc("ngIf",h.tc(7,27,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(12,29,"common.code")),h.Qb(2),h.yc("readonly",!h.tc(14,31,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(16,33,"settings.channel-token")),h.Qb(2),h.yc("readonly",!h.tc(18,35,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(20,37,"settings.currency")),h.Qb(2),h.yc("vdrDisabled",!h.tc(22,39,t.updatePermission)),h.Qb(2),h.yc("ngForOf",t.currencyCodes),h.Qb(1),h.yc("label",h.tc(25,41,"common.default-language")),h.Qb(2),h.yc("vdrDisabled",!h.tc(27,43,t.updatePermission)),h.Qb(2),h.yc("ngForOf",h.tc(29,45,t.availableLanguageCodes$)),h.Qb(2),h.yc("label",h.tc(31,47,"settings.prices-include-tax")),h.Qb(3),h.yc("vdrDisabled",!h.tc(34,49,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(36,51,"settings.default-tax-zone")),h.Qb(2),h.yc("vdrDisabled",!h.tc(38,53,t.updatePermission)),h.Qb(2),h.yc("ngForOf",h.tc(40,55,t.zones$)),h.Qb(2),h.yc("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultTaxZoneId),h.Qb(1),h.yc("label",h.tc(43,57,"settings.default-shipping-zone")),h.Qb(2),h.yc("vdrDisabled",!h.tc(45,59,t.updatePermission)),h.Qb(2),h.yc("ngForOf",h.tc(47,61,t.zones$)),h.Qb(2),h.yc("ngIf",t.detailForm.value.code&&!t.detailForm.value.defaultShippingZoneId),h.Qb(1),h.yc("ngIf",t.customFields.length)}},directives:[U.a,U.b,Z.a,U.c,B.a,C.o,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,O.A,S.A,Te.a,C.n,S.k,O.a,S.i,ce.a,O.u,O.D,S.f,S.g,S.h,O.k,S.u,ne.a],pipes:[C.b,I.d,T.a,Pe.a,C.A],styles:["clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}"],changeDetection:0});var Ee=u("XNiG"),_e=u("JX91"),Ge=u("gUbN"),Ue=function(){return["./create"]};function Ze(e,t){1&e&&(h.hc(0,"a",3),h.cc(1,"clr-icon",4),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,Ue)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-channel")," "))}var Be=function(e){return["./",e]},qe=function(){return["SuperAdmin","DeleteChannel"]};function He(e,t){if(1&e){var c=h.ic();h.hc(0,"td",5),h.cc(1,"vdr-channel-badge",6),h.Vc(2),h.sc(3,"translate"),h.sc(4,"channelCodeToLabel"),h.gc(),h.hc(5,"td",7),h.cc(6,"vdr-table-row-action",8),h.sc(7,"translate"),h.gc(),h.hc(8,"td",7),h.hc(9,"vdr-dropdown"),h.hc(10,"button",9),h.Vc(11),h.sc(12,"translate"),h.cc(13,"clr-icon",10),h.gc(),h.hc(14,"vdr-dropdown-menu",11),h.hc(15,"button",12),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteChannel(e.id)}),h.sc(16,"hasPermission"),h.cc(17,"clr-icon",13),h.Vc(18),h.sc(19,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item,r=h.rc();h.Qb(1),h.yc("channelCode",n.code),h.Qb(1),h.Xc(" ",h.tc(3,8,h.tc(4,10,n.code))," "),h.Qb(4),h.yc("label",h.tc(7,12,"common.edit"))("linkTo",h.Cc(20,Be,n.id)),h.Qb(4),h.yc("disabled",r.isDefaultChannel(n.code)),h.Qb(1),h.Xc(" ",h.tc(12,14,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(16,16,h.Bc(22,qe))),h.Qb(3),h.Xc(" ",h.tc(19,18,"common.delete")," ")}}var Ke=function(){function e(t,c,n){var r=this;g(this,e),this.dataService=t,this.modalService=c,this.notificationService=n,this.refresh$=new Ee.a,this.channels$=this.refresh$.pipe(Object(_e.a)(1),Object(he.a)(function(){return r.dataService.settings.getChannels().mapStream(function(e){return e.channels})}))}return b(e,[{key:"isDefaultChannel",value:function(e){return e===X.DEFAULT_CHANNEL_CODE}},{key:"deleteChannel",value:function(e){var t=this;this.modalService.dialog({title:Object(W.a)("catalog.confirm-delete-channel"),buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.deleteChannel(e):ge.a}),Object(_.a)(function(){return t.dataService.auth.currentUser().single$}),Object(_.a)(function(e){return t.dataService.client.updateUserChannels(e.me.channels)})).subscribe(function(){t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"Channel"}),t.refresh$.next(1)},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"Channel"})})}}]),e}();Ke.\u0275fac=function(e){return new(e||Ke)(h.bc(m.s),h.bc(m.F),h.bc(m.G))},Ke.\u0275cmp=h.Vb({type:Ke,selectors:[["vdr-channel-list"]],decls:12,vars:7,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"channelCode"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,Ze,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.sc(5,"async"),h.hc(6,"vdr-dt-column"),h.Vc(7),h.sc(8,"translate"),h.gc(),h.cc(9,"vdr-dt-column"),h.cc(10,"vdr-dt-column"),h.Tc(11,He,20,23,"ng-template"),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions","SuperAdmin"),h.Qb(1),h.yc("items",h.tc(5,3,t.channels$)),h.Qb(3),h.Wc(h.tc(8,5,"common.code")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,Ge.a,pe.a,ve.a,ye.a,Ce.a,ke.a],pipes:[C.b,I.d,re.a,T.a],styles:[""],changeDetection:0});var Ye=u("itXk"),Je=u("40ut");function et(e,t){if(1&e){var c=h.ic();h.hc(0,"button",12),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function tt(e,t){if(1&e){var c=h.ic();h.hc(0,"button",12),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function ct(e,t){if(1&e&&h.Tc(0,tt,3,4,"button",13),2&e){var c=h.rc();h.yc("vdrIfPermissions",c.updatePermission)}}var nt=function(e){c(n,e);var t=r(n);function n(e,c,r,i,a,o,s){var l;return g(this,n),(l=t.call(this,c,e,r,a)).changeDetector=i,l.dataService=a,l.formBuilder=o,l.notificationService=s,l.updatePermission=[m.H.UpdateSettings,m.H.UpdateCountry],l.detailForm=l.formBuilder.group({code:["",O.C.required],name:["",O.C.required],enabled:[!0]}),l}return b(n,[{key:"ngOnInit",value:function(){this.init(),this.country$=this.entity$}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"create",value:function(){var e=this;this.detailForm.dirty&&Object(Ye.a)(this.country$,this.languageCode$).pipe(Object(E.a)(1),Object(_.a)(function(t){var c=s(t,2),n=c[0],r=c[1],i=e.detailForm.value,a=Object(m.P)({translatable:n,updatedFields:i,languageCode:r,defaultTranslation:{name:i.name,languageCode:r}});return e.dataService.settings.createCountry(a)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"Country"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createCountry.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"Country"})})}},{key:"save",value:function(){var e=this;Object(Ye.a)(this.country$,this.languageCode$).pipe(Object(E.a)(1),Object(_.a)(function(t){var c=s(t,2),n=c[0],r=c[1],i=e.detailForm.value,a=Object(m.P)({translatable:n,updatedFields:i,languageCode:r,defaultTranslation:{name:i.name,languageCode:r}});return e.dataService.settings.updateCountry(a)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Country"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"Country"})})}},{key:"setFormValues",value:function(e,t){var c=Object(m.S)(e,t);this.detailForm.patchValue({code:e.code,name:c?c.name:"",enabled:e.enabled})}}]),n}(m.l);nt.\u0275fac=function(e){return new(e||nt)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},nt.\u0275cmp=h.Vb({type:nt,selectors:[["vdr-country-detail"]],features:[h.Nb],decls:28,vars:35,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.hc(4,"vdr-language-selector",1),h.pc("languageCodeChange",function(e){return t.setLanguage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.gc(),h.gc(),h.hc(8,"vdr-ab-right"),h.cc(9,"vdr-action-bar-items",2),h.Tc(10,et,3,4,"button",3),h.sc(11,"async"),h.Tc(12,ct,1,1,"ng-template",null,4,h.Uc),h.gc(),h.gc(),h.hc(14,"form",5),h.hc(15,"vdr-form-field",6),h.sc(16,"translate"),h.cc(17,"input",7),h.sc(18,"hasPermission"),h.gc(),h.hc(19,"vdr-form-field",8),h.sc(20,"translate"),h.cc(21,"input",9),h.sc(22,"hasPermission"),h.gc(),h.hc(23,"vdr-form-field",10),h.sc(24,"translate"),h.hc(25,"clr-toggle-wrapper"),h.cc(26,"input",11),h.sc(27,"hasPermission"),h.gc(),h.gc(),h.gc()),2&e){var c=h.Ic(13);h.Qb(2),h.yc("entity",h.tc(3,13,t.entity$)),h.Qb(2),h.yc("disabled",h.tc(5,15,t.isNew$))("availableLanguageCodes",h.tc(6,17,t.availableLanguages$))("currentLanguageCode",h.tc(7,19,t.languageCode$)),h.Qb(6),h.yc("ngIf",h.tc(11,21,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(16,23,"common.code")),h.Qb(2),h.yc("readonly",!h.tc(18,25,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(20,27,"common.name")),h.Qb(2),h.yc("readonly",!h.tc(22,29,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(24,31,"common.enabled")),h.Qb(3),h.yc("vdrDisabled",!h.tc(27,33,t.updatePermission))}},directives:[U.a,U.b,Z.a,Je.a,U.c,B.a,C.o,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,S.k,O.a,S.i,Te.a,ce.a],pipes:[C.b,I.d,T.a],styles:[""]});var rt=u("vkgz"),it=u("2/wi"),at=function(){return["./create"]};function ot(e,t){1&e&&(h.hc(0,"a",5),h.cc(1,"clr-icon",6),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,at)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-country")," "))}var st=function(e){return{contents:e}},lt=function(e){return["/settings","zones",e]};function dt(e,t){if(1&e&&(h.hc(0,"a",16),h.hc(1,"vdr-chip",17),h.Vc(2),h.gc(),h.gc()),2&e){var c=t.$implicit;h.yc("routerLink",h.Cc(5,lt,h.Cc(3,st,c.id))),h.Qb(1),h.yc("colorFrom",c.name),h.Qb(1),h.Wc(c.name)}}var ut=function(e){return["./",e]},mt=function(){return["DeleteSettings","DeleteCountry"]};function ft(e,t){if(1&e){var c=h.ic();h.hc(0,"td",7),h.Vc(1),h.gc(),h.hc(2,"td",7),h.Vc(3),h.gc(),h.hc(4,"td",7),h.Tc(5,dt,3,7,"a",8),h.gc(),h.hc(6,"td",7),h.cc(7,"clr-icon"),h.gc(),h.hc(8,"td",9),h.cc(9,"vdr-table-row-action",10),h.sc(10,"translate"),h.gc(),h.hc(11,"td",9),h.hc(12,"vdr-dropdown"),h.hc(13,"button",11),h.Vc(14),h.sc(15,"translate"),h.cc(16,"clr-icon",12),h.gc(),h.hc(17,"vdr-dropdown-menu",13),h.hc(18,"button",14),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteCountry(e.id)}),h.sc(19,"hasPermission"),h.cc(20,"clr-icon",15),h.Vc(21),h.sc(22,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item;h.Qb(1),h.Wc(n.code),h.Qb(2),h.Wc(n.name),h.Qb(2),h.yc("ngForOf",n.zones),h.Qb(2),h.Tb("is-success",n.enabled),h.Rb("shape",n.enabled?"check":"times"),h.Qb(2),h.yc("label",h.tc(10,11,"common.edit"))("linkTo",h.Cc(19,ut,n.id)),h.Qb(5),h.Xc(" ",h.tc(15,13,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(19,15,h.Bc(21,mt))),h.Qb(3),h.Xc(" ",h.tc(22,17,"common.delete")," ")}}var bt=function(){return["CreateSettings","CreateCountry"]},gt=function(){function e(t,c,n){g(this,e),this.dataService=t,this.notificationService=c,this.modalService=n,this.searchTerm=new O.f(""),this.countries=[],this.destroy$=new Ee.a}return b(e,[{key:"ngOnInit",value:function(){var e=this,t=this.searchTerm.valueChanges.pipe(Object(_e.a)(null),Object(he.a)(function(t){return e.dataService.settings.getCountries(999,0,t).stream$}),Object(rt.a)(function(t){return e.countries=t.countries.items}),Object(f.a)(function(e){return e.countries.items}));this.zones$=this.dataService.settings.getZones().mapStream(function(e){return e.zones}),this.countriesWithZones$=Object(Ye.a)(t,this.zones$).pipe(Object(f.a)(function(e){var t=s(e,2),c=t[0],n=t[1];return c.map(function(e){return Object.assign(Object.assign({},e),{zones:n.filter(function(t){return!!t.members.find(function(t){return t.id===e.id})})})})}))}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"deleteCountry",value:function(e){var t=this;this.modalService.dialog({title:Object(W.a)("catalog.confirm-delete-country"),buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.deleteCountry(e):ge.a})).subscribe(function(e){e.deleteCountry.result===m.t.DELETED?(t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"Country"}),t.dataService.settings.getCountries(999,0).single$.subscribe()):t.notificationService.error(e.deleteCountry.message||"")},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"Country"})})}},{key:"isZone",value:function(e){return e.hasOwnProperty("id")}}]),e}();function ht(e,t){if(1&e){var c=h.ic();h.hc(0,"button",12),h.pc("click",function(){return h.Lc(c),h.rc().save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function pt(e,t){if(1&e&&(h.hc(0,"span",13),h.pc("click",function(){var e=t.item;return t.clear.call(null,e)}),h.Vc(1," \xd7 "),h.gc(),h.hc(2,"span",14),h.Vc(3),h.sc(4,"translate"),h.gc()),2&e){var c=t.item;h.Qb(3),h.Yc("",h.tc(4,2,"lang."+c)," (",c,")")}}function vt(e,t){if(1&e&&(h.Vc(0),h.sc(1,"translate")),2&e){var c=t.item;h.Yc(" ",h.tc(1,2,"lang."+c)," (",c,") ")}}function yt(e,t){if(1&e&&h.cc(0,"vdr-custom-field-control",18),2&e){var c=h.rc().$implicit,n=h.rc(2);h.yc("customFieldsFormGroup",n.detailForm.get("customFields"))("customField",c)}}function Ct(e,t){if(1&e&&(h.fc(0),h.Tc(1,yt,1,2,"vdr-custom-field-control",17),h.ec()),2&e){var c=t.$implicit,n=h.rc(2);h.Qb(1),h.yc("ngIf",n.customFieldIsSet(c.name))}}function kt(e,t){if(1&e&&(h.hc(0,"section",15),h.hc(1,"label"),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,Ct,2,1,"ng-container",16),h.gc()),2&e){var c=h.rc();h.Qb(2),h.Wc(h.tc(3,2,"common.custom-fields")),h.Qb(2),h.yc("ngForOf",c.customFields)}}gt.\u0275fac=function(e){return new(e||gt)(h.bc(m.s),h.bc(m.G),h.bc(m.F))},gt.\u0275cmp=h.Vb({type:gt,selectors:[["vdr-country-list"]],decls:24,vars:22,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"routerLink"],[3,"colorFrom"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"input",0),h.sc(3,"translate"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,ot,4,5,"a",2),h.gc(),h.gc(),h.hc(7,"vdr-data-table",3),h.sc(8,"async"),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column",4),h.Vc(13),h.sc(14,"translate"),h.gc(),h.hc(15,"vdr-dt-column"),h.Vc(16),h.sc(17,"translate"),h.gc(),h.hc(18,"vdr-dt-column"),h.Vc(19),h.sc(20,"translate"),h.gc(),h.cc(21,"vdr-dt-column"),h.cc(22,"vdr-dt-column"),h.Tc(23,ft,23,22,"ng-template"),h.gc()),2&e&&(h.Qb(2),h.yc("formControl",t.searchTerm)("placeholder",h.tc(3,9,"settings.search-country-by-name")),h.Qb(4),h.yc("vdrIfPermissions",h.Bc(21,bt)),h.Qb(1),h.yc("items",h.tc(8,11,t.countriesWithZones$)),h.Qb(3),h.Wc(h.tc(11,13,"common.code")),h.Qb(2),h.yc("expand",!0),h.Qb(1),h.Wc(h.tc(14,15,"common.name")),h.Qb(3),h.Wc(h.tc(17,17,"settings.zone")),h.Qb(3),h.Wc(h.tc(20,19,"common.enabled")))},directives:[U.a,U.b,k.a,O.b,O.p,O.g,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,C.n,pe.a,ve.a,ye.a,Ce.a,ke.a,it.a],pipes:[I.d,C.b,T.a],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"],changeDetection:0});var Ot=function(e){c(i,e);var n=r(i);function i(e,c,r,a,o,s,l){var d;return g(this,i),(d=n.call(this,c,e,r,o)).changeDetector=a,d.dataService=o,d.formBuilder=s,d.notificationService=l,d.languageCodes=Object.values(m.C),d.updatePermission=[m.H.UpdateSettings,m.H.UpdateGlobalSettings],d.customFields=d.getCustomFieldConfig("GlobalSettings"),d.detailForm=d.formBuilder.group({availableLanguages:[""],trackInventory:!1,outOfStockThreshold:[0,O.C.required],customFields:d.formBuilder.group(d.customFields.reduce(function(e,c){return Object.assign(Object.assign({},e),t({},c.name,""))},{}))}),d}return b(i,[{key:"ngOnInit",value:function(){var e=this;this.init(),this.dataService.client.userStatus().single$.subscribe(function(t){if(!t.userStatus.permissions.includes(m.H.UpdateSettings)){var c=e.detailForm.get("availableLanguages");c&&c.disable()}})}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"save",value:function(){var e=this;this.detailForm.dirty&&this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe(Object(rt.a)(function(t){var c=t.updateGlobalSettings;switch(c.__typename){case"GlobalSettings":e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Settings"});break;case"ChannelDefaultLanguageError":e.notificationService.error(c.message)}}),Object(he.a)(function(){return e.serverConfigService.refreshGlobalSettings()})).subscribe()}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({availableLanguages:e.availableLanguages,trackInventory:e.trackInventory,outOfStockThreshold:e.outOfStockThreshold}),this.customFields.length){var c,n=this.detailForm.get("customFields"),r=l(this.customFields);try{for(r.s();!(c=r.n()).done;){var i=c.value.name,a=e.customFields[i],o=n.get(i);o&&o.patchValue(a)}}catch(s){r.e(s)}finally{r.f()}}}}]),i}(m.l);Ot.\u0275fac=function(e){return new(e||Ot)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},Ot.\u0275cmp=h.Vb({type:Ot,selectors:[["vdr-global-settings"]],features:[h.Nb],decls:22,vars:27,consts:[["locationId","global-settings-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","availableLanguages",3,"label"],["multiple","true","appendTo","body","formControlName","availableLanguages",3,"items","addTag","hideSelected"],["ng-label-tmp",""],["ng-option-tmp",""],["for","outOfStockThreshold",3,"label","tooltip"],["id","outOfStockThreshold","type","number","formControlName","outOfStockThreshold",3,"readonly"],["for","enabled",3,"label","tooltip"],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","GlobalSettings",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","GlobalSettings",3,"customFieldsFormGroup","customField"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,ht,3,4,"button",1),h.gc(),h.gc(),h.hc(4,"form",2),h.hc(5,"vdr-form-field",3),h.sc(6,"translate"),h.hc(7,"ng-select",4),h.Tc(8,pt,5,4,"ng-template",5),h.Tc(9,vt,2,4,"ng-template",6),h.gc(),h.gc(),h.hc(10,"vdr-form-field",7),h.sc(11,"translate"),h.sc(12,"translate"),h.cc(13,"input",8),h.sc(14,"hasPermission"),h.gc(),h.hc(15,"vdr-form-field",9),h.sc(16,"translate"),h.sc(17,"translate"),h.hc(18,"clr-toggle-wrapper"),h.cc(19,"input",10),h.sc(20,"hasPermission"),h.gc(),h.gc(),h.Tc(21,kt,5,4,"section",11),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions",t.updatePermission),h.Qb(1),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(6,13,"common.available-languages")),h.Qb(2),h.yc("items",t.languageCodes)("addTag",!1)("hideSelected",!0),h.Qb(3),h.yc("label",h.tc(11,15,"settings.global-out-of-stock-threshold"))("tooltip",h.tc(12,17,"settings.global-out-of-stock-threshold-tooltip")),h.Qb(3),h.yc("readonly",!h.tc(14,19,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(16,21,"settings.track-inventory-default"))("tooltip",h.tc(17,23,"catalog.track-inventory-tooltip")),h.Qb(4),h.yc("vdrDisabled",!h.tc(20,25,t.updatePermission)),h.Qb(2),h.yc("ngIf",t.customFields.length))},directives:[U.a,U.c,B.a,ce.a,O.E,O.q,O.j,q.a,H.a,O.p,O.h,H.e,H.d,k.a,O.v,O.b,S.k,O.a,S.i,Te.a,C.o,O.k,S.u,C.n,ne.a],pipes:[I.d,T.a],styles:["ng-select .ng-arrow-wrapper .ng-arrow,   ng-select .ng-select-container>span,   ng-select .ng-value>span{margin:0!important}"],changeDetection:0});var Qt=u("Mb15"),Ft=u("6y1o"),St=u("7xiD");function It(e,t){if(1&e){var c=h.ic();h.hc(0,"button",5),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",n.detailForm.pristine||n.detailForm.invalid),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function Tt(e,t){if(1&e){var c=h.ic();h.hc(0,"button",5),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",n.detailForm.pristine||n.detailForm.invalid||!n.selectedHandler),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function Pt(e,t){if(1&e&&h.Tc(0,Tt,3,4,"button",6),2&e){var c=h.rc();h.yc("vdrIfPermissions",c.updatePermission)}}function jt(e,t){if(1&e){var c=h.ic();h.hc(0,"vdr-configurable-input",21),h.pc("remove",function(){return h.Lc(c),h.rc(2).removeChecker()}),h.sc(1,"hasPermission"),h.gc()}if(2&e){var n=h.rc(2);h.yc("operation",n.selectedChecker)("operationDefinition",n.selectedCheckerDefinition)("readonly",!h.tc(1,3,n.updatePermission))}}function Dt(e,t){if(1&e){var c=h.ic();h.hc(0,"button",26),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc(3).selectChecker(e)}),h.Vc(1),h.gc()}if(2&e){var n=t.$implicit;h.Qb(1),h.Xc(" ",n.description," ")}}function Vt(e,t){if(1&e&&(h.hc(0,"div"),h.hc(1,"vdr-dropdown"),h.hc(2,"button",22),h.cc(3,"clr-icon",23),h.Vc(4),h.sc(5,"translate"),h.gc(),h.hc(6,"vdr-dropdown-menu",24),h.Tc(7,Dt,2,1,"button",25),h.gc(),h.gc(),h.gc()),2&e){var c=h.rc(2);h.Qb(4),h.Xc(" ",h.tc(5,2,"common.select")," "),h.Qb(3),h.yc("ngForOf",c.checkers)}}function wt(e,t){if(1&e){var c=h.ic();h.hc(0,"vdr-configurable-input",27),h.pc("remove",function(){return h.Lc(c),h.rc(2).removeHandler()}),h.sc(1,"hasPermission"),h.gc()}if(2&e){var n=h.rc(2);h.yc("operation",n.selectedHandler)("operationDefinition",n.selectedHandlerDefinition)("readonly",!h.tc(1,3,n.updatePermission))}}function xt(e,t){if(1&e){var c=h.ic();h.hc(0,"button",26),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc(3).selectHandler(e)}),h.Vc(1),h.gc()}if(2&e){var n=t.$implicit;h.Qb(1),h.Xc(" ",n.description," ")}}function Lt(e,t){if(1&e&&(h.hc(0,"div"),h.hc(1,"vdr-dropdown"),h.hc(2,"button",22),h.cc(3,"clr-icon",23),h.Vc(4),h.sc(5,"translate"),h.gc(),h.hc(6,"vdr-dropdown-menu",24),h.Tc(7,xt,2,1,"button",25),h.gc(),h.gc(),h.gc()),2&e){var c=h.rc(2);h.Qb(4),h.Xc(" ",h.tc(5,2,"common.select")," "),h.Qb(3),h.yc("ngForOf",c.handlers)}}function Mt(e,t){if(1&e){var c=h.ic();h.hc(0,"form",7),h.hc(1,"vdr-form-field",8),h.sc(2,"translate"),h.hc(3,"input",9),h.pc("input",function(e){h.Lc(c);var n=t.ngIf;return h.rc().updateCode(n.code,e.target.value)}),h.sc(4,"hasPermission"),h.gc(),h.gc(),h.hc(5,"vdr-form-field",10),h.sc(6,"translate"),h.sc(7,"hasPermission"),h.cc(8,"input",11),h.sc(9,"hasPermission"),h.gc(),h.cc(10,"vdr-rich-text-editor",12),h.sc(11,"hasPermission"),h.sc(12,"translate"),h.hc(13,"vdr-form-field",13),h.sc(14,"translate"),h.hc(15,"clr-toggle-wrapper"),h.cc(16,"input",14),h.sc(17,"hasPermission"),h.gc(),h.gc(),h.hc(18,"div",15),h.hc(19,"div",16),h.hc(20,"label",17),h.Vc(21),h.sc(22,"translate"),h.gc(),h.Tc(23,jt,2,5,"vdr-configurable-input",18),h.Tc(24,Vt,8,4,"div",19),h.gc(),h.hc(25,"div",16),h.hc(26,"label",17),h.Vc(27),h.sc(28,"translate"),h.gc(),h.Tc(29,wt,2,5,"vdr-configurable-input",20),h.Tc(30,Lt,8,4,"div",19),h.gc(),h.gc(),h.gc()}if(2&e){var n=h.rc();h.yc("formGroup",n.detailForm),h.Qb(1),h.yc("label",h.tc(2,16,"common.name")),h.Qb(2),h.yc("readonly",!h.tc(4,18,n.updatePermission)),h.Qb(2),h.yc("label",h.tc(6,20,"common.code"))("readOnlyToggle",h.tc(7,22,n.updatePermission)),h.Qb(3),h.yc("readonly",!h.tc(9,24,n.updatePermission)),h.Qb(2),h.yc("readonly",!h.tc(11,26,n.updatePermission))("label",h.tc(12,28,"common.description")),h.Qb(3),h.yc("label",h.tc(14,30,"common.enabled")),h.Qb(3),h.yc("vdrDisabled",!h.tc(17,32,n.updatePermission)),h.Qb(5),h.Wc(h.tc(22,34,"settings.payment-eligibility-checker")),h.Qb(2),h.yc("ngIf",n.selectedChecker&&n.selectedCheckerDefinition),h.Qb(1),h.yc("ngIf",!n.selectedChecker||!n.selectedCheckerDefinition),h.Qb(3),h.Wc(h.tc(28,36,"settings.payment-handler")),h.Qb(2),h.yc("ngIf",n.selectedHandler&&n.selectedHandlerDefinition),h.Qb(1),h.yc("ngIf",!n.selectedHandler||!n.selectedHandlerDefinition)}}var At=function(e){c(n,e);var t=r(n);function n(e,c,r,i,a,o,s){var l;return g(this,n),(l=t.call(this,c,e,r,a)).changeDetector=i,l.dataService=a,l.formBuilder=o,l.notificationService=s,l.checkers=[],l.handlers=[],l.updatePermission=[m.H.UpdateSettings,m.H.UpdatePaymentMethod],l.detailForm=l.formBuilder.group({code:["",O.C.required],name:["",O.C.required],description:"",enabled:[!0,O.C.required],checker:{},handler:{}}),l}return b(n,[{key:"ngOnInit",value:function(){var e=this;this.init(),Object(Ye.a)([this.dataService.settings.getPaymentMethodOperations().single$,this.entity$.pipe(Object(E.a)(1))]).subscribe(function(t){var c=s(t,2),n=c[0],r=c[1];e.checkers=n.paymentMethodEligibilityCheckers,e.handlers=n.paymentMethodHandlers,e.changeDetector.markForCheck(),e.selectedCheckerDefinition=n.paymentMethodEligibilityCheckers.find(function(e){return e.code===(r.checker&&r.checker.code)}),e.selectedHandlerDefinition=n.paymentMethodHandlers.find(function(e){return e.code===(r.handler&&r.handler.code)})})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e,t){if(!e){var c=this.detailForm.get(["code"]);c&&c.pristine&&c.setValue(Object(Qt.normalizeString)(t,"-"))}}},{key:"configArgsIsPopulated",value:function(){var e=this.detailForm.get("configArgs");return!!e&&0<Object.keys(e.controls).length}},{key:"selectChecker",value:function(e){this.selectedCheckerDefinition=e,this.selectedChecker=Object(m.M)(e);var t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}},{key:"selectHandler",value:function(e){this.selectedHandlerDefinition=e,this.selectedHandler=Object(m.M)(e);var t=this.detailForm.get("handler");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedHandler)),this.detailForm.markAsDirty()}},{key:"removeChecker",value:function(){this.selectedChecker=null,this.detailForm.markAsDirty()}},{key:"removeHandler",value:function(){this.selectedHandler=null,this.detailForm.markAsDirty()}},{key:"create",value:function(){var e=this,t=this.selectedChecker,c=this.selectedHandler;c&&this.entity$.pipe(Object(E.a)(1),Object(_.a)(function(n){n.id;var r=e.detailForm.value,i={name:r.name,code:r.code,description:r.description,enabled:r.enabled,checker:t?Object(m.Z)(t,r.checker):null,handler:Object(m.Z)(c,r.handler)};return e.dataService.settings.createPaymentMethod(i)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"PaymentMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createPaymentMethod.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"PaymentMethod"})})}},{key:"save",value:function(){var e=this,t=this.selectedChecker,c=this.selectedHandler;c&&this.entity$.pipe(Object(E.a)(1),Object(_.a)(function(n){var r=n.id,i=e.detailForm.value,a={id:r,name:i.name,code:i.code,description:i.description,enabled:i.enabled,checker:t?Object(m.Z)(t,i.checker):null,handler:Object(m.Z)(c,i.handler)};return e.dataService.settings.updatePaymentMethod(a)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"PaymentMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"PaymentMethod"})})}},{key:"setFormValues",value:function(e){this.detailForm.patchValue({name:e.name,code:e.code,description:e.description,enabled:e.enabled,checker:e.checker||{},handler:e.handler||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(function(e){return Object.assign(Object.assign({},e),{value:Object(m.V)(e.value)})})}),this.selectedHandler||(this.selectedHandler=e.handler&&{code:e.handler.code,args:e.handler.args.map(function(e){return Object.assign(Object.assign({},e),{value:Object(m.V)(e.value)})})})}}]),n}(m.l);At.\u0275fac=function(e){return new(e||At)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},At.\u0275cmp=h.Vb({type:At,selectors:[["vdr-payment-method-detail"]],features:[h.Nb],decls:12,vars:10,consts:[[3,"entity"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,It,3,4,"button",2),h.sc(7,"async"),h.Tc(8,Pt,1,1,"ng-template",null,3,h.Uc),h.gc(),h.gc(),h.Tc(10,Mt,31,38,"form",4),h.sc(11,"async")),2&e){var c=h.Ic(9);h.Qb(2),h.yc("entity",h.tc(3,4,t.entity$)),h.Qb(4),h.yc("ngIf",h.tc(7,6,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("ngIf",h.tc(11,8,t.entity$))}},directives:[U.a,U.b,Z.a,U.c,B.a,C.o,ce.a,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,Ft.a,S.k,O.a,S.i,Te.a,S.u,St.a,ve.a,ye.a,S.o,Ce.a,C.n,ke.a],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var $t=function(){return["./create"]};function Nt(e,t){1&e&&(h.hc(0,"a",3),h.cc(1,"clr-icon",4),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,$t)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-payment-method")," "))}var Rt=function(e){return["./",e]},zt=function(){return["DeleteSettings","DeletePaymentMethod"]};function Wt(e,t){if(1&e){var c=h.ic();h.hc(0,"td",5),h.Vc(1),h.gc(),h.hc(2,"td",5),h.Vc(3),h.gc(),h.hc(4,"td",6),h.cc(5,"vdr-table-row-action",7),h.sc(6,"translate"),h.gc(),h.hc(7,"td",6),h.hc(8,"vdr-dropdown"),h.hc(9,"button",8),h.Vc(10),h.sc(11,"translate"),h.cc(12,"clr-icon",9),h.gc(),h.hc(13,"vdr-dropdown-menu",10),h.hc(14,"button",11),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deletePaymentMethod(e.id)}),h.sc(15,"hasPermission"),h.cc(16,"clr-icon",12),h.Vc(17),h.sc(18,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item;h.Qb(1),h.Wc(n.code),h.Qb(2),h.Wc(n.enabled),h.Qb(2),h.yc("label",h.tc(6,7,"common.edit"))("linkTo",h.Cc(15,Rt,n.id)),h.Qb(5),h.Xc(" ",h.tc(11,9,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(15,11,h.Bc(17,zt))),h.Qb(3),h.Xc(" ",h.tc(18,13,"common.delete")," ")}}var Xt=function(){return["CreateSettings","CreatePaymentMethod"]},Et=function(t){c(i,t);var n=r(i);function i(t,c,r,s,l){var d,u;return g(this,i),(u=n.call(this,c,r)).dataService=t,u.modalService=s,u.notificationService=l,e((d=a(u),o(i.prototype)),"setQueryFn",d).call(d,function(){var e;return(e=u.dataService.settings).getPaymentMethods.apply(e,arguments).refetchOnChannelChange()},function(e){return e.paymentMethods}),u}return b(i,[{key:"deletePaymentMethod",value:function(e){var t=this;this.showModalAndDelete(e).pipe(Object(he.a)(function(c){return c.result===m.t.DELETED?[!0]:t.showModalAndDelete(e,c.message||"").pipe(Object(f.a)(function(e){return e.result===m.t.DELETED}))}),Object(he.a)(function(){return t.dataService.settings.getPaymentMethods(100).single$})).subscribe(function(){t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"PaymentMethod"}),t.refresh()},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"PaymentMethod"})})}},{key:"showModalAndDelete",value:function(e,t){var c=this;return this.modalService.dialog({title:Object(W.a)("settings.confirm-delete-payment-method"),body:t,buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(n){return n?c.dataService.settings.deletePaymentMethod(e,!!t):ge.a}),Object(f.a)(function(e){return e.deletePaymentMethod}))}}]),i}(m.n);function _t(e,t){1&e&&(h.hc(0,"vdr-form-field",14),h.sc(1,"translate"),h.cc(2,"input",12),h.gc()),2&e&&h.yc("label",h.tc(1,1,"settings.password"))}function Gt(e,t){if(1&e&&h.cc(0,"vdr-custom-field-control",18),2&e){var c=h.rc().$implicit,n=h.rc(2);h.yc("customFieldsFormGroup",n.detailForm.get("customFields"))("customField",c)}}function Ut(e,t){if(1&e&&(h.fc(0),h.Tc(1,Gt,1,2,"vdr-custom-field-control",17),h.ec()),2&e){var c=t.$implicit,n=h.rc(2);h.Qb(1),h.yc("ngIf",n.customFieldIsSet(c.name))}}function Zt(e,t){if(1&e&&(h.hc(0,"section",15),h.hc(1,"label"),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,Ut,2,1,"ng-container",16),h.gc()),2&e){var c=h.rc();h.Qb(2),h.Wc(h.tc(3,2,"common.custom-fields")),h.Qb(2),h.yc("ngForOf",c.customFields)}}Et.\u0275fac=function(e){return new(e||Et)(h.bc(m.s),h.bc(G.e),h.bc(G.a),h.bc(m.F),h.bc(m.G))},Et.\u0275cmp=h.Vb({type:Et,selectors:[["vdr-payment-method-list"]],features:[h.Nb],decls:18,vars:20,consts:[["locationId","payment-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,Nt,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.pc("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.sc(8,"async"),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.cc(15,"vdr-dt-column"),h.cc(16,"vdr-dt-column"),h.Tc(17,Wt,19,18,"ng-template"),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions",h.Bc(19,Xt)),h.Qb(1),h.yc("items",h.tc(5,7,t.items$))("itemsPerPage",h.tc(6,9,t.itemsPerPage$))("totalItems",h.tc(7,11,t.totalItems$))("currentPage",h.tc(8,13,t.currentPage$)),h.Qb(6),h.Wc(h.tc(11,15,"common.code")),h.Qb(3),h.Wc(h.tc(14,17,"common.enabled")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,pe.a,ve.a,ye.a,Ce.a,ke.a],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var Bt=function(e){c(i,e);var n=r(i);function i(e,c,r,a,o,s,l){var d;return g(this,i),(d=n.call(this,c,e,r,o)).changeDetector=a,d.dataService=o,d.formBuilder=s,d.notificationService=l,d.customFields=d.getCustomFieldConfig("Administrator"),d.detailForm=d.formBuilder.group({emailAddress:["",O.C.required],firstName:["",O.C.required],lastName:["",O.C.required],password:[""],customFields:d.formBuilder.group(d.customFields.reduce(function(e,c){return Object.assign(Object.assign({},e),t({},c.name,""))},{}))}),d}return b(i,[{key:"ngOnInit",value:function(){this.init()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"save",value:function(){var e=this;this.entity$.pipe(Object(E.a)(1),Object(_.a)(function(t){t.id;var c=e.detailForm.value,n={emailAddress:c.emailAddress,firstName:c.firstName,lastName:c.lastName,password:c.password,customFields:c.customFields};return e.dataService.administrator.updateActiveAdministrator(n)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Administrator"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"Administrator"})})}},{key:"setFormValues",value:function(e,t){if(this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName}),this.customFields.length){var c,n=this.detailForm.get("customFields"),r=l(this.customFields);try{for(r.s();!(c=r.n()).done;){var i=c.value.name,a=e.customFields[i],o=n.get(i);o&&o.patchValue(a)}}catch(s){r.e(s)}finally{r.f()}}}}]),i}(m.l);Bt.\u0275fac=function(e){return new(e||Bt)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},Bt.\u0275cmp=h.Vb({type:Bt,selectors:[["vdr-profile"]],features:[h.Nb],decls:25,vars:25,consts:[[3,"entity"],["locationId","administrator-detail"],[1,"btn","btn-primary",3,"disabled","click"],[1,"form",3,"formGroup"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle"],["id","password","type","password","formControlName","password"],["formGroupName","customFields",4,"ngIf"],["for","password",3,"label"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Administrator",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Administrator",3,"customFieldsFormGroup","customField"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.hc(6,"button",2),h.pc("click",function(){return t.save()}),h.Vc(7),h.sc(8,"translate"),h.gc(),h.gc(),h.gc(),h.hc(9,"form",3),h.hc(10,"vdr-form-field",4),h.sc(11,"translate"),h.cc(12,"input",5),h.gc(),h.hc(13,"vdr-form-field",6),h.sc(14,"translate"),h.cc(15,"input",7),h.gc(),h.hc(16,"vdr-form-field",8),h.sc(17,"translate"),h.cc(18,"input",9),h.gc(),h.Tc(19,_t,3,3,"vdr-form-field",10),h.sc(20,"async"),h.hc(21,"vdr-form-field",11),h.sc(22,"translate"),h.cc(23,"input",12),h.gc(),h.Tc(24,Zt,5,4,"section",13),h.gc()),2&e&&(h.Qb(2),h.yc("entity",h.tc(3,11,t.entity$)),h.Qb(4),h.yc("disabled",t.detailForm.invalid||t.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(8,13,"common.update")," "),h.Qb(2),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(11,15,"settings.email-address")),h.Qb(3),h.yc("label",h.tc(14,17,"settings.first-name")),h.Qb(3),h.yc("label",h.tc(17,19,"settings.last-name")),h.Qb(3),h.yc("ngIf",h.tc(20,21,t.isNew$)),h.Qb(2),h.yc("label",h.tc(22,23,"settings.password"))("readOnlyToggle",!0),h.Qb(3),h.yc("ngIf",t.customFields.length))},directives:[U.a,U.b,Z.a,U.c,B.a,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,C.o,O.k,S.u,C.n,ne.a],pipes:[C.b,I.d],styles:[""],changeDetection:0});var qt=u("jEaP"),Ht=u("39yD");function Kt(e,t){if(1&e){var c=h.ic();h.hc(0,"button",12),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function Yt(e,t){if(1&e){var c=h.ic();h.hc(0,"button",12),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",n.detailForm.invalid||n.detailForm.pristine),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function Jt(e,t){1&e&&h.Tc(0,Yt,3,4,"button",13),2&e&&h.yc("vdrIfPermissions","UpdateAdministrator")}var ec=function(e){c(n,e);var t=r(n);function n(e,c,r,i,a,o,s){var l;return g(this,n),(l=t.call(this,c,e,r,a)).changeDetector=i,l.dataService=a,l.formBuilder=o,l.notificationService=s,l.detailForm=l.formBuilder.group({code:["",O.C.required],description:["",O.C.required],channelIds:[],permissions:[]}),l}return b(n,[{key:"ngOnInit",value:function(){this.init(),this.role$=this.entity$,this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"updateCode",value:function(e){var t=this.detailForm.get(["code"]);t&&t.pristine&&t.setValue(Object(Qt.normalizeString)(e,"-"))}},{key:"setPermission",value:function(e){var t=this.detailForm.get("permissions");if(t){var c=t.value,n=!0===e.value?Object(qt.unique)([].concat(d(c),[e.permission])):c.filter(function(t){return t!==e.permission});t.setValue(n),t.markAsDirty()}}},{key:"create",value:function(){var e=this,t=this.detailForm.value;this.dataService.administrator.createRole(t).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"Role"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createRole.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"Role"})})}},{key:"save",value:function(){var e=this;this.role$.pipe(Object(E.a)(1),Object(_.a)(function(t){var c=t.id,n=e.detailForm.value,r=Object.assign({id:c},n);return e.dataService.administrator.updateRole(r)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Role"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"Role"})})}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({description:e.description,code:e.code,channelIds:e.channels.map(function(e){return e.id}),permissions:e.permissions}),this.changeDetector.detectChanges()}}]),n}(m.l);ec.\u0275fac=function(e){return new(e||ec)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},ec.\u0275cmp=h.Vb({type:ec,selectors:[["vdr-role-detail"]],features:[h.Nb],decls:29,vars:37,consts:[[3,"entity"],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[3,"permissionDefinitions","activePermissions","readonly","permissionChange"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,Kt,3,4,"button",2),h.sc(7,"async"),h.Tc(8,Jt,1,1,"ng-template",null,3,h.Uc),h.gc(),h.gc(),h.hc(10,"form",4),h.hc(11,"vdr-form-field",5),h.sc(12,"translate"),h.hc(13,"input",6),h.pc("input",function(e){return t.updateCode(e.target.value)}),h.sc(14,"hasPermission"),h.gc(),h.gc(),h.hc(15,"vdr-form-field",7),h.sc(16,"translate"),h.sc(17,"hasPermission"),h.cc(18,"input",8),h.sc(19,"hasPermission"),h.gc(),h.hc(20,"vdr-form-field",9),h.sc(21,"translate"),h.cc(22,"vdr-channel-assignment-control",10),h.sc(23,"hasPermission"),h.gc(),h.hc(24,"label"),h.Vc(25),h.sc(26,"translate"),h.gc(),h.hc(27,"vdr-permission-grid",11),h.pc("permissionChange",function(e){return t.setPermission(e)}),h.sc(28,"hasPermission"),h.gc(),h.gc()),2&e){var c,n=h.Ic(9);h.Qb(2),h.yc("entity",h.tc(3,15,t.entity$)),h.Qb(4),h.yc("ngIf",h.tc(7,17,t.isNew$))("ngIfElse",n),h.Qb(4),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(12,19,"common.description")),h.Qb(2),h.yc("readonly",!h.tc(14,21,"UpdateAdministrator")),h.Qb(2),h.yc("label",h.tc(16,23,"common.code"))("readOnlyToggle",h.tc(17,25,"UpdateAdministrator")),h.Qb(3),h.yc("readonly",!h.tc(19,27,"UpdateAdministrator")),h.Qb(2),h.yc("label",h.tc(21,29,"settings.channel")),h.Qb(2),h.yc("vdrDisabled",!h.tc(23,31,"UpdateAdministrator")),h.Qb(3),h.Wc(h.tc(26,33,"settings.permissions")),h.Qb(2),h.yc("permissionDefinitions",t.permissionDefinitions)("activePermissions",null==(c=t.detailForm.get("permissions"))?null:c.value)("readonly",!h.tc(28,35,"UpdateAdministrator"))}},directives:[U.a,U.b,Z.a,U.c,B.a,C.o,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,Ht.a,Te.a,S.u,te,ce.a],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var tc=function(){return["./create"]};function cc(e,t){1&e&&(h.hc(0,"a",3),h.cc(1,"clr-icon",4),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,tc)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-role")," "))}function nc(e,t){if(1&e&&(h.hc(0,"span"),h.Vc(1),h.gc()),2&e){var c=h.rc().item;h.Qb(1),h.Wc(c.code)}}function rc(e,t){if(1&e&&(h.hc(0,"vdr-chip"),h.cc(1,"vdr-channel-badge",17),h.Vc(2),h.sc(3,"translate"),h.sc(4,"channelCodeToLabel"),h.gc()),2&e){var c=t.$implicit;h.Qb(1),h.yc("channelCode",c.code),h.Qb(1),h.Xc(" ",h.tc(3,2,h.tc(4,4,c.code))," ")}}function ic(e,t){if(1&e&&(h.fc(0),h.Tc(1,rc,5,6,"vdr-chip",16),h.ec()),2&e){var c=h.rc().item;h.Qb(1),h.yc("ngForOf",c.channels)}}function ac(e,t){if(1&e&&(h.hc(0,"vdr-chip"),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.Qb(1),h.Wc(c)}}function oc(e,t){if(1&e&&(h.fc(0),h.cc(1,"clr-icon",4),h.Vc(2),h.ec()),2&e){var c=h.rc(3).item,n=h.rc();h.Qb(2),h.Xc(" ",c.permissions.length-n.initialLimit," ")}}function sc(e,t){1&e&&h.cc(0,"clr-icon",21)}function lc(e,t){if(1&e){var c=h.ic();h.hc(0,"button",19),h.pc("click",function(){h.Lc(c);var e=h.rc(2).item;return h.rc().toggleDisplayLimit(e)}),h.Tc(1,oc,3,1,"ng-container",7),h.Tc(2,sc,1,0,"ng-template",null,20,h.Uc),h.gc()}if(2&e){var n=h.Ic(3),r=h.rc(2).item,i=h.rc();h.Qb(1),h.yc("ngIf",(i.displayLimit[r.id]||0)<r.permissions.length)("ngIfElse",n)}}function dc(e,t){if(1&e&&(h.fc(0),h.Tc(1,ac,2,1,"vdr-chip",16),h.sc(2,"slice"),h.Tc(3,lc,4,2,"button",18),h.ec()),2&e){var c=h.rc().item,n=h.rc();h.Qb(1),h.yc("ngForOf",h.vc(2,2,c.permissions,0,n.displayLimit[c.id]||3)),h.Qb(2),h.yc("ngIf",c.permissions.length>n.initialLimit)}}function uc(e,t){1&e&&(h.hc(0,"span",22),h.Vc(1),h.sc(2,"translate"),h.gc()),2&e&&(h.Qb(1),h.Wc(h.tc(2,1,"settings.default-role-label")))}var mc=function(e){return["./",e]};function fc(e,t){if(1&e&&(h.cc(0,"vdr-table-row-action",23),h.sc(1,"translate")),2&e){var c=h.rc().item;h.yc("label",h.tc(1,2,"common.edit"))("linkTo",h.Cc(4,mc,c.id))}}function bc(e,t){if(1&e){var c=h.ic();h.hc(0,"td",5),h.Vc(1),h.gc(),h.hc(2,"td",5),h.Tc(3,nc,2,1,"span",6),h.gc(),h.hc(4,"td",5),h.Tc(5,ic,2,1,"ng-container",6),h.gc(),h.hc(6,"td",5),h.Tc(7,dc,4,6,"ng-container",7),h.Tc(8,uc,3,3,"ng-template",null,8,h.Uc),h.gc(),h.hc(10,"td",9),h.Tc(11,fc,2,6,"vdr-table-row-action",10),h.gc(),h.hc(12,"td",9),h.hc(13,"vdr-dropdown"),h.hc(14,"button",11),h.Vc(15),h.sc(16,"translate"),h.cc(17,"clr-icon",12),h.gc(),h.hc(18,"vdr-dropdown-menu",13),h.hc(19,"button",14),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteRole(e.id)}),h.sc(20,"hasPermission"),h.cc(21,"clr-icon",15),h.Vc(22),h.sc(23,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item,r=h.Ic(9),i=h.rc();h.Qb(1),h.Wc(n.description),h.Qb(2),h.yc("ngIf",!i.isDefaultRole(n)),h.Qb(2),h.yc("ngIf",!i.isDefaultRole(n)),h.Qb(2),h.yc("ngIf",!i.isDefaultRole(n))("ngIfElse",r),h.Qb(4),h.yc("ngIf",!i.isDefaultRole(n)),h.Qb(3),h.yc("disabled",i.isDefaultRole(n)),h.Qb(1),h.Xc(" ",h.tc(16,10,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(20,12,"SuperAdmin")),h.Qb(3),h.Xc(" ",h.tc(23,14,"common.delete")," ")}}var gc=function(t){c(i,t);var n=r(i);function i(t,c,r,s,l){var d,u;return g(this,i),(u=n.call(this,s,l)).modalService=t,u.notificationService=c,u.dataService=r,u.initialLimit=3,u.displayLimit={},e((d=a(u),o(i.prototype)),"setQueryFn",d).call(d,function(){var e;return(e=u.dataService.administrator).getRoles.apply(e,arguments)},function(e){return e.roles}),u}return b(i,[{key:"ngOnInit",value:function(){e(o(i.prototype),"ngOnInit",this).call(this),this.visibleRoles$=this.items$.pipe(Object(f.a)(function(e){return e.filter(function(e){return e.code!==X.CUSTOMER_ROLE_CODE})}))}},{key:"toggleDisplayLimit",value:function(e){this.displayLimit[e.id]===e.permissions.length?this.displayLimit[e.id]=this.initialLimit:this.displayLimit[e.id]=e.permissions.length}},{key:"isDefaultRole",value:function(e){return e.code===X.SUPER_ADMIN_ROLE_CODE||e.code===X.CUSTOMER_ROLE_CODE}},{key:"deleteRole",value:function(e){var t=this;this.modalService.dialog({title:Object(W.a)("settings.confirm-delete-role"),buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.administrator.deleteRole(e):ge.a})).subscribe(function(){t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"Role"}),t.refresh()},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"Role"})})}}]),i}(m.n);gc.\u0275fac=function(e){return new(e||gc)(h.bc(m.F),h.bc(m.G),h.bc(m.s),h.bc(G.e),h.bc(G.a))},gc.\u0275cmp=h.Vb({type:gc,selectors:[["vdr-role-list"]],features:[h.Nb],decls:24,vars:25,consts:[["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultRole",""],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo",4,"ngIf"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm",3,"disabled"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[4,"ngFor","ngForOf"],[3,"channelCode"],["class","btn btn-sm btn-secondary btn-icon",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-secondary","btn-icon",3,"click"],["collapse",""],["shape","minus"],[1,"default-role-label"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,cc,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.pc("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.sc(8,"async"),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.hc(15,"vdr-dt-column"),h.Vc(16),h.sc(17,"translate"),h.gc(),h.hc(18,"vdr-dt-column"),h.Vc(19),h.sc(20,"translate"),h.gc(),h.cc(21,"vdr-dt-column"),h.cc(22,"vdr-dt-column"),h.Tc(23,bc,24,16,"ng-template"),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions","CreateAdministrator"),h.Qb(1),h.yc("items",h.tc(5,9,t.visibleRoles$))("itemsPerPage",h.tc(6,11,t.itemsPerPage$))("totalItems",h.tc(7,13,t.totalItems$))("currentPage",h.tc(8,15,t.currentPage$)),h.Qb(6),h.Wc(h.tc(11,17,"common.description")),h.Qb(3),h.Wc(h.tc(14,19,"common.code")),h.Qb(3),h.Wc(h.tc(17,21,"settings.channel")),h.Qb(3),h.Wc(h.tc(20,23,"settings.permissions")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,C.o,ve.a,ye.a,Ce.a,ke.a,C.n,it.a,Ge.a,pe.a],pipes:[C.b,I.d,T.a,re.a,C.x],styles:[".default-role-label[_ngcontent-%COMP%]{color:var(--color-grey-400)}"],changeDetection:0});var hc=u("0MpJ"),pc=u("2zLM"),vc=u("ZFbG");function yc(e,t){if(1&e&&h.cc(0,"vdr-object-tree",11),2&e){var c=h.rc().$implicit;h.yc("value",c.metadata)}}function Cc(e,t){if(1&e&&(h.hc(0,"div",6),h.hc(1,"div",7),h.hc(2,"vdr-labeled-data",8),h.sc(3,"translate"),h.Vc(4),h.gc(),h.hc(5,"div",9),h.hc(6,"vdr-labeled-data",8),h.sc(7,"translate"),h.Vc(8),h.sc(9,"localeCurrency"),h.gc(),h.hc(10,"vdr-labeled-data",8),h.sc(11,"translate"),h.Vc(12),h.sc(13,"localeCurrency"),h.gc(),h.gc(),h.Tc(14,yc,1,1,"vdr-object-tree",10),h.gc(),h.gc()),2&e){var c=t.$implicit,n=h.rc();h.Qb(1),h.Tb("stale",n.testDataUpdated),h.Qb(1),h.yc("label",h.tc(3,9,"settings.shipping-method")),h.Qb(2),h.Xc(" ",c.name," "),h.Qb(2),h.yc("label",h.tc(7,11,"common.price")),h.Qb(2),h.Xc(" ",h.uc(9,13,c.price,n.currencyCode)," "),h.Qb(2),h.yc("label",h.tc(11,16,"common.price-with-tax")),h.Qb(2),h.Xc(" ",h.uc(13,18,c.priceWithTax,n.currencyCode)," "),h.Qb(2),h.yc("ngIf",c.metadata)}}function kc(e,t){1&e&&(h.hc(0,"div",6),h.cc(1,"clr-icon",12),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.Qb(2),h.Xc(" ",h.tc(3,1,"settings.no-eligible-shipping-methods")," "))}var Oc=function e(){g(this,e),this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new h.t};Oc.\u0275fac=function(e){return new(e||Oc)},Oc.\u0275cmp=h.Vb({type:Oc,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{testResult:"testResult",okToRun:"okToRun",testDataUpdated:"testDataUpdated",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:10,vars:9,consts:[[1,"test-result","card"],[1,"card-header"],["class","card-block",4,"ngFor","ngForOf"],["class","card-block",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(e,t){1&e&&(h.hc(0,"div",0),h.hc(1,"div",1),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,Cc,15,21,"div",2),h.Tc(5,kc,4,3,"div",3),h.hc(6,"div",4),h.hc(7,"button",5),h.pc("click",function(){return t.runTest.emit()}),h.Vc(8),h.sc(9,"translate"),h.gc(),h.gc(),h.gc()),2&e&&(h.Qb(2),h.Xc(" ",h.tc(3,5,"settings.test-result")," "),h.Qb(2),h.yc("ngForOf",t.testResult),h.Qb(1),h.yc("ngIf",0===(null==t.testResult?null:t.testResult.length)),h.Qb(2),h.yc("disabled",!t.okToRun),h.Qb(1),h.Xc(" ",h.tc(9,7,"settings.test-shipping-methods")," "))},directives:[C.n,C.o,hc.a,pc.a,S.o],pipes:[I.d,vc.a],styles:[".result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:24px}clr-icon.error[_ngcontent-%COMP%]{color:var(--color-error-500)}"],changeDetection:0});var Qc=u("LRne"),Fc=u("VRyK"),Sc=u("1G5W"),Ic=u("c+KD"),Tc=u("cH1L");function Pc(e,t){if(1&e){var c=h.ic();h.hc(0,"tr",10),h.hc(1,"td",11),h.cc(2,"img",12),h.gc(),h.hc(3,"td",13),h.Vc(4),h.gc(),h.hc(5,"td",14),h.Vc(6),h.gc(),h.hc(7,"td",15),h.Vc(8),h.sc(9,"localeCurrency"),h.gc(),h.hc(10,"td",16),h.hc(11,"input",17),h.pc("ngModelChange",function(e){return t.$implicit.quantity=e})("change",function(){return h.Lc(c),h.rc(2).updateQuantity()}),h.gc(),h.hc(12,"button",18),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc(2).removeLine(e)}),h.cc(13,"clr-icon",19),h.gc(),h.gc(),h.hc(14,"td",20),h.Vc(15),h.sc(16,"localeCurrency"),h.gc(),h.gc()}if(2&e){var n=t.$implicit,r=h.rc(2);h.Qb(2),h.yc("src",n.preview+"?preset=tiny",h.Nc),h.Qb(2),h.Wc(n.name),h.Qb(2),h.Wc(n.sku),h.Qb(2),h.Xc(" ",h.uc(9,6,n.unitPriceWithTax,r.currencyCode)," "),h.Qb(3),h.yc("ngModel",n.quantity),h.Qb(4),h.Xc(" ",h.uc(16,9,n.unitPriceWithTax*n.quantity,r.currencyCode)," ")}}function jc(e,t){if(1&e&&(h.hc(0,"table",6),h.hc(1,"thead"),h.hc(2,"tr"),h.cc(3,"th"),h.hc(4,"th"),h.Vc(5),h.sc(6,"translate"),h.gc(),h.hc(7,"th"),h.Vc(8),h.sc(9,"translate"),h.gc(),h.hc(10,"th"),h.Vc(11),h.sc(12,"translate"),h.gc(),h.hc(13,"th"),h.Vc(14),h.sc(15,"translate"),h.gc(),h.hc(16,"th"),h.Vc(17),h.sc(18,"translate"),h.gc(),h.gc(),h.gc(),h.Tc(19,Pc,17,12,"tr",7),h.hc(20,"tr",8),h.hc(21,"td",9),h.Vc(22),h.sc(23,"translate"),h.gc(),h.cc(24,"td"),h.cc(25,"td"),h.cc(26,"td"),h.cc(27,"td"),h.hc(28,"td"),h.Vc(29),h.sc(30,"localeCurrency"),h.gc(),h.gc(),h.gc()),2&e){var c=h.rc();h.Qb(5),h.Wc(h.tc(6,8,"order.product-name")),h.Qb(3),h.Wc(h.tc(9,10,"order.product-sku")),h.Qb(3),h.Wc(h.tc(12,12,"order.unit-price")),h.Qb(3),h.Wc(h.tc(15,14,"order.quantity")),h.Qb(3),h.Wc(h.tc(18,16,"order.total")),h.Qb(2),h.yc("ngForOf",c.lines),h.Qb(3),h.Wc(h.tc(23,18,"order.sub-total")),h.Qb(7),h.Wc(h.uc(30,20,c.subTotal,c.currencyCode))}}function Dc(e,t){1&e&&(h.hc(0,"div",21),h.hc(1,"div",22),h.Vc(2),h.sc(3,"translate"),h.gc(),h.cc(4,"clr-icon",23),h.gc()),2&e&&(h.Qb(2),h.Wc(h.tc(3,1,"settings.add-products-to-test-order")))}var Vc=function(){function e(t,c){g(this,e),this.dataService=t,this.localStorageService=c,this.orderLinesChange=new h.t,this.lines=[]}return b(e,[{key:"subTotal",get:function(){return this.lines.reduce(function(e,t){return e+t.unitPriceWithTax*t.quantity},0)}},{key:"ngOnInit",value:function(){var e=this;this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(function(t){e.currencyCode=t.activeChannel.currencyCode})}},{key:"selectResult",value:function(e){e&&this.addToLines(e)}},{key:"addToLines",value:function(e){var t,c;this.lines.find(function(t){return t.id===e.productVariantId})||(this.lines.push({id:e.productVariantId,name:e.productVariantName,preview:null!==(c=null===(t=e.productAsset)||void 0===t?void 0:t.preview)&&void 0!==c?c:"",quantity:1,sku:e.sku,unitPriceWithTax:"SinglePrice"===e.priceWithTax.__typename&&e.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}},{key:"updateQuantity",value:function(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}},{key:"removeLine",value:function(e){this.lines=this.lines.filter(function(t){return t.id!==e.id}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}},{key:"persistToLocalStorage",value:function(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}},{key:"loadFromLocalStorage",value:function(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}}]),e}();function wc(e,t){if(1&e&&(h.hc(0,"option",9),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.yc("value",c.code),h.Qb(1),h.Xc(" ",c.name," ")}}Vc.\u0275fac=function(e){return new(e||Vc)(h.bc(m.s),h.bc(m.D))},Vc.\u0275cmp=h.Vb({type:Vc,selectors:[["vdr-test-order-builder"]],outputs:{orderLinesChange:"orderLinesChange"},decls:9,vars:5,consts:[[1,"card"],[1,"card-header"],["class","order-table table",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"card-block"],[3,"productSelected"],[1,"order-table","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModel","ngModelChange","change"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(e,t){if(1&e&&(h.hc(0,"div",0),h.hc(1,"div",1),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,jc,31,23,"table",2),h.Tc(5,Dc,5,3,"ng-template",null,3,h.Uc),h.hc(7,"div",4),h.hc(8,"vdr-product-selector",5),h.pc("productSelected",function(e){return t.selectResult(e)}),h.gc(),h.gc(),h.gc()),2&e){var c=h.Ic(6);h.Qb(2),h.Xc(" ",h.tc(3,3,"settings.test-order")," "),h.Qb(2),h.yc("ngIf",t.lines.length)("ngIfElse",c)}},directives:[C.o,Ic.a,C.n,k.a,O.v,O.b,O.p,O.s,S.o,Tc.b],pipes:[I.d,vc.a],styles:[".empty-placeholder[_ngcontent-%COMP%]{color:var(--color-grey-400);text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}"],changeDetection:0});var xc=function(){function e(t,c,n){g(this,e),this.formBuilder=t,this.dataService=c,this.localStorageService=n,this.addressChange=new h.t}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(function(e){return e.countries.items});var t=this.localStorageService.getForCurrentLocation("shippingTestAddress")||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(t),this.form=this.formBuilder.group(t),this.subscription=this.form.valueChanges.subscribe(function(t){e.localStorageService.setForCurrentLocation("shippingTestAddress",t),e.addressChange.emit(t)})}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}();function Lc(e,t){1&e&&h.cc(0,"clr-icon",14)}function Mc(e,t){1&e&&h.cc(0,"clr-icon",15)}function Ac(e,t){1&e&&h.cc(0,"clr-icon",16)}function $c(e,t){if(1&e&&(h.hc(0,"vdr-labeled-data",4),h.sc(1,"translate"),h.Vc(2),h.sc(3,"localeCurrency"),h.gc()),2&e){var c=h.rc();h.yc("label",h.tc(1,2,"common.price")),h.Qb(2),h.Xc(" ",h.uc(3,4,null==c.testResult.quote?null:c.testResult.quote.price,c.currencyCode)," ")}}function Nc(e,t){if(1&e&&(h.hc(0,"vdr-labeled-data",4),h.sc(1,"translate"),h.Vc(2),h.sc(3,"localeCurrency"),h.gc()),2&e){var c=h.rc();h.yc("label",h.tc(1,2,"common.price-with-tax")),h.Qb(2),h.Xc(" ",h.uc(3,4,null==c.testResult.quote?null:c.testResult.quote.priceWithTax,c.currencyCode)," ")}}function Rc(e,t){if(1&e&&h.cc(0,"vdr-object-tree",17),2&e){var c=h.rc();h.yc("value",null==c.testResult||null==c.testResult.quote?null:c.testResult.quote.metadata)}}xc.\u0275fac=function(e){return new(e||xc)(h.bc(O.e),h.bc(m.s),h.bc(m.D))},xc.\u0275cmp=h.Vb({type:xc,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},decls:28,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[3,"formGroup"],["formControlName","city","type","text","clrInput",""],["formControlName","province","type","text","clrInput",""],["formControlName","postalCode","type","text","clrInput",""],["name","countryCode","formControlName","countryCode","clrInput","","clrSelect",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(h.hc(0,"div",0),h.hc(1,"div",1),h.Vc(2),h.sc(3,"translate"),h.gc(),h.hc(4,"div",2),h.hc(5,"form",3),h.hc(6,"clr-input-container"),h.hc(7,"label"),h.Vc(8),h.sc(9,"translate"),h.gc(),h.cc(10,"input",4),h.gc(),h.hc(11,"clr-input-container"),h.hc(12,"label"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.cc(15,"input",5),h.gc(),h.hc(16,"clr-input-container"),h.hc(17,"label"),h.Vc(18),h.sc(19,"translate"),h.gc(),h.cc(20,"input",6),h.gc(),h.hc(21,"clr-input-container"),h.hc(22,"label"),h.Vc(23),h.sc(24,"translate"),h.gc(),h.hc(25,"select",7),h.Tc(26,wc,2,2,"option",8),h.sc(27,"async"),h.gc(),h.gc(),h.gc(),h.gc(),h.gc()),2&e&&(h.Qb(2),h.Xc(" ",h.tc(3,7,"settings.test-address")," "),h.Qb(3),h.yc("formGroup",t.form),h.Qb(3),h.Wc(h.tc(9,9,"customer.city")),h.Qb(5),h.Wc(h.tc(14,11,"customer.province")),h.Qb(5),h.Wc(h.tc(19,13,"customer.postal-code")),h.Qb(5),h.Wc(h.tc(24,15,"customer.country")),h.Qb(3),h.yc("ngForOf",h.tc(27,17,t.availableCountries$)))},directives:[O.E,O.q,O.j,S.t,S.u,k.a,O.b,O.p,O.h,S.s,O.A,S.A,C.n,O.u,O.D],pipes:[I.d,C.b],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0});var zc=function(e,t,c){return{success:e,error:t,unknown:c}},Wc=function e(){g(this,e),this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new h.t};function Xc(e,t){if(1&e){var c=h.ic();h.hc(0,"button",8),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",n.detailForm.pristine||n.detailForm.invalid||!n.selectedChecker||!n.selectedCalculator),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function Ec(e,t){if(1&e){var c=h.ic();h.hc(0,"button",8),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",n.detailForm.pristine||n.detailForm.invalid||!n.selectedChecker||!n.selectedCalculator),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function _c(e,t){if(1&e&&h.Tc(0,Ec,3,4,"button",9),2&e){var c=h.rc();h.yc("vdrIfPermissions",c.updatePermission)}}function Gc(e,t){if(1&e&&(h.hc(0,"option",26),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.yc("value",c.code),h.Qb(1),h.Yc(" ",c.code,": ",c.description," ")}}function Uc(e,t){if(1&e&&h.cc(0,"vdr-custom-field-control",30),2&e){var c=h.rc().$implicit,n=h.rc(3);h.yc("customFieldsFormGroup",n.detailForm.get("customFields"))("customField",c)}}function Zc(e,t){if(1&e&&(h.fc(0),h.Tc(1,Uc,1,2,"vdr-custom-field-control",29),h.ec()),2&e){var c=t.$implicit,n=h.rc(3);h.Qb(1),h.yc("ngIf",n.customFieldIsSet(c.name))}}function Bc(e,t){if(1&e&&(h.hc(0,"section",27),h.hc(1,"label"),h.Vc(2),h.sc(3,"translate"),h.gc(),h.Tc(4,Zc,2,1,"ng-container",28),h.gc()),2&e){var c=h.rc(2);h.Qb(2),h.Wc(h.tc(3,2,"common.custom-fields")),h.Qb(2),h.yc("ngForOf",c.customFields)}}function qc(e,t){if(1&e){var c=h.ic();h.hc(0,"vdr-configurable-input",31),h.pc("remove",function(){return h.Lc(c),h.rc(2).selectedChecker=null}),h.sc(1,"hasPermission"),h.gc()}if(2&e){var n=h.rc(2);h.yc("operation",n.selectedChecker)("operationDefinition",n.selectedCheckerDefinition)("readonly",!h.tc(1,3,n.updatePermission))}}function Hc(e,t){if(1&e){var c=h.ic();h.hc(0,"button",36),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc(3).selectChecker(e)}),h.Vc(1),h.gc()}if(2&e){var n=t.$implicit;h.Qb(1),h.Xc(" ",n.description," ")}}function Kc(e,t){if(1&e&&(h.hc(0,"div"),h.hc(1,"vdr-dropdown"),h.hc(2,"button",32),h.cc(3,"clr-icon",33),h.Vc(4),h.sc(5,"translate"),h.gc(),h.hc(6,"vdr-dropdown-menu",34),h.Tc(7,Hc,2,1,"button",35),h.gc(),h.gc(),h.gc()),2&e){var c=h.rc(2);h.Qb(4),h.Xc(" ",h.tc(5,2,"common.select")," "),h.Qb(3),h.yc("ngForOf",c.checkers)}}function Yc(e,t){if(1&e){var c=h.ic();h.hc(0,"vdr-configurable-input",37),h.pc("remove",function(){return h.Lc(c),h.rc(2).selectedCalculator=null}),h.sc(1,"hasPermission"),h.gc()}if(2&e){var n=h.rc(2);h.yc("operation",n.selectedCalculator)("operationDefinition",n.selectedCalculatorDefinition)("readonly",!h.tc(1,3,n.updatePermission))}}function Jc(e,t){if(1&e){var c=h.ic();h.hc(0,"button",36),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc(3).selectCalculator(e)}),h.Vc(1),h.gc()}if(2&e){var n=t.$implicit;h.Qb(1),h.Xc(" ",n.description," ")}}function en(e,t){if(1&e&&(h.hc(0,"div"),h.hc(1,"vdr-dropdown"),h.hc(2,"button",32),h.cc(3,"clr-icon",33),h.Vc(4),h.sc(5,"translate"),h.gc(),h.hc(6,"vdr-dropdown-menu",34),h.Tc(7,Jc,2,1,"button",35),h.gc(),h.gc(),h.gc()),2&e){var c=h.rc(2);h.Qb(4),h.Xc(" ",h.tc(5,2,"common.select")," "),h.Qb(3),h.yc("ngForOf",c.calculators)}}function tn(e,t){if(1&e){var c=h.ic();h.hc(0,"form",10),h.hc(1,"vdr-form-field",11),h.sc(2,"translate"),h.hc(3,"input",12),h.pc("input",function(e){h.Lc(c);var n=t.ngIf;return h.rc().updateCode(n.code,e.target.value)}),h.sc(4,"hasPermission"),h.gc(),h.gc(),h.hc(5,"vdr-form-field",13),h.sc(6,"translate"),h.sc(7,"hasPermission"),h.cc(8,"input",14),h.sc(9,"hasPermission"),h.gc(),h.cc(10,"vdr-rich-text-editor",15),h.sc(11,"hasPermission"),h.sc(12,"translate"),h.hc(13,"vdr-form-field",16),h.sc(14,"translate"),h.hc(15,"select",17),h.sc(16,"hasPermission"),h.Tc(17,Gc,2,3,"option",18),h.gc(),h.gc(),h.Tc(18,Bc,5,4,"section",19),h.hc(19,"div",20),h.hc(20,"div",21),h.hc(21,"label",22),h.Vc(22),h.sc(23,"translate"),h.gc(),h.Tc(24,qc,2,5,"vdr-configurable-input",23),h.Tc(25,Kc,8,4,"div",24),h.gc(),h.hc(26,"div",21),h.hc(27,"label",22),h.Vc(28),h.sc(29,"translate"),h.gc(),h.Tc(30,Yc,2,5,"vdr-configurable-input",25),h.Tc(31,en,8,4,"div",24),h.gc(),h.gc(),h.gc()}if(2&e){var n=h.rc();h.yc("formGroup",n.detailForm),h.Qb(1),h.yc("label",h.tc(2,18,"common.name")),h.Qb(2),h.yc("readonly",!h.tc(4,20,n.updatePermission)),h.Qb(2),h.yc("label",h.tc(6,22,"common.code"))("readOnlyToggle",h.tc(7,24,n.updatePermission)),h.Qb(3),h.yc("readonly",!h.tc(9,26,n.updatePermission)),h.Qb(2),h.yc("readonly",!h.tc(11,28,n.updatePermission))("label",h.tc(12,30,"common.description")),h.Qb(3),h.yc("label",h.tc(14,32,"settings.fulfillment-handler")),h.Qb(2),h.yc("vdrDisabled",!h.tc(16,34,n.updatePermission)),h.Qb(2),h.yc("ngForOf",n.fulfillmentHandlers),h.Qb(1),h.yc("ngIf",n.customFields.length),h.Qb(4),h.Wc(h.tc(23,36,"settings.shipping-eligibility-checker")),h.Qb(2),h.yc("ngIf",n.selectedChecker&&n.selectedCheckerDefinition),h.Qb(1),h.yc("ngIf",!n.selectedChecker||!n.selectedCheckerDefinition),h.Qb(3),h.Wc(h.tc(29,38,"settings.shipping-calculator")),h.Qb(2),h.yc("ngIf",n.selectedCalculator&&n.selectedCalculatorDefinition),h.Qb(1),h.yc("ngIf",!n.selectedCalculator||!n.selectedCalculatorDefinition)}}function cn(e,t){if(1&e){var c=h.ic();h.hc(0,"clr-accordion-content"),h.hc(1,"div",38),h.hc(2,"div",21),h.hc(3,"vdr-test-order-builder",39),h.pc("orderLinesChange",function(e){return h.Lc(c),h.rc().setTestOrderLines(e)}),h.gc(),h.gc(),h.hc(4,"div",21),h.hc(5,"vdr-test-address-form",40),h.pc("addressChange",function(e){return h.Lc(c),h.rc().setTestAddress(e)}),h.gc(),h.hc(6,"vdr-shipping-method-test-result",41),h.pc("runTest",function(){return h.Lc(c),h.rc().runTest()}),h.sc(7,"async"),h.sc(8,"async"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n,r=h.rc();h.Qb(6),h.yc("currencyCode",null==(n=h.tc(7,4,r.activeChannel$))?null:n.currencyCode)("okToRun",r.allTestDataPresent()&&r.testDataUpdated&&r.detailForm.valid)("testDataUpdated",r.testDataUpdated)("testResult",h.tc(8,6,r.testResult$))}}Wc.\u0275fac=function(e){return new(e||Wc)},Wc.\u0275cmp=h.Vb({type:Wc,selectors:[["vdr-shipping-method-test-result"]],inputs:{testResult:"testResult",okToRun:"okToRun",testDataUpdated:"testDataUpdated",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"disabled","click"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(e,t){1&e&&(h.hc(0,"div",0),h.hc(1,"div",1),h.Vc(2),h.sc(3,"translate"),h.gc(),h.hc(4,"div",2),h.hc(5,"div",3),h.hc(6,"vdr-labeled-data",4),h.sc(7,"translate"),h.hc(8,"div",5),h.Tc(9,Lc,1,0,"clr-icon",6),h.Tc(10,Mc,1,0,"clr-icon",7),h.Tc(11,Ac,1,0,"clr-icon",8),h.gc(),h.Vc(12),h.gc(),h.hc(13,"div",9),h.Tc(14,$c,4,7,"vdr-labeled-data",10),h.Tc(15,Nc,4,7,"vdr-labeled-data",10),h.gc(),h.Tc(16,Rc,1,1,"vdr-object-tree",11),h.gc(),h.gc(),h.hc(17,"div",12),h.hc(18,"button",13),h.pc("click",function(){return t.runTest.emit()}),h.Vc(19),h.sc(20,"translate"),h.gc(),h.gc(),h.gc()),2&e&&(h.yc("ngClass",h.Ec(20,zc,!0===(null==t.testResult?null:t.testResult.eligible),!1===(null==t.testResult?null:t.testResult.eligible),!t.testResult)),h.Qb(2),h.Xc(" ",h.tc(3,14,"settings.test-result")," "),h.Qb(3),h.Tb("stale",t.testDataUpdated),h.Qb(1),h.yc("label",h.tc(7,16,"settings.eligible")),h.Qb(3),h.yc("ngIf",null==t.testResult?null:t.testResult.eligible),h.Qb(1),h.yc("ngIf",!1===(null==t.testResult?null:t.testResult.eligible)),h.Qb(1),h.yc("ngIf",!t.testResult),h.Qb(1),h.Xc(" ",null==t.testResult?null:t.testResult.eligible," "),h.Qb(2),h.yc("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.price)),h.Qb(1),h.yc("ngIf",null!=(null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.priceWithTax)),h.Qb(1),h.yc("ngIf",null==t.testResult||null==t.testResult.quote?null:t.testResult.quote.metadata),h.Qb(2),h.yc("disabled",!t.okToRun),h.Qb(1),h.Xc(" ",h.tc(20,18,"settings.test-shipping-method")," "))},directives:[C.m,hc.a,C.o,S.o,pc.a],pipes:[I.d,vc.a],styles:[".test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-success-100)}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-error-100)}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-500)}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-error-500)}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:24px}"],changeDetection:0});var nn=function(e){c(i,e);var n=r(i);function i(e,c,r,a,o,s,l){var d;return g(this,i),(d=n.call(this,c,e,r,o)).changeDetector=a,d.dataService=o,d.formBuilder=s,d.notificationService=l,d.checkers=[],d.calculators=[],d.fulfillmentHandlers=[],d.testDataUpdated=!1,d.updatePermission=[m.H.UpdateSettings,m.H.UpdateShippingMethod],d.fetchTestResult$=new Ee.a,d.customFields=d.getCustomFieldConfig("ShippingMethod"),d.detailForm=d.formBuilder.group({code:["",O.C.required],name:["",O.C.required],description:"",fulfillmentHandler:["",O.C.required],checker:{},calculator:{},customFields:d.formBuilder.group(d.customFields.reduce(function(e,c){return Object.assign(Object.assign({},e),t({},c.name,""))},{}))}),d}return b(i,[{key:"ngOnInit",value:function(){var e=this;this.init(),Object(Ye.a)([this.dataService.shippingMethod.getShippingMethodOperations().single$,this.entity$.pipe(Object(E.a)(1))]).subscribe(function(t){var c=s(t,2),n=c[0],r=c[1];e.checkers=n.shippingEligibilityCheckers,e.calculators=n.shippingCalculators,e.fulfillmentHandlers=n.fulfillmentHandlers,e.changeDetector.markForCheck(),e.selectedCheckerDefinition=n.shippingEligibilityCheckers.find(function(e){return e.code===(r.checker&&r.checker.code)}),e.selectedCalculatorDefinition=n.shippingCalculators.find(function(e){return e.code===(r.calculator&&r.calculator.code)})}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(function(e){return e.activeChannel}),this.testResult$=this.fetchTestResult$.pipe(Object(he.a)(function(t){var c=s(t,2),n=c[0],r=c[1];if(!e.selectedChecker||!e.selectedCalculator)return Object(Qc.a)(void 0);var i=e.detailForm.value,a={shippingAddress:Object.assign(Object.assign({},n),{streetLine1:"test"}),lines:r.map(function(e){return{productVariantId:e.id,quantity:e.quantity}}),checker:Object(m.Z)(e.selectedChecker,i.checker),calculator:Object(m.Z)(e.selectedCalculator,i.calculator)};return e.dataService.shippingMethod.testShippingMethod(a).mapSingle(function(e){return e.testShippingMethod})})),Object(Fc.a)(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe(Object(Sc.a)(this.destroy$)).subscribe(function(){return e.testDataUpdated=!0})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customFields",e])}},{key:"updateCode",value:function(e,t){if(!e){var c=this.detailForm.get(["code"]);c&&c.pristine&&c.setValue(Object(Qt.normalizeString)(t,"-"))}}},{key:"selectChecker",value:function(e){this.selectedCheckerDefinition=e,this.selectedChecker=Object(m.M)(e);var t=this.detailForm.get("checker");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}},{key:"selectCalculator",value:function(e){this.selectedCalculatorDefinition=e,this.selectedCalculator=Object(m.M)(e);var t=this.detailForm.get("calculator");t&&(t.clearValidators(),t.updateValueAndValidity({onlySelf:!0}),t.patchValue(this.selectedCalculator)),this.detailForm.markAsDirty()}},{key:"create",value:function(){var e=this,t=this.selectedChecker,c=this.selectedCalculator;t&&c&&Object(Ye.a)([this.entity$,this.languageCode$]).pipe(Object(E.a)(1),Object(_.a)(function(n){var r=s(n,2),i=r[0],a=r[1],o=e.detailForm.value,l=Object.assign(Object.assign({},e.getUpdatedShippingMethod(i,e.detailForm,a)),{checker:Object(m.Z)(t,o.checker),calculator:Object(m.Z)(c,o.calculator)});return e.dataService.shippingMethod.createShippingMethod(l)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"ShippingMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createShippingMethod.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"ShippingMethod"})})}},{key:"save",value:function(){var e=this,t=this.selectedChecker,c=this.selectedCalculator;t&&c&&Object(Ye.a)([this.entity$,this.languageCode$]).pipe(Object(E.a)(1),Object(_.a)(function(n){var r=s(n,2),i=r[0],a=r[1],o=e.detailForm.value,l=Object.assign(Object.assign({},e.getUpdatedShippingMethod(i,e.detailForm,a)),{checker:Object(m.Z)(t,o.checker),calculator:Object(m.Z)(c,o.calculator)});return e.dataService.shippingMethod.updateShippingMethod(l)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"ShippingMethod"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"ShippingMethod"})})}},{key:"setTestOrderLines",value:function(e){this.testOrderLines=e,this.testDataUpdated=!0}},{key:"setTestAddress",value:function(e){this.testAddress=e,this.testDataUpdated=!0}},{key:"allTestDataPresent",value:function(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}},{key:"runTest",value:function(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}},{key:"getUpdatedShippingMethod",value:function(e,t,c){var n=t.value,r=Object(m.P)({translatable:e,updatedFields:n,customFieldConfig:this.customFields,languageCode:c,defaultTranslation:{languageCode:c,name:e.name||"",description:e.description||""}});return Object.assign(Object.assign({},r),{fulfillmentHandler:n.fulfillmentHandler})}},{key:"setFormValues",value:function(e,t){var c,n,r,i,a=Object(m.S)(e,t);if(this.detailForm.patchValue({name:null!==(c=null==a?void 0:a.name)&&void 0!==c?c:"",description:null!==(n=null==a?void 0:a.description)&&void 0!==n?n:"",code:e.code,fulfillmentHandler:e.fulfillmentHandlerCode,checker:e.checker||{},calculator:e.calculator||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(function(e){return Object.assign(Object.assign({},e),{value:Object(m.V)(e.value)})})}),this.selectedCalculator||(this.selectedCalculator=e.calculator&&{code:null===(r=e.calculator)||void 0===r?void 0:r.code,args:null===(i=e.calculator)||void 0===i?void 0:i.args.map(function(e){return Object.assign(Object.assign({},e),{value:Object(m.V)(e.value)})})}),this.customFields.length){var o,s=this.detailForm.get("customFields"),d=l(this.customFields);try{for(d.s();!(o=d.n()).done;){var u=o.value,f=u.name,b="localeString"===u.type?a.customFields[f]:e.customFields[f],g=s.get(f);g&&g.patchValue(b)}}catch(h){d.e(h)}finally{d.f()}}}}]),i}(m.l);nn.\u0275fac=function(e){return new(e||nn)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},nn.\u0275cmp=h.Vb({type:nn,selectors:[["vdr-shipping-method-detail"]],features:[h.Nb],decls:23,vars:22,consts:[[3,"entity"],[3,"disabled","availableLanguageCodes","currentLanguageCode","languageCodeChange"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],["class","form",3,"formGroup",4,"ngIf"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly","input"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",3,"readonly","label"],["for","fulfillmentHandler",1,"mb2",3,"label"],["name","fulfillmentHandler","formControlName","fulfillmentHandler",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","customFields",4,"ngIf"],[1,"clr-row","mt4"],[1,"clr-col"],[1,"clr-control-label"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[4,"ngIf"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[3,"value"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","ShippingMethod",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","ShippingMethod",3,"customFieldsFormGroup","customField"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",3,"operation","operationDefinition","readonly","remove"],[1,"clr-row"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.hc(4,"vdr-language-selector",1),h.pc("languageCodeChange",function(e){return t.setLanguage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.gc(),h.gc(),h.hc(8,"vdr-ab-right"),h.cc(9,"vdr-action-bar-items",2),h.Tc(10,Xc,3,4,"button",3),h.sc(11,"async"),h.Tc(12,_c,1,1,"ng-template",null,4,h.Uc),h.gc(),h.gc(),h.Tc(14,tn,32,40,"form",5),h.sc(15,"async"),h.hc(16,"div",6),h.hc(17,"clr-accordion"),h.hc(18,"clr-accordion-panel"),h.hc(19,"clr-accordion-title"),h.Vc(20),h.sc(21,"translate"),h.gc(),h.Tc(22,cn,9,8,"clr-accordion-content",7),h.gc(),h.gc(),h.gc()),2&e){var c=h.Ic(13);h.Qb(2),h.yc("entity",h.tc(3,8,t.entity$)),h.Qb(2),h.yc("disabled",h.tc(5,10,t.isNew$))("availableLanguageCodes",h.tc(6,12,t.availableLanguages$))("currentLanguageCode",h.tc(7,14,t.languageCode$)),h.Qb(6),h.yc("ngIf",h.tc(11,16,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("ngIf",h.tc(15,18,t.entity$)),h.Qb(6),h.Wc(h.tc(21,20,"settings.test-shipping-method"))}},directives:[U.a,U.b,Z.a,Je.a,U.c,B.a,C.o,S.b,S.O,S.d,S.N,S.e,S.Q,S.q,ce.a,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,Ft.a,O.A,Te.a,C.n,S.u,O.u,O.D,O.k,ne.a,St.a,ve.a,ye.a,S.o,Ce.a,ke.a,S.c,Vc,xc,Wc],pipes:[C.b,I.d,T.a],styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px;margin-bottom:128px}.testing-tool[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0});var rn=function(){return["./create"]};function an(e,t){1&e&&(h.hc(0,"a",5),h.cc(1,"clr-icon",6),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,rn)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-shipping-method")," "))}var on=function(e){return["./",e]},sn=function(){return["DeleteSettings","DeleteShippingMethod"]};function ln(e,t){if(1&e){var c=h.ic();h.hc(0,"td",7),h.Vc(1),h.gc(),h.hc(2,"td",7),h.Vc(3),h.gc(),h.hc(4,"td",8),h.cc(5,"vdr-table-row-action",9),h.sc(6,"translate"),h.gc(),h.hc(7,"td",8),h.hc(8,"vdr-dropdown"),h.hc(9,"button",10),h.Vc(10),h.sc(11,"translate"),h.cc(12,"clr-icon",11),h.gc(),h.hc(13,"vdr-dropdown-menu",12),h.hc(14,"button",13),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteShippingMethod(e.id)}),h.sc(15,"hasPermission"),h.cc(16,"clr-icon",14),h.Vc(17),h.sc(18,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item;h.Qb(1),h.Wc(n.code),h.Qb(2),h.Wc(n.name),h.Qb(2),h.yc("label",h.tc(6,7,"common.edit"))("linkTo",h.Cc(15,on,n.id)),h.Qb(5),h.Xc(" ",h.tc(11,9,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(15,11,h.Bc(17,sn))),h.Qb(3),h.Xc(" ",h.tc(18,13,"common.delete")," ")}}function dn(e,t){if(1&e){var c=h.ic();h.hc(0,"clr-accordion-content"),h.hc(1,"div",15),h.hc(2,"div",16),h.hc(3,"vdr-test-order-builder",17),h.pc("orderLinesChange",function(e){return h.Lc(c),h.rc().setTestOrderLines(e)}),h.gc(),h.gc(),h.hc(4,"div",16),h.hc(5,"vdr-test-address-form",18),h.pc("addressChange",function(e){return h.Lc(c),h.rc().setTestAddress(e)}),h.gc(),h.hc(6,"vdr-shipping-eligibility-test-result",19),h.pc("runTest",function(){return h.Lc(c),h.rc().runTest()}),h.sc(7,"async"),h.sc(8,"async"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n,r=h.rc();h.Qb(6),h.yc("currencyCode",null==(n=h.tc(7,4,r.activeChannel$))?null:n.currencyCode)("okToRun",r.allTestDataPresent())("testDataUpdated",r.testDataUpdated)("testResult",h.tc(8,6,r.testResult$))}}var un=function(){return["CreateSettings","CreateShippingMethod"]},mn=function(t){c(i,t);var n=r(i);function i(t,c,r,s,l){var d,u;return g(this,i),(u=n.call(this,s,l)).modalService=t,u.notificationService=c,u.dataService=r,u.testDataUpdated=!1,u.fetchTestResult$=new Ee.a,e((d=a(u),o(i.prototype)),"setQueryFn",d).call(d,function(){var e;return(e=u.dataService.shippingMethod).getShippingMethods.apply(e,arguments).refetchOnChannelChange()},function(e){return e.shippingMethods}),u}return b(i,[{key:"ngOnInit",value:function(){var t=this;e(o(i.prototype),"ngOnInit",this).call(this),this.testResult$=this.fetchTestResult$.pipe(Object(he.a)(function(e){var c=s(e,2),n=c[0],r=c[1],i={shippingAddress:Object.assign(Object.assign({},n),{streetLine1:"test"}),lines:r.map(function(e){return{productVariantId:e.id,quantity:e.quantity}})};return t.dataService.shippingMethod.testEligibleShippingMethods(i).mapSingle(function(e){return e.testEligibleShippingMethods})})),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(function(e){return e.activeChannel})}},{key:"deleteShippingMethod",value:function(e){var t=this;this.modalService.dialog({title:Object(W.a)("catalog.confirm-delete-shipping-method"),buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.shippingMethod.deleteShippingMethod(e):ge.a})).subscribe(function(){t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"ShippingMethod"}),t.refresh()},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"ShippingMethod"})})}},{key:"setTestOrderLines",value:function(e){this.testOrderLines=e,this.testDataUpdated=!0}},{key:"setTestAddress",value:function(e){this.testAddress=e,this.testDataUpdated=!0}},{key:"allTestDataPresent",value:function(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}},{key:"runTest",value:function(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}}]),i}(m.n);function fn(e,t){if(1&e){var c=h.ic();h.hc(0,"button",9),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",!n.saveButtonEnabled()),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function bn(e,t){if(1&e){var c=h.ic();h.hc(0,"button",9),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",!n.saveButtonEnabled()),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function gn(e,t){if(1&e&&h.Tc(0,bn,3,4,"button",10),2&e){var c=h.rc();h.yc("vdrIfPermissions",c.updatePermission)}}mn.\u0275fac=function(e){return new(e||mn)(h.bc(m.F),h.bc(m.G),h.bc(m.s),h.bc(G.e),h.bc(G.a))},mn.\u0275cmp=h.Vb({type:mn,selectors:[["vdr-shipping-method-list"]],features:[h.Nb],decls:25,vars:23,consts:[["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"testing-tool"],[4,"clrIfExpanded"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"clr-row"],[1,"clr-col"],[3,"orderLinesChange"],[3,"addressChange"],[3,"currencyCode","okToRun","testDataUpdated","testResult","runTest"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,an,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.pc("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.sc(8,"async"),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.cc(15,"vdr-dt-column"),h.cc(16,"vdr-dt-column"),h.Tc(17,ln,19,18,"ng-template"),h.gc(),h.hc(18,"div",3),h.hc(19,"clr-accordion"),h.hc(20,"clr-accordion-panel"),h.hc(21,"clr-accordion-title"),h.Vc(22),h.sc(23,"translate"),h.gc(),h.Tc(24,dn,9,8,"clr-accordion-content",4),h.gc(),h.gc(),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions",h.Bc(22,un)),h.Qb(1),h.yc("items",h.tc(5,8,t.items$))("itemsPerPage",h.tc(6,10,t.itemsPerPage$))("totalItems",h.tc(7,12,t.totalItems$))("currentPage",h.tc(8,14,t.currentPage$)),h.Qb(6),h.Wc(h.tc(11,16,"common.code")),h.Qb(3),h.Wc(h.tc(14,18,"common.name")),h.Qb(9),h.Wc(h.tc(23,20,"settings.test-shipping-methods")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,S.b,S.O,S.d,S.N,S.e,S.Q,S.q,G.h,S.o,pe.a,ve.a,ye.a,Ce.a,ke.a,S.c,Vc,xc,Oc],pipes:[C.b,I.d,T.a],styles:[".testing-tool[_ngcontent-%COMP%]{margin-top:48px}"],changeDetection:0});var hn=function(e){c(n,e);var t=r(n);function n(e,c,r,i,a,o,s){var l;return g(this,n),(l=t.call(this,c,e,r,a)).changeDetector=i,l.dataService=a,l.formBuilder=o,l.notificationService=s,l.updatePermission=[m.H.UpdateSettings,m.H.UpdateTaxCategory],l.detailForm=l.formBuilder.group({name:["",O.C.required],isDefault:!1}),l}return b(n,[{key:"ngOnInit",value:function(){this.init(),this.taxCategory$=this.entity$}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,c={name:t.name,isDefault:t.isDefault};this.dataService.settings.createTaxCategory(c).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"TaxCategory"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createTaxCategory.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"TaxCategory"})})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.taxCategory$.pipe(Object(E.a)(1),Object(_.a)(function(c){var n={id:c.id,name:t.name,isDefault:t.isDefault};return e.dataService.settings.updateTaxCategory(n)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"TaxCategory"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"TaxCategory"})})}}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({name:e.name,isDefault:e.isDefault})}}]),n}(m.l);hn.\u0275fac=function(e){return new(e||hn)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},hn.\u0275cmp=h.Vb({type:hn,selectors:[["vdr-tax-detail"]],features:[h.Nb],decls:20,vars:20,consts:[[3,"entity"],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","isDefault",3,"label"],["type","checkbox","clrToggle","","id","isDefault","formControlName","isDefault",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,fn,3,4,"button",2),h.sc(7,"async"),h.Tc(8,gn,1,1,"ng-template",null,3,h.Uc),h.gc(),h.gc(),h.hc(10,"form",4),h.hc(11,"vdr-form-field",5),h.sc(12,"translate"),h.cc(13,"input",6),h.sc(14,"hasPermission"),h.gc(),h.hc(15,"vdr-form-field",7),h.sc(16,"translate"),h.hc(17,"clr-toggle-wrapper"),h.cc(18,"input",8),h.sc(19,"hasPermission"),h.gc(),h.gc(),h.gc()),2&e){var c=h.Ic(9);h.Qb(2),h.yc("entity",h.tc(3,8,t.entity$)),h.Qb(4),h.yc("ngIf",h.tc(7,10,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(12,12,"common.name")),h.Qb(2),h.yc("readonly",!h.tc(14,14,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(16,16,"common.default-tax-category")),h.Qb(3),h.yc("vdrDisabled",!h.tc(19,18,t.updatePermission))}},directives:[U.a,U.b,Z.a,U.c,B.a,C.o,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,S.k,O.a,S.i,Te.a,ce.a],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var pn=function(){return["./create"]};function vn(e,t){1&e&&(h.hc(0,"a",3),h.cc(1,"clr-icon",4),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,pn)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-tax-category")," "))}function yn(e,t){1&e&&(h.hc(0,"vdr-chip"),h.Vc(1),h.sc(2,"translate"),h.gc()),2&e&&(h.Qb(1),h.Wc(h.tc(2,1,"common.default-tax-category")))}var Cn=function(e){return["./",e]},kn=function(){return["DeleteSettings","DeleteTaxCategory"]};function On(e,t){if(1&e){var c=h.ic();h.hc(0,"td",5),h.Vc(1),h.gc(),h.hc(2,"td",5),h.Tc(3,yn,3,3,"vdr-chip",6),h.gc(),h.hc(4,"td",7),h.cc(5,"vdr-table-row-action",8),h.sc(6,"translate"),h.gc(),h.hc(7,"td",7),h.hc(8,"vdr-dropdown"),h.hc(9,"button",9),h.Vc(10),h.sc(11,"translate"),h.cc(12,"clr-icon",10),h.gc(),h.hc(13,"vdr-dropdown-menu",11),h.hc(14,"button",12),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteTaxCategory(e)}),h.sc(15,"hasPermission"),h.cc(16,"clr-icon",13),h.Vc(17),h.sc(18,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item;h.Qb(1),h.Wc(n.name),h.Qb(2),h.yc("ngIf",n.isDefault),h.Qb(2),h.yc("label",h.tc(6,7,"common.edit"))("linkTo",h.Cc(15,Cn,n.id)),h.Qb(5),h.Xc(" ",h.tc(11,9,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(15,11,h.Bc(17,kn))),h.Qb(3),h.Xc(" ",h.tc(18,13,"common.delete")," ")}}var Qn=function(){return["CreateSettings","CreateTaxCategory"]},Fn=function(){function e(t,c,n){g(this,e),this.dataService=t,this.notificationService=c,this.modalService=n,this.queryResult=this.dataService.settings.getTaxCategories(),this.taxCategories$=this.queryResult.mapStream(function(e){return e.taxCategories})}return b(e,[{key:"deleteTaxCategory",value:function(e){var t=this;return this.modalService.dialog({title:Object(W.a)("settings.confirm-delete-tax-category"),body:e.name,buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.deleteTaxCategory(e.id):ge.a}),Object(f.a)(function(e){return e.deleteTaxCategory})).subscribe(function(e){e.result===m.t.DELETED?(t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"TaxRate"}),t.queryResult.ref.refetch()):t.notificationService.error(e.message||Object(W.a)("common.notify-delete-error"),{entity:"TaxRate"})},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"TaxRate"})})}}]),e}();Fn.\u0275fac=function(e){return new(e||Fn)(h.bc(m.s),h.bc(m.G),h.bc(m.F))},Fn.\u0275cmp=h.Vb({type:Fn,selectors:[["vdr-tax-list"]],decls:13,vars:8,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,vn,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.sc(5,"async"),h.hc(6,"vdr-dt-column"),h.Vc(7),h.sc(8,"translate"),h.gc(),h.cc(9,"vdr-dt-column"),h.cc(10,"vdr-dt-column"),h.cc(11,"vdr-dt-column"),h.Tc(12,On,19,18,"ng-template"),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions",h.Bc(7,Qn)),h.Qb(1),h.yc("items",h.tc(5,3,t.taxCategories$)),h.Qb(3),h.Wc(h.tc(8,5,"common.name")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,C.o,pe.a,ve.a,ye.a,Ce.a,ke.a,it.a],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var Sn=u("VhYM");function In(e,t){if(1&e){var c=h.ic();h.hc(0,"button",17),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc();h.yc("disabled",!n.saveButtonEnabled()),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.create")," ")}}function Tn(e,t){if(1&e){var c=h.ic();h.hc(0,"button",17),h.pc("click",function(){return h.Lc(c),h.rc(2).save()}),h.Vc(1),h.sc(2,"translate"),h.gc()}if(2&e){var n=h.rc(2);h.yc("disabled",!n.saveButtonEnabled()),h.Qb(1),h.Xc(" ",h.tc(2,2,"common.update")," ")}}function Pn(e,t){if(1&e&&h.Tc(0,Tn,3,4,"button",18),2&e){var c=h.rc();h.yc("vdrIfPermissions",c.updatePermission)}}function jn(e,t){if(1&e&&(h.hc(0,"option",19),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.yc("value",c.id),h.Qb(1),h.Xc(" ",c.name," ")}}function Dn(e,t){if(1&e&&(h.hc(0,"option",19),h.Vc(1),h.gc()),2&e){var c=t.$implicit;h.yc("value",c.id),h.Qb(1),h.Wc(c.name)}}var Vn=function(e){c(n,e);var t=r(n);function n(e,c,r,i,a,o,s){var l;return g(this,n),(l=t.call(this,c,e,r,a)).changeDetector=i,l.dataService=a,l.formBuilder=o,l.notificationService=s,l.updatePermission=[m.H.UpdateSettings,m.H.UpdateTaxRate],l.detailForm=l.formBuilder.group({name:["",O.C.required],enabled:[!0],value:[0,O.C.required],taxCategoryId:[""],zoneId:[""],customerGroupId:[""]}),l}return b(n,[{key:"ngOnInit",value:function(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories().mapSingle(function(e){return e.taxCategories}),this.zones$=this.dataService.settings.getZones().mapSingle(function(e){return e.zones})}},{key:"ngOnDestroy",value:function(){this.destroy()}},{key:"saveButtonEnabled",value:function(){return this.detailForm.dirty&&this.detailForm.valid}},{key:"create",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value,c={name:t.name,enabled:t.enabled,value:t.value,categoryId:t.taxCategoryId,zoneId:t.zoneId,customerGroupId:t.customerGroupId};this.dataService.settings.createTaxRate(c).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"TaxRate"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck(),e.router.navigate(["../",t.createTaxRate.id],{relativeTo:e.route})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"TaxRate"})})}}},{key:"save",value:function(){var e=this;if(this.detailForm.dirty){var t=this.detailForm.value;this.entity$.pipe(Object(E.a)(1),Object(_.a)(function(c){var n={id:c.id,name:t.name,enabled:t.enabled,value:t.value,categoryId:t.taxCategoryId,zoneId:t.zoneId,customerGroupId:t.customerGroupId};return e.dataService.settings.updateTaxRate(n)})).subscribe(function(t){e.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"TaxRate"}),e.detailForm.markAsPristine(),e.changeDetector.markForCheck()},function(t){e.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"TaxRate"})})}}},{key:"setFormValues",value:function(e,t){this.detailForm.patchValue({name:e.name,enabled:e.enabled,value:e.value,taxCategoryId:e.category?e.category.id:"",zoneId:e.zone?e.zone.id:"",customerGroupId:e.customerGroup?e.customerGroup.id:""})}}]),n}(m.l);Vn.\u0275fac=function(e){return new(e||Vn)(h.bc(G.e),h.bc(G.a),h.bc(m.I),h.bc(h.j),h.bc(m.s),h.bc(O.e),h.bc(m.G))},Vn.\u0275cmp=h.Vb({type:Vn,selectors:[["vdr-tax-rate-detail"]],features:[h.Nb],decls:37,vars:44,consts:[[3,"entity"],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["clrSelect","","name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["clrSelect","","name","zoneId","formControlName","zoneId",3,"vdrDisabled"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"value"]],template:function(e,t){if(1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.cc(2,"vdr-entity-info",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.Tc(6,In,3,4,"button",2),h.sc(7,"async"),h.Tc(8,Pn,1,1,"ng-template",null,3,h.Uc),h.gc(),h.gc(),h.hc(10,"form",4),h.hc(11,"vdr-form-field",5),h.sc(12,"translate"),h.cc(13,"input",6),h.sc(14,"hasPermission"),h.gc(),h.hc(15,"vdr-form-field",7),h.sc(16,"translate"),h.hc(17,"clr-toggle-wrapper"),h.cc(18,"input",8),h.sc(19,"hasPermission"),h.gc(),h.gc(),h.hc(20,"vdr-form-field",9),h.sc(21,"translate"),h.hc(22,"vdr-affixed-input",10),h.cc(23,"input",11),h.sc(24,"hasPermission"),h.gc(),h.gc(),h.hc(25,"vdr-form-field",12),h.sc(26,"translate"),h.hc(27,"select",13),h.sc(28,"hasPermission"),h.Tc(29,jn,2,2,"option",14),h.sc(30,"async"),h.gc(),h.gc(),h.hc(31,"vdr-form-field",15),h.sc(32,"translate"),h.hc(33,"select",16),h.sc(34,"hasPermission"),h.Tc(35,Dn,2,2,"option",14),h.sc(36,"async"),h.gc(),h.gc(),h.gc()),2&e){var c=h.Ic(9);h.Qb(2),h.yc("entity",h.tc(3,16,t.entity$)),h.Qb(4),h.yc("ngIf",h.tc(7,18,t.isNew$))("ngIfElse",c),h.Qb(4),h.yc("formGroup",t.detailForm),h.Qb(1),h.yc("label",h.tc(12,20,"common.name")),h.Qb(2),h.yc("readonly",!h.tc(14,22,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(16,24,"common.enabled")),h.Qb(3),h.yc("vdrDisabled",!h.tc(19,26,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(21,28,"settings.rate")),h.Qb(3),h.yc("readonly",!h.tc(24,30,t.updatePermission)),h.Qb(2),h.yc("label",h.tc(26,32,"settings.tax-category")),h.Qb(2),h.yc("vdrDisabled",!h.tc(28,34,t.updatePermission)),h.Qb(2),h.yc("ngForOf",h.tc(30,36,t.taxCategories$)),h.Qb(2),h.yc("label",h.tc(32,38,"settings.zone")),h.Qb(2),h.yc("vdrDisabled",!h.tc(34,40,t.updatePermission)),h.Qb(2),h.yc("ngForOf",h.tc(36,42,t.zones$))}},directives:[U.a,U.b,Z.a,U.c,B.a,C.o,O.E,O.q,O.j,q.a,k.a,O.b,O.p,O.h,S.k,O.a,S.i,Te.a,Sn.a,O.v,O.A,S.A,C.n,ce.a,O.u,O.D],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var wn=function(){return["./create"]};function xn(e,t){1&e&&(h.hc(0,"a",3),h.cc(1,"clr-icon",4),h.Vc(2),h.sc(3,"translate"),h.gc()),2&e&&(h.yc("routerLink",h.Bc(4,wn)),h.Qb(2),h.Xc(" ",h.tc(3,2,"settings.create-new-tax-rate")," "))}var Ln=function(e){return["./",e]},Mn=function(){return["DeleteSettings","DeleteTaxRate"]};function An(e,t){if(1&e){var c=h.ic();h.hc(0,"td",5),h.Vc(1),h.gc(),h.hc(2,"td",5),h.Vc(3),h.gc(),h.hc(4,"td",5),h.Vc(5),h.gc(),h.hc(6,"td",5),h.Vc(7),h.gc(),h.hc(8,"td",6),h.cc(9,"vdr-table-row-action",7),h.sc(10,"translate"),h.gc(),h.hc(11,"td",6),h.hc(12,"vdr-dropdown"),h.hc(13,"button",8),h.Vc(14),h.sc(15,"translate"),h.cc(16,"clr-icon",9),h.gc(),h.hc(17,"vdr-dropdown-menu",10),h.hc(18,"button",11),h.pc("click",function(){h.Lc(c);var e=t.item;return h.rc().deleteTaxRate(e)}),h.sc(19,"hasPermission"),h.cc(20,"clr-icon",12),h.Vc(21),h.sc(22,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.item;h.Qb(1),h.Wc(n.name),h.Qb(2),h.Wc(n.category.name),h.Qb(2),h.Wc(n.zone.name),h.Qb(2),h.Xc("",n.value,"%"),h.Qb(2),h.yc("label",h.tc(10,9,"common.edit"))("linkTo",h.Cc(17,Ln,n.id)),h.Qb(5),h.Xc(" ",h.tc(15,11,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(19,13,h.Bc(19,Mn))),h.Qb(3),h.Xc(" ",h.tc(22,15,"common.delete")," ")}}var $n=function(){return["CreateSettings","CreateTaxRate"]},Nn=function(t){c(i,t);var n=r(i);function i(t,c,r,s,l){var d,u;return g(this,i),(u=n.call(this,s,l)).modalService=t,u.notificationService=c,u.dataService=r,e((d=a(u),o(i.prototype)),"setQueryFn",d).call(d,function(){var e;return(e=u.dataService.settings).getTaxRates.apply(e,arguments)},function(e){return e.taxRates}),u}return b(i,[{key:"deleteTaxRate",value:function(e){var t=this;return this.modalService.dialog({title:Object(W.a)("settings.confirm-delete-tax-rate"),body:e.name,buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.deleteTaxRate(e.id):ge.a}),Object(f.a)(function(e){return e.deleteTaxRate})).subscribe(function(e){e.result===m.t.DELETED?(t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"TaxRate"}),t.refresh()):t.notificationService.error(e.message||Object(W.a)("common.notify-delete-error"),{entity:"TaxRate"})},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"TaxRate"})})}}]),i}(m.n);function Rn(e,t){1&e&&(h.hc(0,"span"),h.Vc(1),h.sc(2,"translate"),h.gc()),2&e&&(h.Qb(1),h.Wc(h.tc(2,1,"settings.update-zone")))}function zn(e,t){1&e&&(h.hc(0,"span"),h.Vc(1),h.sc(2,"translate"),h.gc()),2&e&&(h.Qb(1),h.Wc(h.tc(2,1,"settings.create-zone")))}function Wn(e,t){if(1&e&&(h.Tc(0,Rn,3,3,"span",4),h.Tc(1,zn,3,3,"span",4)),2&e){var c=h.rc();h.yc("ngIf",c.zone.id),h.Qb(1),h.yc("ngIf",!c.zone.id)}}function Xn(e,t){1&e&&(h.hc(0,"span"),h.Vc(1),h.sc(2,"translate"),h.gc()),2&e&&(h.Qb(1),h.Wc(h.tc(2,1,"settings.update-zone")))}function En(e,t){1&e&&(h.hc(0,"span"),h.Vc(1),h.sc(2,"translate"),h.gc()),2&e&&(h.Qb(1),h.Wc(h.tc(2,1,"settings.create-zone")))}function _n(e,t){if(1&e){var c=h.ic();h.hc(0,"button",5),h.pc("click",function(){return h.Lc(c),h.rc().cancel()}),h.Vc(1),h.sc(2,"translate"),h.gc(),h.hc(3,"button",6),h.pc("click",function(){return h.Lc(c),h.rc().save()}),h.Tc(4,Xn,3,3,"span",4),h.Tc(5,En,3,3,"span",4),h.gc()}if(2&e){var n=h.rc();h.Qb(1),h.Wc(h.tc(2,4,"common.cancel")),h.Qb(2),h.yc("disabled",!n.zone.name),h.Qb(1),h.yc("ngIf",n.zone.id),h.Qb(1),h.yc("ngIf",!n.zone.id)}}Nn.\u0275fac=function(e){return new(e||Nn)(h.bc(m.F),h.bc(m.G),h.bc(m.s),h.bc(G.e),h.bc(G.a))},Nn.\u0275cmp=h.Vb({type:Nn,selectors:[["vdr-tax-rate-list"]],features:[h.Nb],decls:24,vars:26,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-right"),h.cc(2,"vdr-action-bar-items",0),h.Tc(3,xn,4,5,"a",1),h.gc(),h.gc(),h.hc(4,"vdr-data-table",2),h.pc("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),h.sc(5,"async"),h.sc(6,"async"),h.sc(7,"async"),h.sc(8,"async"),h.hc(9,"vdr-dt-column"),h.Vc(10),h.sc(11,"translate"),h.gc(),h.hc(12,"vdr-dt-column"),h.Vc(13),h.sc(14,"translate"),h.gc(),h.hc(15,"vdr-dt-column"),h.Vc(16),h.sc(17,"translate"),h.gc(),h.hc(18,"vdr-dt-column"),h.Vc(19),h.sc(20,"translate"),h.gc(),h.cc(21,"vdr-dt-column"),h.cc(22,"vdr-dt-column"),h.Tc(23,An,23,20,"ng-template"),h.gc()),2&e&&(h.Qb(3),h.yc("vdrIfPermissions",h.Bc(25,$n)),h.Qb(1),h.yc("items",h.tc(5,9,t.items$))("itemsPerPage",h.tc(6,11,t.itemsPerPage$))("totalItems",h.tc(7,13,t.totalItems$))("currentPage",h.tc(8,15,t.currentPage$)),h.Qb(6),h.Wc(h.tc(11,17,"common.name")),h.Qb(3),h.Wc(h.tc(14,19,"settings.tax-category")),h.Qb(3),h.Wc(h.tc(17,21,"settings.zone")),h.Qb(3),h.Wc(h.tc(20,23,"settings.tax-rate")))},directives:[U.a,U.c,B.a,ce.a,Q.a,F.a,G.h,S.o,pe.a,ve.a,ye.a,Ce.a,ke.a],pipes:[C.b,I.d,T.a],styles:[""],changeDetection:0});var Gn=function(){return["UpdateSettings","UpdateZone"]},Un=function(){function e(){g(this,e)}return b(e,[{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.zone.name)}}]),e}();Un.\u0275fac=function(e){return new(e||Un)},Un.\u0275cmp=h.Vb({type:Un,selectors:[["vdr-zone-detail-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["for","name",3,"label"],["id","name","type","text",3,"ngModel","readonly","ngModelChange"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(h.Tc(0,Wn,2,2,"ng-template",0),h.hc(1,"vdr-form-field",1),h.sc(2,"translate"),h.hc(3,"input",2),h.pc("ngModelChange",function(e){return t.zone.name=e}),h.sc(4,"hasPermission"),h.gc(),h.gc(),h.Tc(5,_n,6,6,"ng-template",3)),2&e&&(h.Qb(1),h.yc("label",h.tc(2,3,"common.name")),h.Qb(2),h.yc("ngModel",t.zone.name)("readonly",!h.tc(4,5,h.Bc(7,Gn))))},directives:[p.a,q.a,k.a,O.b,O.p,O.s,A.a,C.o],pipes:[I.d,T.a],styles:[""],changeDetection:0});var Zn=u("/uUt"),Bn=u("CqXF");function qn(e,t){if(1&e){var c=h.ic();h.hc(0,"button",7),h.pc("click",function(){return h.Lc(c),h.rc().create()}),h.cc(1,"clr-icon",8),h.Vc(2),h.sc(3,"translate"),h.gc()}2&e&&(h.Qb(2),h.Xc(" ",h.tc(3,1,"settings.create-new-zone")," "))}var Hn=function(e){return{contents:e}},Kn=function(e){return["./",e]},Yn=function(){return["DeleteSettings","DeleteZone"]};function Jn(e,t){if(1&e){var c=h.ic();h.hc(0,"tr"),h.sc(1,"async"),h.hc(2,"td",9),h.cc(3,"vdr-entity-info",10),h.gc(),h.hc(4,"td",9),h.hc(5,"vdr-chip",11),h.Vc(6),h.gc(),h.gc(),h.hc(7,"td",12),h.hc(8,"a",13),h.cc(9,"clr-icon",14),h.Vc(10),h.sc(11,"translate"),h.gc(),h.gc(),h.hc(12,"td",15),h.hc(13,"button",16),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc().update(e)}),h.cc(14,"clr-icon",17),h.Vc(15),h.sc(16,"translate"),h.gc(),h.gc(),h.hc(17,"td",15),h.hc(18,"vdr-dropdown"),h.hc(19,"button",18),h.Vc(20),h.sc(21,"translate"),h.cc(22,"clr-icon",19),h.gc(),h.hc(23,"vdr-dropdown-menu",20),h.hc(24,"button",21),h.pc("click",function(){h.Lc(c);var e=t.$implicit;return h.rc().delete(e.id)}),h.sc(25,"hasPermission"),h.cc(26,"clr-icon",22),h.Vc(27),h.sc(28,"translate"),h.gc(),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n,r=t.$implicit,i=h.rc();h.Tb("active",r.id===(null==(n=h.tc(1,11,i.activeZone$))?null:n.id)),h.Qb(3),h.yc("entity",r),h.Qb(2),h.yc("colorFrom",r.name),h.Qb(1),h.Wc(r.name),h.Qb(2),h.yc("routerLink",h.Cc(25,Kn,h.Cc(23,Hn,r.id))),h.Qb(2),h.Xc(" ",h.tc(11,13,"settings.view-zone-members")," "),h.Qb(5),h.Xc(" ",h.tc(16,15,"common.edit")," "),h.Qb(5),h.Xc(" ",h.tc(21,17,"common.actions")," "),h.Qb(4),h.yc("disabled",!h.tc(25,19,h.Bc(27,Yn))),h.Qb(3),h.Xc(" ",h.tc(28,21,"common.delete")," ")}}var er=function(){return["UpdateSettings","UpdateZone"]},tr=function(e){return{zoneName:e}};function cr(e,t){if(1&e){var c=h.ic();h.hc(0,"div"),h.hc(1,"div",26),h.hc(2,"div",27),h.Vc(3),h.gc(),h.cc(4,"div",28),h.hc(5,"button",29),h.pc("click",function(){return h.Lc(c),h.rc(2).closeMembers()}),h.cc(6,"clr-icon",30),h.gc(),h.gc(),h.hc(7,"div",31),h.hc(8,"vdr-dropdown"),h.hc(9,"button",32),h.Vc(10),h.sc(11,"translate"),h.cc(12,"clr-icon",19),h.gc(),h.hc(13,"vdr-dropdown-menu",20),h.hc(14,"button",33),h.pc("click",function(){h.Lc(c);var e=h.rc().ngIf,t=h.rc();return t.removeFromZone(e,t.selectedMemberIds)}),h.sc(15,"hasPermission"),h.cc(16,"clr-icon",22),h.Vc(17),h.sc(18,"translate"),h.gc(),h.gc(),h.gc(),h.hc(19,"button",34),h.pc("click",function(){h.Lc(c);var e=h.rc().ngIf;return h.rc().addToZone(e)}),h.Vc(20),h.sc(21,"translate"),h.gc(),h.gc(),h.gc()}if(2&e){var n=h.rc().ngIf,r=h.rc();h.Qb(3),h.Yc(" ",n.name," (",n.members.length,") "),h.Qb(6),h.yc("disabled",0===r.selectedMemberIds.length),h.Qb(1),h.Xc(" ",h.tc(11,7,"common.with-selected")," "),h.Qb(4),h.yc("disabled",!h.tc(15,9,h.Bc(16,er))),h.Qb(3),h.Xc(" ",h.tc(18,11,"settings.remove-from-zone")," "),h.Qb(3),h.Xc(" ",h.uc(21,13,"settings.add-countries-to-zone",h.Cc(17,tr,n.name))," ")}}var nr=function(e){return["/settings","countries",e]};function rr(e,t){if(1&e){var c=h.ic();h.hc(0,"div"),h.hc(1,"vdr-dropdown"),h.hc(2,"button",18),h.Vc(3),h.sc(4,"translate"),h.cc(5,"clr-icon",19),h.gc(),h.hc(6,"vdr-dropdown-menu",20),h.hc(7,"a",35),h.cc(8,"clr-icon",17),h.Vc(9),h.sc(10,"translate"),h.gc(),h.hc(11,"button",33),h.pc("click",function(){h.Lc(c);var e=t.member,n=h.rc().ngIf;return h.rc().removeFromZone(n,[e.id])}),h.sc(12,"hasPermission"),h.cc(13,"clr-icon",22),h.Vc(14),h.sc(15,"translate"),h.gc(),h.gc(),h.gc(),h.gc()}if(2&e){var n=t.member;h.Qb(3),h.Xc(" ",h.tc(4,5,"common.actions")," "),h.Qb(4),h.yc("routerLink",h.Cc(13,nr,n.id)),h.Qb(2),h.Xc(" ",h.tc(10,7,"common.edit")," "),h.Qb(2),h.yc("disabled",!h.tc(12,9,h.Bc(15,er))),h.Qb(3),h.Xc(" ",h.tc(15,11,"settings.remove-from-zone")," ")}}function ir(e,t){if(1&e){var c=h.ic();h.fc(0),h.hc(1,"vdr-zone-member-list",23),h.pc("selectionChange",function(e){return h.Lc(c),h.rc().selectedMemberIds=e}),h.Tc(2,cr,22,19,"div",24),h.Tc(3,rr,16,16,"div",25),h.gc(),h.ec()}if(2&e){var n=t.ngIf,r=h.rc();h.Qb(1),h.yc("members",n.members)("selectedMemberIds",r.selectedMemberIds)}}var ar=function(){return["CreateSettings","CreateZone"]},or=function(){function e(t,c,n,r,i){g(this,e),this.dataService=t,this.notificationService=c,this.modalService=n,this.route=r,this.router=i,this.selectedMemberIds=[]}return b(e,[{key:"ngOnInit",value:function(){var e=this;this.zones$=this.dataService.settings.getZones().mapStream(function(e){return e.zones});var t=this.route.paramMap.pipe(Object(f.a)(function(e){return e.get("contents")}),Object(Zn.a)(),Object(rt.a)(function(){return e.selectedMemberIds=[]}));this.activeZone$=Object(Ye.a)(this.zones$,t).pipe(Object(f.a)(function(e){var t=s(e,2),c=t[0],n=t[1];if(n)return c.find(function(e){return e.id===n})}))}},{key:"create",value:function(){var e=this;this.modalService.fromComponent(Un,{locals:{zone:{name:""}}}).pipe(Object(he.a)(function(t){return t?e.dataService.settings.createZone({name:t,memberIds:[]}):ge.a}),Object(he.a)(function(){return e.dataService.settings.getZones().single$})).subscribe(function(){e.notificationService.success(Object(W.a)("common.notify-create-success"),{entity:"Zone"})},function(t){e.notificationService.error(Object(W.a)("common.notify-create-error"),{entity:"Zone"})})}},{key:"delete",value:function(e){var t=this;this.modalService.dialog({title:Object(W.a)("catalog.confirm-delete-zone"),buttons:[{type:"secondary",label:Object(W.a)("common.cancel")},{type:"danger",label:Object(W.a)("common.delete"),returnValue:!0}]}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.deleteZone(e):ge.a}),Object(he.a)(function(e){return e.deleteZone.result===m.t.DELETED?t.dataService.settings.getZones().mapSingle(function(){return{errorMessage:!1}}):Object(Qc.a)({errorMessage:e.deleteZone.message})})).subscribe(function(e){"string"==typeof e.errorMessage?t.notificationService.error(e.errorMessage):t.notificationService.success(Object(W.a)("common.notify-delete-success"),{entity:"Zone"})},function(e){t.notificationService.error(Object(W.a)("common.notify-delete-error"),{entity:"Zone"})})}},{key:"update",value:function(e){var t=this;this.modalService.fromComponent(Un,{locals:{zone:e}}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.updateZone({id:e.id,name:c}):ge.a})).subscribe(function(){t.notificationService.success(Object(W.a)("common.notify-update-success"),{entity:"Zone"})},function(e){t.notificationService.error(Object(W.a)("common.notify-update-error"),{entity:"Zone"})})}},{key:"closeMembers",value:function(){var e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}},{key:"addToZone",value:function(e){var t=this;this.modalService.fromComponent(z,{locals:{zoneName:e.name,currentMembers:e.members},size:"md"}).pipe(Object(he.a)(function(c){return c?t.dataService.settings.addMembersToZone(e.id,c).pipe(Object(Bn.a)(c)):ge.a})).subscribe({next:function(c){t.notificationService.success(Object(W.a)("settings.add-countries-to-zone-success"),{countryCount:c.length,zoneName:e.name})},error:function(e){t.notificationService.error(e)}})}},{key:"removeFromZone",value:function(e,t){var c=this;this.dataService.settings.removeMembersFromZone(e.id,t).subscribe({complete:function(){c.notificationService.success(Object(W.a)("settings.remove-countries-from-zone-success"),{countryCount:t.length,zoneName:e.name})}})}}]),e}();or.\u0275fac=function(e){return new(e||or)(h.bc(m.s),h.bc(m.G),h.bc(m.F),h.bc(G.a),h.bc(G.e))},or.\u0275cmp=h.Vb({type:or,selectors:[["vdr-zone-list"]],decls:14,vars:12,consts:[["locationId","zone-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"zone-wrapper"],[1,"table","zone-list"],[3,"active",4,"ngFor","ngForOf"],[1,"zone-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[3,"members","selectedMemberIds","selectionChange"],[4,"vdrZoneMemberListHeader"],[4,"vdrZoneMemberControls"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],["type","button","vdrDropdownItem","",3,"routerLink"]],template:function(e,t){1&e&&(h.hc(0,"vdr-action-bar"),h.cc(1,"vdr-ab-left"),h.hc(2,"vdr-ab-right"),h.cc(3,"vdr-action-bar-items",0),h.Tc(4,qn,4,3,"button",1),h.gc(),h.gc(),h.hc(5,"div",2),h.hc(6,"table",3),h.hc(7,"tbody"),h.Tc(8,Jn,29,28,"tr",4),h.sc(9,"async"),h.gc(),h.gc(),h.hc(10,"div",5),h.sc(11,"async"),h.Tc(12,ir,4,2,"ng-container",6),h.sc(13,"async"),h.gc(),h.gc()),2&e&&(h.Qb(4),h.yc("vdrIfPermissions",h.Bc(11,ar)),h.Qb(4),h.yc("ngForOf",h.tc(9,5,t.zones$)),h.Qb(2),h.Tb("expanded",h.tc(11,7,t.activeZone$)),h.Qb(2),h.yc("ngIf",h.tc(13,9,t.activeZone$)))},directives:[U.a,U.b,U.c,B.a,ce.a,C.n,C.o,S.o,Z.a,it.a,G.h,ve.a,ye.a,Ce.a,ke.a,M,y,v],pipes:[C.b,I.d,T.a],styles:[".zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0});var sr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},function(e){return c.administrator.getAdministrator(e).mapStream(function(e){return e.administrator})})}return n}(m.m);sr.\u0275fac=function(e){return new(e||sr)(h.lc(G.e),h.lc(m.s))},sr.\u0275prov=h.Xb({token:sr,factory:sr.\u0275fac,providedIn:"root"});var lr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"Channel",id:"",createdAt:"",updatedAt:"",code:"",token:"",pricesIncludeTax:!1,currencyCode:m.q.USD,defaultLanguageCode:Object(m.X)(),defaultShippingZone:{},defaultTaxZone:{}},function(e){return c.settings.getChannel(e).mapStream(function(e){return e.channel})})}return n}(m.m);lr.\u0275fac=function(e){return new(e||lr)(h.lc(G.e),h.lc(m.s))},lr.\u0275prov=h.Xb({token:lr,factory:lr.\u0275fac,providedIn:"root"});var dr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"Country",id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},function(e){return c.settings.getCountry(e).mapStream(function(e){return e.country})})}return n}(m.m);dr.\u0275fac=function(e){return new(e||dr)(h.lc(G.e),h.lc(m.s))},dr.\u0275prov=h.Xb({token:dr,factory:dr.\u0275fac,providedIn:"root"});var ur=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{},function(){return c.settings.getGlobalSettings().mapStream(function(e){return e.globalSettings})})}return n}(m.m);ur.\u0275fac=function(e){return new(e||ur)(h.lc(G.e),h.lc(m.s))},ur.\u0275prov=h.Xb({token:ur,factory:ur.\u0275fac,providedIn:"root"});var mr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"PaymentMethod",id:"",createdAt:"",updatedAt:"",name:"",code:"",description:"",enabled:!0,checker:void 0,handler:void 0},function(e){return c.settings.getPaymentMethod(e).mapStream(function(e){return e.paymentMethod})})}return n}(m.m);mr.\u0275fac=function(e){return new(e||mr)(h.lc(G.e),h.lc(m.s))},mr.\u0275prov=h.Xb({token:mr,factory:mr.\u0275fac,providedIn:"root"});var fr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},function(e){return c.administrator.getActiveAdministrator().mapStream(function(e){return e.activeAdministrator})})}return n}(m.m);fr.\u0275fac=function(e){return new(e||fr)(h.lc(G.e),h.lc(m.s))},fr.\u0275prov=h.Xb({token:fr,factory:fr.\u0275fac,providedIn:"root"});var br=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"Role",id:"",createdAt:"",updatedAt:"",code:"",description:"",permissions:[],channels:[]},function(e){return c.administrator.getRole(e).mapStream(function(e){return e.role})})}return n}(m.m);br.\u0275fac=function(e){return new(e||br)(h.lc(G.e),h.lc(m.s))},br.\u0275prov=h.Xb({token:br,factory:br.\u0275fac,providedIn:"root"});var gr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"ShippingMethod",createdAt:"",updatedAt:"",id:"",code:"",name:"",description:"",fulfillmentHandlerCode:void 0,checker:void 0,calculator:void 0,translations:[]},function(e){return c.shippingMethod.getShippingMethod(e).mapStream(function(e){return e.shippingMethod})})}return n}(m.m);gr.\u0275fac=function(e){return new(e||gr)(h.lc(G.e),h.lc(m.s))},gr.\u0275prov=h.Xb({token:gr,factory:gr.\u0275fac,providedIn:"root"});var hr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"TaxCategory",id:"",createdAt:"",updatedAt:"",name:"",isDefault:!1},function(e){return c.settings.getTaxCategory(e).mapStream(function(e){return e.taxCategory})})}return n}(m.m);hr.\u0275fac=function(e){return new(e||hr)(h.lc(G.e),h.lc(m.s))},hr.\u0275prov=h.Xb({token:hr,factory:hr.\u0275fac,providedIn:"root"});var pr=function(e){c(n,e);var t=r(n);function n(e,c){return g(this,n),t.call(this,e,{__typename:"TaxRate",id:"",createdAt:"",updatedAt:"",name:"",value:0,enabled:!0,category:{},zone:{},customerGroup:null},function(e){return c.settings.getTaxRate(e).mapStream(function(e){return e.taxRate})})}return n}(m.m);pr.\u0275fac=function(e){return new(e||pr)(h.lc(G.e),h.lc(m.s))},pr.\u0275prov=h.Xb({token:pr,factory:pr.\u0275fac,providedIn:"root"});var vr=[{path:"profile",component:Bt,resolve:Object(m.O)(fr),canDeactivate:[m.o],data:{breadcrumb:Object(W.a)("breadcrumb.profile")}},{path:"administrators",component:Ie,data:{breadcrumb:Object(W.a)("breadcrumb.administrators")}},{path:"administrators/:id",component:be,resolve:Object(m.O)(sr),canDeactivate:[m.o],data:{breadcrumb:yr}},{path:"channels",component:Ke,data:{breadcrumb:Object(W.a)("breadcrumb.channels")}},{path:"channels/:id",component:Xe,resolve:Object(m.O)(lr),canDeactivate:[m.o],data:{breadcrumb:Cr}},{path:"roles",component:gc,data:{breadcrumb:Object(W.a)("breadcrumb.roles")}},{path:"roles/:id",component:ec,resolve:Object(m.O)(br),canDeactivate:[m.o],data:{breadcrumb:kr}},{path:"tax-categories",component:Fn,data:{breadcrumb:Object(W.a)("breadcrumb.tax-categories")}},{path:"tax-categories/:id",component:hn,resolve:Object(m.O)(hr),canDeactivate:[m.o],data:{breadcrumb:Or}},{path:"tax-rates",component:Nn,data:{breadcrumb:Object(W.a)("breadcrumb.tax-rates")}},{path:"tax-rates/:id",component:Vn,resolve:Object(m.O)(pr),canDeactivate:[m.o],data:{breadcrumb:Qr}},{path:"countries",component:gt,data:{breadcrumb:Object(W.a)("breadcrumb.countries")}},{path:"countries/:id",component:nt,resolve:Object(m.O)(dr),canDeactivate:[m.o],data:{breadcrumb:Fr}},{path:"zones",component:or,data:{breadcrumb:Object(W.a)("breadcrumb.zones")}},{path:"shipping-methods",component:mn,data:{breadcrumb:Object(W.a)("breadcrumb.shipping-methods")}},{path:"shipping-methods/:id",component:nn,resolve:Object(m.O)(gr),canDeactivate:[m.o],data:{breadcrumb:Sr}},{path:"payment-methods",component:Et,data:{breadcrumb:Object(W.a)("breadcrumb.payment-methods")}},{path:"payment-methods/:id",component:At,resolve:Object(m.O)(mr),canDeactivate:[m.o],data:{breadcrumb:Ir}},{path:"global-settings",component:Ot,resolve:Object(m.O)(ur),canDeactivate:[m.o],data:{breadcrumb:Object(W.a)("breadcrumb.global-settings")}}];function yr(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.administrators",getName:function(e){return"".concat(e.firstName," ").concat(e.lastName)},route:"administrators"})}function Cr(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.channels",getName:function(e){return e.code},route:"channels"})}function kr(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.roles",getName:function(e){return e.description},route:"roles"})}function Or(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-categories",getName:function(e){return e.name},route:"tax-categories"})}function Qr(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.tax-rates",getName:function(e){return e.name},route:"tax-rates"})}function Fr(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.countries",getName:function(e){return e.name},route:"countries"})}function Sr(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.shipping-methods",getName:function(e){return e.name},route:"shipping-methods"})}function Ir(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.payment-methods",getName:function(e){return e.code},route:"payment-methods"})}var Tr=function e(){g(this,e)};Tr.\u0275fac=function(e){return new(e||Tr)},Tr.\u0275mod=h.Zb({type:Tr}),Tr.\u0275inj=h.Yb({imports:[[m.J,G.i.forChild(vr)]]})}}])}();
//# sourceMappingURL=12-es5.efe3d5dbaaf38fe5ec6c.js.map