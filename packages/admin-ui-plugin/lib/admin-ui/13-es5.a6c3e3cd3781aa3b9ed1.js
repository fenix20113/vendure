!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,c){if(!t)return;if("string"==typeof t)return e(t,c);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,c)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var c=0,n=new Array(e);c<e;c++)n[c]=t[c];return n}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var c,n=s(t);if(e){var a=s(this).constructor;c=Reflect.construct(n,arguments,a)}else c=n.apply(this,arguments);return r(this,c)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e,c){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,c){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(c):r.value}})(t,e,c||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,c){return e&&i(t.prototype,e),c&&i(t,c),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"5PN2":function(e,r,i){"use strict";i.r(r),i.d(r,"HealthCheckComponent",function(){return P}),i.d(r,"JobListComponent",function(){return rt}),i.d(r,"JobStateLabelComponent",function(){return A}),i.d(r,"SystemModule",function(){return st}),i.d(r,"systemRoutes",function(){return ot});var d=i("t9nd"),h=i("fXoL"),b=i("uEVm"),f=i("ofXK"),g=i("nqNv"),p=i("8MG2"),m=i("2/wi"),y=i("sYmb"),v=i("HMPB");function j(t,e){1&t&&(h.fc(0),h.Vc(1),h.sc(2,"translate"),h.ec()),2&t&&(h.Qb(1),h.Xc(" ",h.tc(2,1,"system.health-all-systems-up")," "))}function w(t,e){1&t&&(h.Vc(0),h.sc(1,"translate")),2&t&&h.Xc(" ",h.tc(1,1,"system.health-error")," ")}var Q=function(t,e){return{"is-success":t,"is-danger":e}};function I(t,e){if(1&t&&(h.hc(0,"div",7),h.hc(1,"div",8),h.cc(2,"clr-icon",9),h.gc(),h.hc(3,"div",10),h.Tc(4,j,3,3,"ng-container",11),h.Tc(5,w,2,3,"ng-template",null,12,h.Uc),h.hc(7,"div",13),h.Vc(8),h.sc(9,"translate"),h.sc(10,"localeDate"),h.sc(11,"async"),h.gc(),h.gc(),h.gc()),2&t){var c=e.ngIf,n=h.Ic(6),r=h.rc();h.Qb(2),h.yc("ngClass",h.Dc(13,Q,"ok"===c,"ok"!==c)),h.Rb("shape","ok"===c?"check-circle":"exclamation-circle"),h.Qb(2),h.yc("ngIf","ok"===c)("ngIfElse",n),h.Qb(4),h.Yc(" ",h.tc(9,6,"system.health-last-checked"),": ",h.uc(10,8,h.tc(11,11,r.healthCheckService.lastCheck$),"mediumTime")," ")}}function k(t,e){1&t&&(h.fc(0),h.cc(1,"clr-icon",17),h.Vc(2),h.sc(3,"translate"),h.ec()),2&t&&(h.Qb(2),h.Xc(" ",h.tc(3,1,"system.health-status-up")," "))}function C(t,e){1&t&&(h.cc(0,"clr-icon",18),h.Vc(1),h.sc(2,"translate")),2&t&&(h.Qb(1),h.Xc(" ",h.tc(2,1,"system.health-status-down")," "))}function O(t,e){if(1&t&&(h.hc(0,"tr"),h.hc(1,"td",14),h.Vc(2),h.gc(),h.hc(3,"td",14),h.hc(4,"vdr-chip",15),h.Tc(5,k,4,3,"ng-container",11),h.Tc(6,C,3,3,"ng-template",null,16,h.Uc),h.gc(),h.gc(),h.hc(8,"td",14),h.Vc(9),h.gc(),h.gc()),2&t){var c=e.$implicit,n=h.Ic(7);h.Qb(2),h.Wc(c.key),h.Qb(2),h.yc("colorType","up"===c.result.status?"success":"error"),h.Qb(1),h.yc("ngIf","up"===c.result.status)("ngIfElse",n),h.Qb(4),h.Wc(c.result.message)}}var P=function t(e){u(this,t),this.healthCheckService=e};P.\u0275fac=function(t){return new(t||P)(h.bc(d.x))},P.\u0275cmp=h.Vb({type:P,selectors:[["vdr-health-check"]],decls:25,vars:18,consts:[["class","system-status-header",4,"ngIf"],["locationId","system-status"],[1,"btn","btn-secondary",3,"click"],["shape","refresh"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"],[1,"system-status-header"],[1,"status-icon"],["size","48",3,"ngClass"],[1,"status-detail"],[4,"ngIf","ngIfElse"],["error",""],[1,"last-checked"],[1,"align-middle","left"],[3,"colorType"],["down",""],["shape","check-circle"],["shape","exclamation-circle"]],template:function(t,e){1&t&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.Tc(2,I,12,16,"div",0),h.sc(3,"async"),h.gc(),h.hc(4,"vdr-ab-right"),h.cc(5,"vdr-action-bar-items",1),h.hc(6,"button",2),h.pc("click",function(){return e.healthCheckService.refresh()}),h.cc(7,"clr-icon",3),h.Vc(8),h.sc(9,"translate"),h.gc(),h.gc(),h.gc(),h.hc(10,"table",4),h.hc(11,"thead"),h.hc(12,"tr"),h.hc(13,"th",5),h.Vc(14),h.sc(15,"translate"),h.gc(),h.hc(16,"th",5),h.Vc(17),h.sc(18,"translate"),h.gc(),h.hc(19,"th",5),h.Vc(20),h.sc(21,"translate"),h.gc(),h.gc(),h.gc(),h.hc(22,"tbody"),h.Tc(23,O,10,5,"tr",6),h.sc(24,"async"),h.gc(),h.gc()),2&t&&(h.Qb(2),h.yc("ngIf",h.tc(3,6,e.healthCheckService.status$)),h.Qb(6),h.Xc(" ",h.tc(9,8,"system.health-refresh")," "),h.Qb(6),h.Xc(" ",h.tc(15,10,"common.name")," "),h.Qb(3),h.Xc(" ",h.tc(18,12,"system.health-status")," "),h.Qb(3),h.Xc(" ",h.tc(21,14,"system.health-message")," "),h.Qb(3),h.yc("ngForOf",h.tc(24,16,e.healthCheckService.details$)))},directives:[b.a,b.b,f.o,b.c,g.a,p.o,f.n,f.m,m.a],pipes:[f.b,y.d,v.a],styles:[".system-status-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start}.system-status-header[_ngcontent-%COMP%]   .status-detail[_ngcontent-%COMP%]{font-weight:700}.system-status-header[_ngcontent-%COMP%]   .last-checked[_ngcontent-%COMP%]{font-weight:400;color:var(--color-grey-500)}"],changeDetection:0});var V=i("3Pt+"),T=i("PqYM"),S=i("1G5W"),E=i("pLZG"),N=i("lJxs"),D=i("tyNb"),x=i("Bzlx"),R=i("ZOsW"),B=i("CotX"),F=i("r2d8"),X=i("iszU");function q(t,e){if(1&t&&(h.hc(0,"span",2),h.Vc(1),h.sc(2,"percent"),h.gc()),2&t){var c=h.rc();h.Qb(1),h.Xc(" ",h.tc(2,1,c.job.progress/100)," ")}}var A=function(){function t(){u(this,t)}return l(t,[{key:"iconShape",get:function(){switch(this.job.state){case d.B.COMPLETED:return"check-circle";case d.B.FAILED:return"exclamation-circle";case d.B.CANCELLED:return"ban";case d.B.PENDING:case d.B.RETRYING:return"hourglass";case d.B.RUNNING:return"sync"}}},{key:"colorType",get:function(){switch(this.job.state){case d.B.COMPLETED:return"success";case d.B.FAILED:case d.B.CANCELLED:return"error";case d.B.PENDING:case d.B.RETRYING:return"";case d.B.RUNNING:return"warning"}}}]),t}();A.\u0275fac=function(t){return new(t||A)},A.\u0275cmp=h.Vb({type:A,selectors:[["vdr-job-state-label"]],inputs:{job:"job"},decls:5,vars:6,consts:[[3,"colorType"],["class","progress",4,"ngIf"],[1,"progress"]],template:function(t,e){1&t&&(h.hc(0,"vdr-chip",0),h.cc(1,"clr-icon"),h.Vc(2),h.sc(3,"titlecase"),h.Tc(4,q,3,3,"span",1),h.gc()),2&t&&(h.yc("colorType",e.colorType),h.Qb(1),h.Rb("shape",e.iconShape),h.Qb(1),h.Xc(" ",h.tc(3,4,e.job.state)," "),h.Qb(2),h.yc("ngIf","RUNNING"===e.job.state))},directives:[m.a,p.o,f.o],pipes:[f.y,f.v],styles:[".progress[_ngcontent-%COMP%]{margin-left:3px}clr-icon[_ngcontent-%COMP%]{min-width:12px}"],changeDetection:0});var L=i("zzDm"),M=i("eBFp"),_=i("IKcI"),W=i("2zLM"),J=i("EFLa"),$=i("uHMJ"),G=i("6qAB"),U=i("V0to");function z(t,e){1&t&&(h.fc(0),h.Vc(1),h.sc(2,"translate"),h.ec()),2&t&&(h.Qb(1),h.Xc(" ",h.tc(2,1,"system.all-job-queues")," "))}function Y(t,e){if(1&t&&(h.hc(0,"vdr-chip",8),h.Vc(1),h.gc()),2&t){var c=h.rc().item;h.yc("colorFrom",c.name),h.Qb(1),h.Wc(c.name)}}function H(t,e){if(1&t&&(h.Tc(0,z,3,3,"ng-container",6),h.Tc(1,Y,2,2,"ng-template",null,7,h.Uc)),2&t){var c=e.item,n=h.Ic(2);h.yc("ngIf","all"===c.name)("ngIfElse",n)}}function K(t,e){if(1&t&&(h.hc(0,"vdr-dropdown"),h.hc(1,"button",14),h.sc(2,"translate"),h.cc(3,"clr-icon",15),h.gc(),h.hc(4,"vdr-dropdown-menu"),h.hc(5,"div",16),h.cc(6,"vdr-object-tree",17),h.gc(),h.gc(),h.gc()),2&t){var c=h.rc().item;h.Qb(1),h.yc("title",h.tc(2,2,"system.job-data")),h.Qb(5),h.yc("value",c.data)}}function Z(t,e){if(1&t&&(h.hc(0,"vdr-dropdown"),h.hc(1,"button",18),h.cc(2,"clr-icon",15),h.Vc(3),h.sc(4,"translate"),h.gc(),h.hc(5,"vdr-dropdown-menu"),h.hc(6,"div",16),h.cc(7,"vdr-object-tree",17),h.gc(),h.gc(),h.gc()),2&t){var c=h.rc().item;h.Qb(3),h.Xc(" ",h.tc(4,2,"system.job-result")," "),h.Qb(4),h.yc("value",c.result)}}function tt(t,e){if(1&t&&(h.hc(0,"vdr-dropdown"),h.hc(1,"button",18),h.cc(2,"clr-icon",19),h.Vc(3),h.sc(4,"translate"),h.gc(),h.hc(5,"vdr-dropdown-menu"),h.hc(6,"div",16),h.Vc(7),h.gc(),h.gc(),h.gc()),2&t){var c=h.rc().item;h.Qb(3),h.Xc(" ",h.tc(4,2,"system.job-error")," "),h.Qb(4),h.Xc(" ",c.error," ")}}var et=function(){return["DeleteSettings","DeleteSystem"]};function ct(t,e){if(1&t){var c=h.ic();h.hc(0,"vdr-dropdown"),h.hc(1,"button",20),h.cc(2,"clr-icon",21),h.gc(),h.hc(3,"vdr-dropdown-menu",22),h.hc(4,"button",23),h.pc("click",function(){h.Lc(c);var t=h.rc().item;return h.rc().cancelJob(t.id)}),h.sc(5,"hasPermission"),h.cc(6,"clr-icon",24),h.Vc(7),h.sc(8,"translate"),h.gc(),h.gc(),h.gc()}2&t&&(h.Qb(4),h.yc("disabled",!h.tc(5,2,h.Bc(6,et))),h.Qb(3),h.Xc(" ",h.tc(8,4,"common.cancel")," "))}function nt(t,e){if(1&t&&(h.hc(0,"td",9),h.cc(1,"vdr-entity-info",10),h.gc(),h.hc(2,"td",9),h.Tc(3,K,7,4,"vdr-dropdown",11),h.hc(4,"vdr-chip",8),h.Vc(5),h.gc(),h.gc(),h.hc(6,"td",9),h.Vc(7),h.sc(8,"timeAgo"),h.gc(),h.hc(9,"td",9),h.cc(10,"vdr-job-state-label",12),h.gc(),h.hc(11,"td",9),h.Vc(12),h.sc(13,"duration"),h.gc(),h.hc(14,"td",9),h.Tc(15,Z,8,4,"vdr-dropdown",11),h.Tc(16,tt,8,4,"vdr-dropdown",11),h.gc(),h.hc(17,"td",13),h.Tc(18,ct,9,7,"vdr-dropdown",11),h.gc()),2&t){var c=e.item,n=h.rc();h.Qb(1),h.yc("entity",c),h.Qb(2),h.yc("ngIf",c.data),h.Qb(1),h.yc("colorFrom",c.queueName),h.Qb(1),h.Wc(c.queueName),h.Qb(2),h.Wc(h.tc(8,10,c.createdAt)),h.Qb(3),h.yc("job",c),h.Qb(2),h.Wc(h.tc(13,12,c.duration)),h.Qb(3),h.yc("ngIf",n.hasResult(c)),h.Qb(1),h.yc("ngIf",c.error),h.Qb(2),h.yc("ngIf",!c.isSettled&&"FAILED"!==c.state)}}var rt=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(i,e);var r=n(i);function i(t,e,c,n,l){var h,b;return u(this,i),(b=r.call(this,n,l)).dataService=t,b.modalService=e,b.notificationService=c,b.liveUpdate=new V.f(!0),b.hideSettled=new V.f(!0),b.queueFilter=new V.f("all"),o((h=a(b),s(i.prototype)),"setQueryFn",h).call(h,function(){var t;return(t=b.dataService.settings).getAllJobs.apply(t,arguments)},function(t){return t.jobs},function(t,e){var c="all"===b.queueFilter.value?null:{queueName:{eq:b.queueFilter.value}},n=b.hideSettled.value;return{options:{skip:t,take:e,filter:Object.assign(Object.assign({},c),n?{isSettled:{eq:!1}}:{}),sort:{createdAt:d.L.DESC}}}}),b}return l(i,[{key:"ngOnInit",value:function(){var e=this;o(s(i.prototype),"ngOnInit",this).call(this),Object(T.a)(5e3,2e3).pipe(Object(S.a)(this.destroy$),Object(E.a)(function(){return e.liveUpdate.value})).subscribe(function(){e.refresh()}),this.queues$=this.dataService.settings.getJobQueues().mapStream(function(t){return t.jobQueues}).pipe(Object(N.a)(function(e){return[{name:"all",running:!0}].concat(t(e))}))}},{key:"hasResult",value:function(t){var e=t.result;return null!=e&&("object"!=typeof e||Object.keys(e).length>0)}},{key:"cancelJob",value:function(t){var e=this;this.dataService.settings.cancelJob(t).subscribe(function(){return e.refresh()})}}]),i}(d.n);rt.\u0275fac=function(t){return new(t||rt)(h.bc(d.s),h.bc(d.F),h.bc(d.G),h.bc(D.e),h.bc(D.a))},rt.\u0275cmp=h.Vb({type:rt,selectors:[["vdr-job-list"]],features:[h.Nb],decls:41,vars:45,consts:[["type","checkbox","clrCheckbox","","name","live-update",3,"formControl"],["type","checkbox","clrCheckbox","","name","hide-settled",3,"formControl","change"],["bindValue","name",3,"addTag","items","hideSelected","multiple","markFirst","clearable","searchable","formControl","change"],["ng-label-tmp","","ng-option-tmp",""],["locationId","job-list"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[4,"ngIf","ngIfElse"],["others",""],[3,"colorFrom"],[1,"left","align-middle"],[3,"entity"],[4,"ngIf"],[3,"job"],[1,"right","align-middle"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-icon",3,"title"],["shape","details"],[1,"result-detail"],[3,"value"],["vdrDropdownTrigger","",1,"btn","btn-link","btn-sm","details-button"],["shape","exclamation-circle"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","ban",1,"is-danger"]],template:function(t,e){1&t&&(h.hc(0,"vdr-action-bar"),h.hc(1,"vdr-ab-left"),h.hc(2,"clr-checkbox-container"),h.hc(3,"clr-checkbox-wrapper"),h.cc(4,"input",0),h.hc(5,"label"),h.Vc(6),h.sc(7,"translate"),h.gc(),h.gc(),h.hc(8,"clr-checkbox-wrapper"),h.hc(9,"input",1),h.pc("change",function(){return e.refresh()}),h.gc(),h.hc(10,"label"),h.Vc(11),h.sc(12,"translate"),h.gc(),h.gc(),h.gc(),h.gc(),h.hc(13,"vdr-ab-right"),h.hc(14,"ng-select",2),h.pc("change",function(){return e.refresh()}),h.sc(15,"async"),h.Tc(16,H,3,2,"ng-template",3),h.gc(),h.cc(17,"vdr-action-bar-items",4),h.gc(),h.gc(),h.hc(18,"vdr-data-table",5),h.pc("pageChange",function(t){return e.setPageNumber(t)})("itemsPerPageChange",function(t){return e.setItemsPerPage(t)}),h.sc(19,"async"),h.sc(20,"async"),h.sc(21,"async"),h.sc(22,"async"),h.cc(23,"vdr-dt-column"),h.hc(24,"vdr-dt-column"),h.Vc(25),h.sc(26,"translate"),h.gc(),h.hc(27,"vdr-dt-column"),h.Vc(28),h.sc(29,"translate"),h.gc(),h.hc(30,"vdr-dt-column"),h.Vc(31),h.sc(32,"translate"),h.gc(),h.hc(33,"vdr-dt-column"),h.Vc(34),h.sc(35,"translate"),h.gc(),h.hc(36,"vdr-dt-column"),h.Vc(37),h.sc(38,"translate"),h.gc(),h.cc(39,"vdr-dt-column"),h.Tc(40,nt,19,14,"ng-template"),h.gc()),2&t&&(h.Qb(4),h.yc("formControl",e.liveUpdate),h.Qb(2),h.Wc(h.tc(7,21,"common.live-update")),h.Qb(3),h.yc("formControl",e.hideSettled),h.Qb(2),h.Wc(h.tc(12,23,"system.hide-settled-jobs")),h.Qb(3),h.yc("addTag",!1)("items",h.tc(15,25,e.queues$))("hideSelected",!0)("multiple",!1)("markFirst",!1)("clearable",!1)("searchable",!1)("formControl",e.queueFilter),h.Qb(4),h.yc("items",h.tc(19,27,e.items$))("itemsPerPage",h.tc(20,29,e.itemsPerPage$))("totalItems",h.tc(21,31,e.totalItems$))("currentPage",h.tc(22,33,e.currentPage$)),h.Qb(7),h.Wc(h.tc(26,35,"system.job-queue-name")),h.Qb(3),h.Wc(h.tc(29,37,"common.created-at")),h.Qb(3),h.Wc(h.tc(32,39,"system.job-state")),h.Qb(3),h.Wc(h.tc(35,41,"system.job-duration")),h.Qb(3),h.Wc(h.tc(38,43,"system.job-result")))},directives:[b.a,b.b,p.j,p.k,x.a,V.a,p.i,V.p,V.g,p.u,b.c,R.a,R.e,R.d,g.a,B.a,F.a,f.o,m.a,X.a,A,L.a,M.a,p.o,_.a,W.a,J.a],pipes:[y.d,f.b,$.a,G.a,U.a],styles:[".result-detail[_ngcontent-%COMP%]{margin:0 12px}"],changeDetection:0});var at=i("OxKu"),ot=[{path:"jobs",component:rt,data:{breadcrumb:Object(at.a)("breadcrumb.job-queue")}},{path:"system-status",component:P,data:{breadcrumb:Object(at.a)("breadcrumb.system-status")}}],st=function t(){u(this,t)};st.\u0275fac=function(t){return new(t||st)},st.\u0275mod=h.Zb({type:st}),st.\u0275inj=h.Yb({imports:[[d.J,D.i.forChild(ot)]]})}}])}();
//# sourceMappingURL=13-es5.a6c3e3cd3781aa3b9ed1.js.map