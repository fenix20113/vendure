!function(){function e(t,c,r){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(c):n.value}})(t,c,r||t)}function t(e,t){var c;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(c=d(e))||t&&e&&"number"==typeof e.length){c&&(e=c);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){c=e[Symbol.iterator]()},n:function(){var e=c.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==c.return||c.return()}finally{if(o)throw a}}}}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var c,r=o(e);if(t){var n=o(this).constructor;c=Reflect.construct(r,arguments,n)}else c=r.apply(this,arguments);return a(this,c)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var c=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(c.push(s.value),!t||c.length!==t);r=!0);}catch(i){n=!0,a=i}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return c}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,r=new Array(t);c<t;c++)r[c]=e[c];return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var c=0;c<t.length;c++){var r=t[c];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,c){return t&&f(e.prototype,t),c&&f(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"Tn/u":function(e,t,c){"use strict";var r,n,a,s,o,i,u,l,d,m,p;Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageCode=t.HistoryEntryType=t.CurrencyCode=t.LogicalOperator=t.ErrorCode=t.SortOrder=t.Permission=t.DeletionResult=t.AdjustmentType=t.GlobalFlag=t.AssetType=void 0,(p=t.AssetType||(t.AssetType={})).IMAGE="IMAGE",p.VIDEO="VIDEO",p.BINARY="BINARY",(m=t.GlobalFlag||(t.GlobalFlag={})).TRUE="TRUE",m.FALSE="FALSE",m.INHERIT="INHERIT",(d=t.AdjustmentType||(t.AdjustmentType={})).PROMOTION="PROMOTION",d.DISTRIBUTED_ORDER_PROMOTION="DISTRIBUTED_ORDER_PROMOTION",(l=t.DeletionResult||(t.DeletionResult={})).DELETED="DELETED",l.NOT_DELETED="NOT_DELETED",(u=t.Permission||(t.Permission={})).Authenticated="Authenticated",u.SuperAdmin="SuperAdmin",u.Owner="Owner",u.Public="Public",u.UpdateGlobalSettings="UpdateGlobalSettings",u.CreateCatalog="CreateCatalog",u.ReadCatalog="ReadCatalog",u.UpdateCatalog="UpdateCatalog",u.DeleteCatalog="DeleteCatalog",u.CreateSettings="CreateSettings",u.ReadSettings="ReadSettings",u.UpdateSettings="UpdateSettings",u.DeleteSettings="DeleteSettings",u.CreateAdministrator="CreateAdministrator",u.ReadAdministrator="ReadAdministrator",u.UpdateAdministrator="UpdateAdministrator",u.DeleteAdministrator="DeleteAdministrator",u.CreateAsset="CreateAsset",u.ReadAsset="ReadAsset",u.UpdateAsset="UpdateAsset",u.DeleteAsset="DeleteAsset",u.CreateChannel="CreateChannel",u.ReadChannel="ReadChannel",u.UpdateChannel="UpdateChannel",u.DeleteChannel="DeleteChannel",u.CreateCollection="CreateCollection",u.ReadCollection="ReadCollection",u.UpdateCollection="UpdateCollection",u.DeleteCollection="DeleteCollection",u.CreateCountry="CreateCountry",u.ReadCountry="ReadCountry",u.UpdateCountry="UpdateCountry",u.DeleteCountry="DeleteCountry",u.CreateCustomer="CreateCustomer",u.ReadCustomer="ReadCustomer",u.UpdateCustomer="UpdateCustomer",u.DeleteCustomer="DeleteCustomer",u.CreateCustomerGroup="CreateCustomerGroup",u.ReadCustomerGroup="ReadCustomerGroup",u.UpdateCustomerGroup="UpdateCustomerGroup",u.DeleteCustomerGroup="DeleteCustomerGroup",u.CreateFacet="CreateFacet",u.ReadFacet="ReadFacet",u.UpdateFacet="UpdateFacet",u.DeleteFacet="DeleteFacet",u.CreateOrder="CreateOrder",u.ReadOrder="ReadOrder",u.UpdateOrder="UpdateOrder",u.DeleteOrder="DeleteOrder",u.CreatePaymentMethod="CreatePaymentMethod",u.ReadPaymentMethod="ReadPaymentMethod",u.UpdatePaymentMethod="UpdatePaymentMethod",u.DeletePaymentMethod="DeletePaymentMethod",u.CreateProduct="CreateProduct",u.ReadProduct="ReadProduct",u.UpdateProduct="UpdateProduct",u.DeleteProduct="DeleteProduct",u.CreatePromotion="CreatePromotion",u.ReadPromotion="ReadPromotion",u.UpdatePromotion="UpdatePromotion",u.DeletePromotion="DeletePromotion",u.CreateShippingMethod="CreateShippingMethod",u.ReadShippingMethod="ReadShippingMethod",u.UpdateShippingMethod="UpdateShippingMethod",u.DeleteShippingMethod="DeleteShippingMethod",u.CreateTag="CreateTag",u.ReadTag="ReadTag",u.UpdateTag="UpdateTag",u.DeleteTag="DeleteTag",u.CreateTaxCategory="CreateTaxCategory",u.ReadTaxCategory="ReadTaxCategory",u.UpdateTaxCategory="UpdateTaxCategory",u.DeleteTaxCategory="DeleteTaxCategory",u.CreateTaxRate="CreateTaxRate",u.ReadTaxRate="ReadTaxRate",u.UpdateTaxRate="UpdateTaxRate",u.DeleteTaxRate="DeleteTaxRate",u.CreateSystem="CreateSystem",u.ReadSystem="ReadSystem",u.UpdateSystem="UpdateSystem",u.DeleteSystem="DeleteSystem",u.CreateZone="CreateZone",u.ReadZone="ReadZone",u.UpdateZone="UpdateZone",u.DeleteZone="DeleteZone",(i=t.SortOrder||(t.SortOrder={})).ASC="ASC",i.DESC="DESC",(o=t.ErrorCode||(t.ErrorCode={})).UNKNOWN_ERROR="UNKNOWN_ERROR",o.NATIVE_AUTH_STRATEGY_ERROR="NATIVE_AUTH_STRATEGY_ERROR",o.INVALID_CREDENTIALS_ERROR="INVALID_CREDENTIALS_ERROR",o.ORDER_STATE_TRANSITION_ERROR="ORDER_STATE_TRANSITION_ERROR",o.EMAIL_ADDRESS_CONFLICT_ERROR="EMAIL_ADDRESS_CONFLICT_ERROR",o.ORDER_LIMIT_ERROR="ORDER_LIMIT_ERROR",o.NEGATIVE_QUANTITY_ERROR="NEGATIVE_QUANTITY_ERROR",o.INSUFFICIENT_STOCK_ERROR="INSUFFICIENT_STOCK_ERROR",o.ORDER_MODIFICATION_ERROR="ORDER_MODIFICATION_ERROR",o.INELIGIBLE_SHIPPING_METHOD_ERROR="INELIGIBLE_SHIPPING_METHOD_ERROR",o.ORDER_PAYMENT_STATE_ERROR="ORDER_PAYMENT_STATE_ERROR",o.INELIGIBLE_PAYMENT_METHOD_ERROR="INELIGIBLE_PAYMENT_METHOD_ERROR",o.PAYMENT_FAILED_ERROR="PAYMENT_FAILED_ERROR",o.PAYMENT_DECLINED_ERROR="PAYMENT_DECLINED_ERROR",o.COUPON_CODE_INVALID_ERROR="COUPON_CODE_INVALID_ERROR",o.COUPON_CODE_EXPIRED_ERROR="COUPON_CODE_EXPIRED_ERROR",o.COUPON_CODE_LIMIT_ERROR="COUPON_CODE_LIMIT_ERROR",o.ALREADY_LOGGED_IN_ERROR="ALREADY_LOGGED_IN_ERROR",o.MISSING_PASSWORD_ERROR="MISSING_PASSWORD_ERROR",o.PASSWORD_ALREADY_SET_ERROR="PASSWORD_ALREADY_SET_ERROR",o.VERIFICATION_TOKEN_INVALID_ERROR="VERIFICATION_TOKEN_INVALID_ERROR",o.VERIFICATION_TOKEN_EXPIRED_ERROR="VERIFICATION_TOKEN_EXPIRED_ERROR",o.IDENTIFIER_CHANGE_TOKEN_INVALID_ERROR="IDENTIFIER_CHANGE_TOKEN_INVALID_ERROR",o.IDENTIFIER_CHANGE_TOKEN_EXPIRED_ERROR="IDENTIFIER_CHANGE_TOKEN_EXPIRED_ERROR",o.PASSWORD_RESET_TOKEN_INVALID_ERROR="PASSWORD_RESET_TOKEN_INVALID_ERROR",o.PASSWORD_RESET_TOKEN_EXPIRED_ERROR="PASSWORD_RESET_TOKEN_EXPIRED_ERROR",o.NOT_VERIFIED_ERROR="NOT_VERIFIED_ERROR",o.NO_ACTIVE_ORDER_ERROR="NO_ACTIVE_ORDER_ERROR",(s=t.LogicalOperator||(t.LogicalOperator={})).AND="AND",s.OR="OR",(a=t.CurrencyCode||(t.CurrencyCode={})).AED="AED",a.AFN="AFN",a.ALL="ALL",a.AMD="AMD",a.ANG="ANG",a.AOA="AOA",a.ARS="ARS",a.AUD="AUD",a.AWG="AWG",a.AZN="AZN",a.BAM="BAM",a.BBD="BBD",a.BDT="BDT",a.BGN="BGN",a.BHD="BHD",a.BIF="BIF",a.BMD="BMD",a.BND="BND",a.BOB="BOB",a.BRL="BRL",a.BSD="BSD",a.BTN="BTN",a.BWP="BWP",a.BYN="BYN",a.BZD="BZD",a.CAD="CAD",a.CDF="CDF",a.CHF="CHF",a.CLP="CLP",a.CNY="CNY",a.COP="COP",a.CRC="CRC",a.CUC="CUC",a.CUP="CUP",a.CVE="CVE",a.CZK="CZK",a.DJF="DJF",a.DKK="DKK",a.DOP="DOP",a.DZD="DZD",a.EGP="EGP",a.ERN="ERN",a.ETB="ETB",a.EUR="EUR",a.FJD="FJD",a.FKP="FKP",a.GBP="GBP",a.GEL="GEL",a.GHS="GHS",a.GIP="GIP",a.GMD="GMD",a.GNF="GNF",a.GTQ="GTQ",a.GYD="GYD",a.HKD="HKD",a.HNL="HNL",a.HRK="HRK",a.HTG="HTG",a.HUF="HUF",a.IDR="IDR",a.ILS="ILS",a.INR="INR",a.IQD="IQD",a.IRR="IRR",a.ISK="ISK",a.JMD="JMD",a.JOD="JOD",a.JPY="JPY",a.KES="KES",a.KGS="KGS",a.KHR="KHR",a.KMF="KMF",a.KPW="KPW",a.KRW="KRW",a.KWD="KWD",a.KYD="KYD",a.KZT="KZT",a.LAK="LAK",a.LBP="LBP",a.LKR="LKR",a.LRD="LRD",a.LSL="LSL",a.LYD="LYD",a.MAD="MAD",a.MDL="MDL",a.MGA="MGA",a.MKD="MKD",a.MMK="MMK",a.MNT="MNT",a.MOP="MOP",a.MRU="MRU",a.MUR="MUR",a.MVR="MVR",a.MWK="MWK",a.MXN="MXN",a.MYR="MYR",a.MZN="MZN",a.NAD="NAD",a.NGN="NGN",a.NIO="NIO",a.NOK="NOK",a.NPR="NPR",a.NZD="NZD",a.OMR="OMR",a.PAB="PAB",a.PEN="PEN",a.PGK="PGK",a.PHP="PHP",a.PKR="PKR",a.PLN="PLN",a.PYG="PYG",a.QAR="QAR",a.RON="RON",a.RSD="RSD",a.RUB="RUB",a.RWF="RWF",a.SAR="SAR",a.SBD="SBD",a.SCR="SCR",a.SDG="SDG",a.SEK="SEK",a.SGD="SGD",a.SHP="SHP",a.SLL="SLL",a.SOS="SOS",a.SRD="SRD",a.SSP="SSP",a.STN="STN",a.SVC="SVC",a.SYP="SYP",a.SZL="SZL",a.THB="THB",a.TJS="TJS",a.TMT="TMT",a.TND="TND",a.TOP="TOP",a.TRY="TRY",a.TTD="TTD",a.TWD="TWD",a.TZS="TZS",a.UAH="UAH",a.UGX="UGX",a.USD="USD",a.UYU="UYU",a.UZS="UZS",a.VES="VES",a.VND="VND",a.VUV="VUV",a.WST="WST",a.XAF="XAF",a.XCD="XCD",a.XOF="XOF",a.XPF="XPF",a.YER="YER",a.ZAR="ZAR",a.ZMW="ZMW",a.ZWL="ZWL",(n=t.HistoryEntryType||(t.HistoryEntryType={})).CUSTOMER_REGISTERED="CUSTOMER_REGISTERED",n.CUSTOMER_VERIFIED="CUSTOMER_VERIFIED",n.CUSTOMER_DETAIL_UPDATED="CUSTOMER_DETAIL_UPDATED",n.CUSTOMER_ADDED_TO_GROUP="CUSTOMER_ADDED_TO_GROUP",n.CUSTOMER_REMOVED_FROM_GROUP="CUSTOMER_REMOVED_FROM_GROUP",n.CUSTOMER_ADDRESS_CREATED="CUSTOMER_ADDRESS_CREATED",n.CUSTOMER_ADDRESS_UPDATED="CUSTOMER_ADDRESS_UPDATED",n.CUSTOMER_ADDRESS_DELETED="CUSTOMER_ADDRESS_DELETED",n.CUSTOMER_PASSWORD_UPDATED="CUSTOMER_PASSWORD_UPDATED",n.CUSTOMER_PASSWORD_RESET_REQUESTED="CUSTOMER_PASSWORD_RESET_REQUESTED",n.CUSTOMER_PASSWORD_RESET_VERIFIED="CUSTOMER_PASSWORD_RESET_VERIFIED",n.CUSTOMER_EMAIL_UPDATE_REQUESTED="CUSTOMER_EMAIL_UPDATE_REQUESTED",n.CUSTOMER_EMAIL_UPDATE_VERIFIED="CUSTOMER_EMAIL_UPDATE_VERIFIED",n.CUSTOMER_NOTE="CUSTOMER_NOTE",n.ORDER_STATE_TRANSITION="ORDER_STATE_TRANSITION",n.ORDER_PAYMENT_TRANSITION="ORDER_PAYMENT_TRANSITION",n.ORDER_FULFILLMENT="ORDER_FULFILLMENT",n.ORDER_CANCELLATION="ORDER_CANCELLATION",n.ORDER_REFUND_TRANSITION="ORDER_REFUND_TRANSITION",n.ORDER_FULFILLMENT_TRANSITION="ORDER_FULFILLMENT_TRANSITION",n.ORDER_NOTE="ORDER_NOTE",n.ORDER_COUPON_APPLIED="ORDER_COUPON_APPLIED",n.ORDER_COUPON_REMOVED="ORDER_COUPON_REMOVED",n.ORDER_MODIFIED="ORDER_MODIFIED",(r=t.LanguageCode||(t.LanguageCode={})).af="af",r.ak="ak",r.sq="sq",r.am="am",r.ar="ar",r.hy="hy",r.as="as",r.az="az",r.bm="bm",r.bn="bn",r.eu="eu",r.be="be",r.bs="bs",r.br="br",r.bg="bg",r.my="my",r.ca="ca",r.ce="ce",r.zh="zh",r.zh_Hans="zh_Hans",r.zh_Hant="zh_Hant",r.cu="cu",r.kw="kw",r.co="co",r.hr="hr",r.cs="cs",r.da="da",r.nl="nl",r.nl_BE="nl_BE",r.dz="dz",r.en="en",r.en_AU="en_AU",r.en_CA="en_CA",r.en_GB="en_GB",r.en_US="en_US",r.eo="eo",r.et="et",r.ee="ee",r.fo="fo",r.fi="fi",r.fr="fr",r.fr_CA="fr_CA",r.fr_CH="fr_CH",r.ff="ff",r.gl="gl",r.lg="lg",r.ka="ka",r.de="de",r.de_AT="de_AT",r.de_CH="de_CH",r.el="el",r.gu="gu",r.ht="ht",r.ha="ha",r.he="he",r.hi="hi",r.hu="hu",r.is="is",r.ig="ig",r.id="id",r.ia="ia",r.ga="ga",r.it="it",r.ja="ja",r.jv="jv",r.kl="kl",r.kn="kn",r.ks="ks",r.kk="kk",r.km="km",r.ki="ki",r.rw="rw",r.ko="ko",r.ku="ku",r.ky="ky",r.lo="lo",r.la="la",r.lv="lv",r.ln="ln",r.lt="lt",r.lu="lu",r.lb="lb",r.mk="mk",r.mg="mg",r.ms="ms",r.ml="ml",r.mt="mt",r.gv="gv",r.mi="mi",r.mr="mr",r.mn="mn",r.ne="ne",r.nd="nd",r.se="se",r.nb="nb",r.nn="nn",r.ny="ny",r.or="or",r.om="om",r.os="os",r.ps="ps",r.fa="fa",r.fa_AF="fa_AF",r.pl="pl",r.pt="pt",r.pt_BR="pt_BR",r.pt_PT="pt_PT",r.pa="pa",r.qu="qu",r.ro="ro",r.ro_MD="ro_MD",r.rm="rm",r.rn="rn",r.ru="ru",r.sm="sm",r.sg="sg",r.sa="sa",r.gd="gd",r.sr="sr",r.sn="sn",r.ii="ii",r.sd="sd",r.si="si",r.sk="sk",r.sl="sl",r.so="so",r.st="st",r.es="es",r.es_ES="es_ES",r.es_MX="es_MX",r.su="su",r.sw="sw",r.sw_CD="sw_CD",r.sv="sv",r.tg="tg",r.ta="ta",r.tt="tt",r.te="te",r.th="th",r.bo="bo",r.ti="ti",r.to="to",r.tr="tr",r.tk="tk",r.uk="uk",r.ur="ur",r.ug="ug",r.uz="uz",r.vi="vi",r.vo="vo",r.cy="cy",r.fy="fy",r.wo="wo",r.xh="xh",r.yi="yi",r.yo="yo",r.zu="zu"},h0eC:function(r,a,d){"use strict";d.r(a),d.d(a,"AddCustomerToGroupDialogComponent",function(){return x}),d.d(a,"AddressCardComponent",function(){return me}),d.d(a,"AddressDetailDialogComponent",function(){return q}),d.d(a,"CustomerDetailComponent",function(){return Lt}),d.d(a,"CustomerGroupDetailDialogComponent",function(){return Wt}),d.d(a,"CustomerGroupListComponent",function(){return rc}),d.d(a,"CustomerGroupMemberListComponent",function(){return w}),d.d(a,"CustomerHistoryComponent",function(){return mt}),d.d(a,"CustomerListComponent",function(){return uc}),d.d(a,"CustomerStatusLabelComponent",function(){return ke}),d.d(a,"SelectCustomerGroupDialogComponent",function(){return Ae}),d.d(a,"CustomerModule",function(){return pc}),d.d(a,"customerRoutes",function(){return dc}),d.d(a,"customerBreadcrumb",function(){return mc}),d.d(a,"CustomerResolver",function(){return lc});var m=d("t9nd"),f=d("2Vo4"),b=d("eIep"),h=d("lJxs"),v=d("fXoL"),y=d("xUfP"),C=d("3Pt+"),R=d("XNiG"),O=d("itXk"),E=d("JX91"),D=d("/uUt"),T=d("Kj3r"),S=d("vkgz"),I=d("1G5W"),_=d("tyNb"),A=d("Bzlx"),P=d("CotX"),N=d("r2d8"),M=d("ef/U"),F=d("sYmb"),U=d("ofXK"),k=d("V0to"),Q=function(e){return["/customer","customers",e]};function L(e,t){if(1&e&&(v.hc(0,"td",3),v.Vc(1),v.gc(),v.hc(2,"td",3),v.Vc(3),v.gc(),v.hc(4,"td",4),v.cc(5,"vdr-table-row-action",5),v.sc(6,"translate"),v.gc()),2&e){var c=t.item;v.Qb(1),v.Zc(" ",c.title," ",c.firstName," ",c.lastName," "),v.Qb(2),v.Wc(c.emailAddress),v.Qb(2),v.yc("label",v.tc(6,6,"common.edit"))("linkTo",v.Cc(8,Q,c.id))}}var w=function(){function e(t,c){var r=this;p(this,e),this.router=t,this.dataService=c,this.selectedMemberIds=[],this.selectionChange=new v.t,this.fetchParamsChange=new v.t,this.filterTermControl=new C.f(""),this.refresh$=new f.a(!0),this.destroy$=new R.a,this.isMemberSelected=function(e){return-1<r.selectedMemberIds.indexOf(e.id)}}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.membersCurrentPage$=this.route.paramMap.pipe(Object(h.a)(function(e){return e.get("membersPage")}),Object(h.a)(function(e){return e?+e:1}),Object(E.a)(1),Object(D.a)()),this.membersItemsPerPage$=this.route.paramMap.pipe(Object(h.a)(function(e){return e.get("membersPerPage")}),Object(h.a)(function(e){return e?+e:10}),Object(E.a)(10),Object(D.a)());var t=this.filterTermControl.valueChanges.pipe(Object(T.a)(250),Object(S.a)(function(){return e.setContentsPageNumber(1)}),Object(E.a)(""));Object(O.a)(this.membersCurrentPage$,this.membersItemsPerPage$,t,this.refresh$).pipe(Object(I.a)(this.destroy$)).subscribe(function(t){var c=l(t,3),r=c[0],n=c[1],a=c[2],s=n,o=(r-1)*n;e.fetchParamsChange.emit({filterTerm:a,skip:o,take:s})})}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"setContentsPageNumber",value:function(e){this.setParam("membersPage",e)}},{key:"setContentsItemsPerPage",value:function(e){this.setParam("membersPerPage",e)}},{key:"refresh",value:function(){this.refresh$.next(!0)}},{key:"setParam",value:function(e,t){this.router.navigate(["./",Object.assign(Object.assign({},this.route.snapshot.params),u({},e,t))],{relativeTo:this.route,queryParamsHandling:"merge"})}},{key:"areAllSelected",value:function(){return!!this.members&&this.selectedMemberIds.length===this.members.length}},{key:"toggleSelectAll",value:function(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(function(e){return e.id}))}},{key:"toggleSelectMember",value:function(e){this.selectedMemberIds.includes(e.id)?this.selectionChange.emit(this.selectedMemberIds.filter(function(t){return t!==e.id})):this.selectionChange.emit([].concat(i(this.selectedMemberIds),[e.id]))}}]),e}();w.\u0275fac=function(e){return new(e||w)(v.bc(_.e),v.bc(m.s))},w.\u0275cmp=v.Vb({type:w,selectors:[["vdr-customer-group-member-list"]],inputs:{members:"members",totalItems:"totalItems",route:"route",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange",fetchParamsChange:"fetchParamsChange"},decls:14,vars:24,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],[3,"items","itemsPerPage","totalItems","currentPage","allSelected","isRowSelectedFn","pageChange","itemsPerPageChange","rowSelectChange","allSelectChange"],[3,"expand"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(v.cc(0,"input",0),v.sc(1,"translate"),v.hc(2,"vdr-data-table",1),v.pc("pageChange",function(e){return t.setContentsPageNumber(e)})("itemsPerPageChange",function(e){return t.setContentsItemsPerPage(e)})("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),v.sc(3,"async"),v.sc(4,"async"),v.sc(5,"hasPermission"),v.hc(6,"vdr-dt-column",2),v.Vc(7),v.sc(8,"translate"),v.gc(),v.hc(9,"vdr-dt-column",2),v.Vc(10),v.sc(11,"translate"),v.gc(),v.cc(12,"vdr-dt-column"),v.Tc(13,L,7,10,"ng-template"),v.gc()),2&e&&(v.yc("formControl",t.filterTermControl)("placeholder",v.tc(1,12,"customer.search-customers-by-email")),v.Qb(2),v.yc("items",t.members)("itemsPerPage",v.tc(3,14,t.membersItemsPerPage$))("totalItems",t.totalItems)("currentPage",v.tc(4,16,t.membersCurrentPage$))("allSelected",t.areAllSelected())("isRowSelectedFn",v.tc(5,18,"UpdateCustomerGroup")&&t.isMemberSelected),v.Qb(4),v.yc("expand",!0),v.Qb(1),v.Wc(v.tc(8,20,"customer.name")),v.Qb(2),v.yc("expand",!0),v.Qb(1),v.Wc(v.tc(11,22,"customer.email-address")))},directives:[A.a,C.b,C.p,C.g,P.a,N.a,M.a],pipes:[F.d,U.b,k.a],styles:[""],changeDetection:0});var V=d("jHbs"),G=function(e){return{groupName:e}};function j(e,t){if(1&e&&(v.Vc(0),v.sc(1,"translate")),2&e){var c=v.rc();v.Xc(" ",v.uc(1,1,"customer.add-customers-to-group-with-name",v.Cc(4,G,c.group.name)),"\n")}}var B=function(e){return{count:e}};function $(e,t){if(1&e){var c=v.ic();v.hc(0,"button",3),v.pc("click",function(){return v.Lc(c),v.rc().cancel()}),v.Vc(1),v.sc(2,"translate"),v.gc(),v.hc(3,"button",4),v.pc("click",function(){return v.Lc(c),v.rc().add()}),v.Vc(4),v.sc(5,"translate"),v.gc()}if(2&e){var r=v.rc();v.Qb(1),v.Wc(v.tc(2,3,"common.cancel")),v.Qb(2),v.yc("disabled",!r.selectedCustomerIds.length),v.Qb(1),v.Xc(" ",v.uc(5,5,"customer.add-customers-to-group-with-count",v.Cc(8,B,r.selectedCustomerIds.length))," ")}}var x=function(){function e(t){p(this,e),this.dataService=t,this.selectedCustomerIds=[],this.fetchGroupMembers$=new f.a({skip:0,take:10,filterTerm:""})}return g(e,[{key:"ngOnInit",value:function(){var e=this,t=this.fetchGroupMembers$.pipe(Object(b.a)(function(t){var c=t.skip,r=t.take,n=t.filterTerm;return e.dataService.customer.getCustomerList(r,c,n).mapStream(function(e){return e.customers})}));this.customers$=t.pipe(Object(h.a)(function(e){return e.items})),this.customersTotal$=t.pipe(Object(h.a)(function(e){return e.totalItems}))}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedCustomerIds)}}]),e}();x.\u0275fac=function(e){return new(e||x)(v.bc(m.s))},x.\u0275cmp=v.Vb({type:x,selectors:[["vdr-add-customer-to-group-dialog"]],decls:5,vars:8,consts:[["vdrDialogTitle",""],[3,"members","totalItems","route","selectedMemberIds","fetchParamsChange","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(v.Tc(0,j,2,6,"ng-template",0),v.hc(1,"vdr-customer-group-member-list",1),v.pc("fetchParamsChange",function(e){return t.fetchGroupMembers$.next(e)})("selectionChange",function(e){return t.selectedCustomerIds=e}),v.sc(2,"async"),v.sc(3,"async"),v.gc(),v.Tc(4,$,6,10,"ng-template",2)),2&e&&(v.Qb(1),v.yc("members",v.tc(2,4,t.customers$))("totalItems",v.tc(3,6,t.customersTotal$))("route",t.route)("selectedMemberIds",t.selectedCustomerIds))},directives:[y.a,w,V.a],pipes:[U.b,F.d],styles:[""],changeDetection:0});var W=d("pLZG"),X=d("IzEk"),K=d("4ALk");function H(e,t){if(1&e&&(v.hc(0,"span"),v.Vc(1),v.gc()),2&e){var c=t.ngIf;v.Qb(1),v.Xc("",c,",")}}function Y(e,t){if(1&e&&(v.hc(0,"span"),v.Vc(1),v.gc()),2&e){var c=t.ngIf;v.Qb(1),v.Xc(" ",c,"")}}function Z(e,t){if(1&e&&(v.Tc(0,H,2,1,"span",3),v.Tc(1,Y,2,1,"span",3)),2&e){var c,r,n=v.rc();v.yc("ngIf",null==(c=n.addressForm.get("streetLine1"))?null:c.value),v.Qb(1),v.yc("ngIf",null==(r=n.addressForm.get("countryCode"))?null:r.value)}}function z(e,t){if(1&e){var c=v.ic();v.hc(0,"button",4),v.pc("click",function(){return v.Lc(c),v.rc().cancel()}),v.Vc(1),v.sc(2,"translate"),v.gc(),v.hc(3,"button",5),v.pc("click",function(){return v.Lc(c),v.rc().save()}),v.Vc(4),v.sc(5,"translate"),v.gc()}if(2&e){var r=v.rc();v.Qb(1),v.Wc(v.tc(2,3,"common.cancel")),v.Qb(2),v.yc("disabled",!r.addressForm.valid||!r.addressForm.touched),v.Qb(1),v.Xc(" ",v.tc(5,5,"common.update")," ")}}var q=function(){function e(t){p(this,e),this.changeDetector=t,this.availableCountries=[]}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.addressForm.valueChanges.subscribe(function(){return e.changeDetector.markForCheck()})}},{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.addressForm)}}]),e}();q.\u0275fac=function(e){return new(e||q)(v.bc(v.j))},q.\u0275cmp=v.Vb({type:q,selectors:[["vdr-address-detail-dialog"]],decls:3,vars:3,consts:[["vdrDialogTitle",""],[3,"formGroup","availableCountries","customFields"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(v.Tc(0,Z,2,2,"ng-template",0),v.cc(1,"vdr-address-form",1),v.Tc(2,z,6,7,"ng-template",2)),2&e&&(v.Qb(1),v.yc("formGroup",t.addressForm)("availableCountries",t.availableCountries)("customFields",t.customFields))},directives:[y.a,K.a,C.q,C.j,V.a,U.o],pipes:[F.d],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0});var J=d("qqSn"),ee=d("iszU"),te=d("2/wi"),ce=d("8MG2"),re=d("zzDm"),ne=d("eBFp"),ae=d("IKcI"),se=d("EFLa");function oe(e,t){if(1&e&&(v.hc(0,"span",13),v.Vc(1),v.gc()),2&e){var c=v.rc().ngIf;v.Qb(1),v.Xc("",c.streetLine1,",")}}function ie(e,t){1&e&&(v.hc(0,"vdr-chip",14),v.cc(1,"clr-icon",15),v.Vc(2),v.sc(3,"translate"),v.gc()),2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.default-shipping-address")," "))}function ue(e,t){1&e&&(v.hc(0,"vdr-chip",14),v.cc(1,"clr-icon",16),v.Vc(2),v.sc(3,"translate"),v.gc()),2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.default-billing-address")," "))}function le(e,t){if(1&e){var c=v.ic();v.fc(0),v.hc(1,"button",17),v.pc("click",function(){return v.Lc(c),v.rc(2).editAddress()}),v.Vc(2),v.sc(3,"translate"),v.gc(),v.hc(4,"vdr-dropdown"),v.hc(5,"button",18),v.Vc(6),v.sc(7,"translate"),v.cc(8,"clr-icon",19),v.gc(),v.hc(9,"vdr-dropdown-menu"),v.hc(10,"button",20),v.pc("click",function(){return v.Lc(c),v.rc(2).setAsDefaultShippingAddress()}),v.Vc(11),v.sc(12,"translate"),v.gc(),v.hc(13,"button",20),v.pc("click",function(){return v.Lc(c),v.rc(2).setAsDefaultBillingAddress()}),v.Vc(14),v.sc(15,"translate"),v.gc(),v.gc(),v.gc(),v.ec()}if(2&e){var r=v.rc(2);v.Qb(2),v.Xc(" ",v.tc(3,6,"common.edit")," "),v.Qb(4),v.Xc(" ",v.tc(7,8,"common.more")," "),v.Qb(4),v.yc("disabled",r.isDefaultShipping),v.Qb(1),v.Xc(" ",v.tc(12,10,"customer.set-as-default-shipping-address")," "),v.Qb(2),v.yc("disabled",r.isDefaultBilling),v.Qb(1),v.Xc(" ",v.tc(15,12,"customer.set-as-default-billing-address")," ")}}function de(e,t){if(1&e&&(v.hc(0,"div",1),v.hc(1,"div",2),v.hc(2,"div",3),v.Tc(3,oe,2,1,"span",4),v.Vc(4),v.gc(),v.hc(5,"div",5),v.Tc(6,ie,4,3,"vdr-chip",6),v.Tc(7,ue,4,3,"vdr-chip",6),v.gc(),v.gc(),v.hc(8,"div",7),v.hc(9,"div",8),v.cc(10,"vdr-formatted-address",9),v.gc(),v.gc(),v.hc(11,"div",10),v.cc(12,"vdr-entity-info",11),v.Tc(13,le,16,14,"ng-container",12),v.gc(),v.gc()),2&e){var c=t.ngIf,r=v.rc();v.Qb(3),v.yc("ngIf",c.streetLine1),v.Qb(1),v.Xc(" ",c.countryCode," "),v.Qb(2),v.yc("ngIf",r.isDefaultShipping),v.Qb(1),v.yc("ngIf",r.isDefaultBilling),v.Qb(3),v.yc("address",c),v.Qb(2),v.yc("entity",c),v.Qb(1),v.yc("ngIf",r.editable)}}var me=function(){function e(t,c){p(this,e),this.modalService=t,this.changeDetector=c,this.availableCountries=[],this.editable=!0,this.setAsDefaultShipping=new v.t,this.setAsDefaultBilling=new v.t,this.dataDependenciesPopulated=new f.a(!1)}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.addressForm.get("streetLine1").value||this.dataDependenciesPopulated.pipe(Object(W.a)(function(e){return e}),Object(X.a)(1)).subscribe(function(){e.editAddress()})}},{key:"ngOnChanges",value:function(e){null!=this.customFields&&null!=this.availableCountries&&this.dataDependenciesPopulated.next(!0)}},{key:"getCountryName",value:function(e){if(!this.availableCountries)return"";var t=this.availableCountries.find(function(t){return t.code===e});return t?t.name:""}},{key:"setAsDefaultBillingAddress",value:function(){this.setAsDefaultBilling.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"setAsDefaultShippingAddress",value:function(){this.setAsDefaultShipping.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}},{key:"editAddress",value:function(){var e=this;this.modalService.fromComponent(q,{locals:{addressForm:this.addressForm,customFields:this.customFields,availableCountries:this.availableCountries},size:"md",closable:!0}).subscribe(function(){e.changeDetector.markForCheck()})}}]),e}();me.\u0275fac=function(e){return new(e||me)(v.bc(m.F),v.bc(v.j))},me.\u0275cmp=v.Vb({type:me,selectors:[["vdr-address-card"]],inputs:{addressForm:"addressForm",customFields:"customFields",availableCountries:"availableCountries",isDefaultBilling:"isDefaultBilling",isDefaultShipping:"isDefaultShipping",editable:"editable"},outputs:{setAsDefaultShipping:"setAsDefaultShipping",setAsDefaultBilling:"setAsDefaultBilling"},features:[v.Ob],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"address-title"],["class","street-line",4,"ngIf"],[1,"default-controls"],["class","is-default p8",4,"ngIf"],[1,"card-block"],[1,"card-text"],[3,"address"],[1,"card-footer"],[3,"entity"],[4,"ngIf"],[1,"street-line"],[1,"is-default","p8"],["shape","truck"],["shape","credit-card"],[1,"btn","btn-sm","btn-link",3,"click"],["type","button","vdrDropdownTrigger","",1,"btn","btn-sm","btn-link"],["shape","caret down"],["vdrDropdownItem","",1,"button",3,"disabled","click"]],template:function(e,t){1&e&&v.Tc(0,de,14,7,"div",0),2&e&&v.yc("ngIf",t.addressForm.value)},directives:[U.o,J.a,ee.a,te.a,ce.o,re.a,ne.a,ae.a,se.a],pipes:[F.d],styles:["[_nghost-%COMP%]{display:block;max-width:360px}clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}.defaul-controls[_ngcontent-%COMP%]{display:flex}.is-default[_ngcontent-%COMP%]{margin:0;color:var(--color-success-500)}"],changeDetection:0});var pe=d("D57K"),fe=d("OxKu"),ge=d("cOim"),be=d("cp0P"),he=d("Cfvw"),ve=d("EY2u"),ye=d("UXun"),Ce=d("VRyK"),Re=d("5+tZ"),Oe=d("bOdf"),Ee=d("ZOsW");function De(e,t){1&e&&(v.Vc(0),v.sc(1,"translate")),2&e&&v.Xc(" ",v.tc(1,1,"customer.add-customer-to-group"),"\n")}function Te(e,t){if(1&e&&(v.hc(0,"span",5),v.pc("click",function(){var e=t.item;return(0,t.clear)(e)}),v.Vc(1," \xd7 "),v.gc(),v.hc(2,"vdr-chip",6),v.Vc(3),v.gc()),2&e){var c=t.item;v.Qb(2),v.yc("colorFrom",c.id),v.Qb(1),v.Wc(c.name)}}function Se(e,t){if(1&e&&(v.hc(0,"vdr-chip",6),v.Vc(1),v.gc()),2&e){var c=t.item;v.yc("colorFrom",c.id),v.Qb(1),v.Wc(c.name)}}var Ie=function(e){return{count:e}};function _e(e,t){if(1&e){var c=v.ic();v.hc(0,"button",7),v.pc("click",function(){return v.Lc(c),v.rc().cancel()}),v.Vc(1),v.sc(2,"translate"),v.gc(),v.hc(3,"button",8),v.pc("click",function(){return v.Lc(c),v.rc().add()}),v.Vc(4),v.sc(5,"translate"),v.gc()}if(2&e){var r=v.rc();v.Qb(1),v.Wc(v.tc(2,3,"common.cancel")),v.Qb(2),v.yc("disabled",!r.selectedGroupIds.length),v.Qb(1),v.Xc(" ",v.uc(5,5,"customer.add-customer-to-groups-with-count",v.Cc(8,Ie,r.selectedGroupIds.length))," ")}}var Ae=function(){function e(t){p(this,e),this.dataService=t,this.selectedGroupIds=[]}return g(e,[{key:"ngOnInit",value:function(){this.groups$=this.dataService.customer.getCustomerGroupList().mapStream(function(e){return e.customerGroups.items})}},{key:"cancel",value:function(){this.resolveWith()}},{key:"add",value:function(){this.resolveWith(this.selectedGroupIds)}}]),e}();Ae.\u0275fac=function(e){return new(e||Ae)(v.bc(m.s))},Ae.\u0275cmp=v.Vb({type:Ae,selectors:[["vdr-select-customer-group-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["appendTo","body","bindValue","id",3,"items","addTag","multiple","ngModel","clearable","searchable","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],["vdrDialogButtons",""],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[3,"colorFrom"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(v.Tc(0,De,2,3,"ng-template",0),v.hc(1,"ng-select",1),v.pc("ngModelChange",function(e){return t.selectedGroupIds=e}),v.sc(2,"async"),v.Tc(3,Te,4,2,"ng-template",2),v.Tc(4,Se,2,2,"ng-template",3),v.gc(),v.Tc(5,_e,6,10,"ng-template",4)),2&e&&(v.Qb(1),v.yc("items",v.tc(2,6,t.groups$))("addTag",!1)("multiple",!0)("ngModel",t.selectedGroupIds)("clearable",!0)("searchable",!1))},directives:[y.a,Ee.a,C.p,C.s,Ee.e,Ee.d,V.a,te.a],pipes:[U.b,F.d],styles:[""],changeDetection:0});var Pe=d("uEVm");function Ne(e,t){1&e&&(v.fc(0),v.cc(1,"clr-icon",1),v.Vc(2),v.sc(3,"translate"),v.ec()),2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.verified")," "))}function Me(e,t){1&e&&(v.fc(0),v.cc(1,"clr-icon",2),v.Vc(2),v.sc(3,"translate"),v.ec()),2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.registered")," "))}function Fe(e,t){if(1&e&&(v.hc(0,"vdr-chip"),v.Tc(1,Ne,4,3,"ng-container",0),v.Tc(2,Me,4,3,"ng-container",0),v.gc()),2&e){var c=v.rc();v.Qb(1),v.yc("ngIf",null==c.customer.user?null:c.customer.user.verified),v.Qb(1),v.yc("ngIf",!(null!=c.customer.user&&c.customer.user.verified))}}function Ue(e,t){1&e&&(v.hc(0,"vdr-chip"),v.Vc(1),v.sc(2,"translate"),v.gc()),2&e&&(v.Qb(1),v.Wc(v.tc(2,1,"customer.guest")))}var ke=function e(){p(this,e)};ke.\u0275fac=function(e){return new(e||ke)},ke.\u0275cmp=v.Vb({type:ke,selectors:[["vdr-customer-status-label"]],inputs:{customer:"customer"},decls:2,vars:2,consts:[[4,"ngIf"],["shape","check-circle",1,"verified-user-icon"],["shape","check-circle",1,"registered-user-icon"]],template:function(e,t){1&e&&(v.Tc(0,Fe,3,2,"vdr-chip",0),v.Tc(1,Ue,3,3,"vdr-chip",0)),2&e&&(v.yc("ngIf",null==t.customer.user?null:t.customer.user.id),v.Qb(1),v.yc("ngIf",!(null!=t.customer.user&&t.customer.user.id)))},directives:[U.o,te.a,ce.o],pipes:[F.d],styles:[".registered-user-icon[_ngcontent-%COMP%]{color:var(--color-grey-300)}.verified-user-icon[_ngcontent-%COMP%]{color:var(--color-success-500)}"],changeDetection:0});var Qe=d("nqNv"),Le=d("1XD6"),we=d("W7hW"),Ve=d("Lbhx"),Ge=d("yW18"),je=d("u1bq"),Be=d("2zLM"),$e=d("0MpJ");function xe(e,t){if(1&e){var c=v.ic();v.hc(0,"vdr-timeline-entry",4),v.hc(1,"div",5),v.hc(2,"textarea",6),v.pc("ngModelChange",function(e){return v.Lc(c),v.rc().note=e}),v.gc(),v.hc(3,"button",7),v.pc("click",function(){return v.Lc(c),v.rc().addNoteToCustomer()}),v.Vc(4),v.sc(5,"translate"),v.gc(),v.gc(),v.gc()}if(2&e){var r=v.rc();v.Qb(2),v.yc("ngModel",r.note),v.Qb(1),v.yc("disabled",!r.note),v.Qb(1),v.Xc(" ",v.tc(5,3,"order.add-note")," ")}}function We(e,t){1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e&&(v.Qb(1),v.Xc(" ",v.tc(2,1,"customer.history-using-native-auth-strategy")," "))}var Xe=function(e){return{strategy:e}};function Ke(e,t){if(1&e&&(v.Vc(0),v.sc(1,"translate")),2&e){var c=v.rc(2).$implicit;v.Xc(" ",v.uc(1,1,"customer.history-using-external-auth-strategy",v.Cc(4,Xe,c.data.strategy))," ")}}function He(e,t){if(1&e&&(v.fc(0),v.hc(1,"div",11),v.Vc(2),v.sc(3,"translate"),v.gc(),v.Tc(4,We,3,3,"ng-container",12),v.Tc(5,Ke,2,6,"ng-template",null,13,v.Uc),v.ec()),2&e){var c=v.Ic(6),r=v.rc().$implicit;v.Qb(2),v.Xc(" ",v.tc(3,3,"customer.history-customer-registered")," "),v.Qb(2),v.yc("ngIf","native"===r.data.strategy)("ngIfElse",c)}}function Ye(e,t){1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e&&(v.Qb(1),v.Xc(" ",v.tc(2,1,"customer.history-using-native-auth-strategy")," "))}function Ze(e,t){if(1&e&&(v.Vc(0),v.sc(1,"translate")),2&e){var c=v.rc(2).$implicit;v.Xc(" ",v.uc(1,1,"customer.history-using-external-auth-strategy",v.Cc(4,Xe,c.data.strategy))," ")}}function ze(e,t){if(1&e&&(v.fc(0),v.hc(1,"div",11),v.Vc(2),v.sc(3,"translate"),v.gc(),v.Tc(4,Ye,3,3,"ng-container",12),v.Tc(5,Ze,2,6,"ng-template",null,13,v.Uc),v.ec()),2&e){var c=v.Ic(6),r=v.rc().$implicit;v.Qb(2),v.Xc(" ",v.tc(3,3,"customer.history-customer-verified")," "),v.Qb(2),v.yc("ngIf","native"===r.data.strategy)("ngIfElse",c)}}function qe(e,t){if(1&e&&(v.fc(0),v.hc(1,"div",14),v.Vc(2),v.sc(3,"translate"),v.hc(4,"vdr-history-entry-detail"),v.cc(5,"vdr-object-tree",15),v.gc(),v.gc(),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(2),v.Xc(" ",v.tc(3,2,"customer.history-customer-detail-updated")," "),v.Qb(3),v.yc("value",c.data.input)}}var Je=function(e){return{groupName:e}};function et(e,t){if(1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(1),v.Xc(" ",v.uc(2,1,"customer.history-customer-added-to-group",v.Cc(4,Je,c.data.groupName))," ")}}function tt(e,t){if(1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(1),v.Xc(" ",v.uc(2,1,"customer.history-customer-removed-from-group",v.Cc(4,Je,c.data.groupName))," ")}}function ct(e,t){if(1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.hc(3,"div",14),v.hc(4,"div",16),v.Vc(5),v.gc(),v.gc(),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(1),v.Xc(" ",v.tc(2,2,"customer.history-customer-address-created")," "),v.Qb(4),v.Wc(c.data.address)}}function rt(e,t){if(1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.hc(3,"div",14),v.hc(4,"div",16),v.Vc(5),v.gc(),v.hc(6,"vdr-history-entry-detail"),v.cc(7,"vdr-object-tree",15),v.gc(),v.gc(),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(1),v.Xc(" ",v.tc(2,3,"customer.history-customer-address-updated")," "),v.Qb(4),v.Wc(c.data.address),v.Qb(2),v.yc("value",c.data.input)}}function nt(e,t){if(1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.hc(3,"div",16),v.Vc(4),v.gc(),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(1),v.Xc(" ",v.tc(2,2,"customer.history-customer-address-deleted")," "),v.Qb(3),v.Wc(c.data.address)}}function at(e,t){1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e&&(v.Qb(1),v.Xc(" ",v.tc(2,1,"customer.history-customer-password-updated")," "))}function st(e,t){1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e&&(v.Qb(1),v.Xc(" ",v.tc(2,1,"customer.history-customer-password-reset-requested")," "))}function ot(e,t){1&e&&(v.fc(0),v.Vc(1),v.sc(2,"translate"),v.ec()),2&e&&(v.Qb(1),v.Xc(" ",v.tc(2,1,"customer.history-customer-password-reset-verified")," "))}function it(e,t){if(1&e&&(v.fc(0),v.hc(1,"div",14),v.Vc(2),v.sc(3,"translate"),v.hc(4,"vdr-history-entry-detail"),v.hc(5,"vdr-labeled-data",17),v.sc(6,"translate"),v.Vc(7),v.gc(),v.hc(8,"vdr-labeled-data",17),v.sc(9,"translate"),v.Vc(10),v.gc(),v.gc(),v.gc(),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(2),v.Xc(" ",v.tc(3,5,"customer.history-customer-email-update-requested")," "),v.Qb(3),v.yc("label",v.tc(6,7,"customer.old-email-address")),v.Qb(2),v.Wc(c.data.oldEmailAddress),v.Qb(1),v.yc("label",v.tc(9,9,"customer.new-email-address")),v.Qb(2),v.Wc(c.data.newEmailAddress)}}function ut(e,t){if(1&e&&(v.fc(0),v.hc(1,"div",14),v.Vc(2),v.sc(3,"translate"),v.hc(4,"vdr-history-entry-detail"),v.hc(5,"vdr-labeled-data",17),v.sc(6,"translate"),v.Vc(7),v.gc(),v.hc(8,"vdr-labeled-data",17),v.sc(9,"translate"),v.Vc(10),v.gc(),v.gc(),v.gc(),v.ec()),2&e){var c=v.rc().$implicit;v.Qb(2),v.Xc(" ",v.tc(3,5,"customer.history-customer-email-update-verified")," "),v.Qb(3),v.yc("label",v.tc(6,7,"customer.old-email-address")),v.Qb(2),v.Wc(c.data.oldEmailAddress),v.Qb(1),v.yc("label",v.tc(9,9,"customer.new-email-address")),v.Qb(2),v.Wc(c.data.newEmailAddress)}}function lt(e,t){if(1&e){var c=v.ic();v.fc(0),v.hc(1,"div",14),v.hc(2,"div",18),v.Vc(3),v.gc(),v.cc(4,"div",19),v.hc(5,"vdr-dropdown"),v.hc(6,"button",20),v.cc(7,"clr-icon",21),v.gc(),v.hc(8,"vdr-dropdown-menu",22),v.hc(9,"button",23),v.pc("click",function(){v.Lc(c);var e=v.rc().$implicit;return v.rc().updateNote.emit(e)}),v.sc(10,"hasPermission"),v.cc(11,"clr-icon",24),v.Vc(12),v.sc(13,"translate"),v.gc(),v.cc(14,"div",25),v.hc(15,"button",23),v.pc("click",function(){v.Lc(c);var e=v.rc().$implicit;return v.rc().deleteNote.emit(e)}),v.sc(16,"hasPermission"),v.cc(17,"clr-icon",26),v.Vc(18),v.sc(19,"translate"),v.gc(),v.gc(),v.gc(),v.gc(),v.ec()}if(2&e){var r=v.rc().$implicit;v.Qb(3),v.Xc(" ",r.data.note," "),v.Qb(6),v.yc("disabled",!v.tc(10,5,"UpdateCustomer")),v.Qb(3),v.Xc(" ",v.tc(13,7,"common.edit")," "),v.Qb(3),v.yc("disabled",!v.tc(16,9,"UpdateCustomer")),v.Qb(3),v.Xc(" ",v.tc(19,11,"common.delete")," ")}}function dt(e,t){if(1&e&&(v.hc(0,"vdr-timeline-entry",8),v.fc(1,9),v.Tc(2,He,7,5,"ng-container",10),v.Tc(3,ze,7,5,"ng-container",10),v.Tc(4,qe,6,4,"ng-container",10),v.Tc(5,et,3,6,"ng-container",10),v.Tc(6,tt,3,6,"ng-container",10),v.Tc(7,ct,6,4,"ng-container",10),v.Tc(8,rt,8,5,"ng-container",10),v.Tc(9,nt,5,4,"ng-container",10),v.Tc(10,at,3,3,"ng-container",10),v.Tc(11,st,3,3,"ng-container",10),v.Tc(12,ot,3,3,"ng-container",10),v.Tc(13,it,11,11,"ng-container",10),v.Tc(14,ut,11,11,"ng-container",10),v.Tc(15,lt,20,13,"ng-container",10),v.ec(),v.gc()),2&e){var c=t.$implicit,r=v.rc();v.yc("displayType",r.getDisplayType(c))("iconShape",r.getTimelineIcon(c))("createdAt",c.createdAt)("name",r.getName(c))("featured",r.isFeatured(c)),v.Qb(1),v.yc("ngSwitch",c.type),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_REGISTERED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_VERIFIED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_DETAIL_UPDATED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_ADDED_TO_GROUP),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_REMOVED_FROM_GROUP),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_ADDRESS_CREATED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_ADDRESS_UPDATED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_ADDRESS_DELETED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_PASSWORD_UPDATED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_PASSWORD_RESET_REQUESTED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_PASSWORD_RESET_VERIFIED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_EMAIL_UPDATE_REQUESTED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_EMAIL_UPDATE_VERIFIED),v.Qb(1),v.yc("ngSwitchCase",r.type.CUSTOMER_NOTE)}}var mt=function(){function e(){p(this,e),this.addNote=new v.t,this.updateNote=new v.t,this.deleteNote=new v.t,this.note="",this.type=m.y}return g(e,[{key:"getDisplayType",value:function(e){switch(e.type){case m.y.CUSTOMER_VERIFIED:case m.y.CUSTOMER_EMAIL_UPDATE_VERIFIED:case m.y.CUSTOMER_PASSWORD_RESET_VERIFIED:return"success";case m.y.CUSTOMER_REGISTERED:return"muted";case m.y.CUSTOMER_REMOVED_FROM_GROUP:return"error";default:return"default"}}},{key:"getTimelineIcon",value:function(e){switch(e.type){case m.y.CUSTOMER_REGISTERED:return"user";case m.y.CUSTOMER_VERIFIED:return["assign-user","is-solid"];case m.y.CUSTOMER_NOTE:return"note";case m.y.CUSTOMER_ADDED_TO_GROUP:case m.y.CUSTOMER_REMOVED_FROM_GROUP:return"users"}}},{key:"isFeatured",value:function(e){switch(e.type){case m.y.CUSTOMER_REGISTERED:case m.y.CUSTOMER_VERIFIED:return!0;default:return!1}}},{key:"getName",value:function(e){var t=e.administrator;return t?"".concat(t.firstName," ").concat(t.lastName):"".concat(this.customer.firstName," ").concat(this.customer.lastName)}},{key:"addNoteToCustomer",value:function(){this.addNote.emit({note:this.note}),this.note=""}}]),e}();mt.\u0275fac=function(e){return new(e||mt)},mt.\u0275cmp=v.Vb({type:mt,selectors:[["vdr-customer-history"]],inputs:{customer:"customer",history:"history"},outputs:{addNote:"addNote",updateNote:"updateNote",deleteNote:"deleteNote"},decls:7,vars:6,consts:[[1,"entry-list"],["iconShape","note","displayType","muted",4,"vdrIfPermissions"],[3,"displayType","iconShape","createdAt","name","featured",4,"ngFor","ngForOf"],[3,"isLast"],["iconShape","note","displayType","muted"],[1,"note-entry"],["name","note",1,"note",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[3,"displayType","iconShape","createdAt","name","featured"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"title"],[4,"ngIf","ngIfElse"],["namedStrategy",""],[1,"flex"],[3,"value"],[1,"address-string"],[3,"label"],[1,"note-text"],[1,"flex-spacer"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","edit"],[1,"dropdown-divider"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(v.hc(0,"h4"),v.Vc(1),v.sc(2,"translate"),v.gc(),v.hc(3,"div",0),v.Tc(4,xe,6,5,"vdr-timeline-entry",1),v.Tc(5,dt,16,20,"vdr-timeline-entry",2),v.cc(6,"vdr-timeline-entry",3),v.gc()),2&e&&(v.Qb(1),v.Wc(v.tc(2,4,"customer.customer-history")),v.Qb(3),v.yc("vdrIfPermissions","UpdateCustomer"),v.Qb(1),v.yc("ngForOf",t.history),v.Qb(1),v.yc("isLast",!0))},directives:[we.a,U.n,Ge.a,A.a,C.b,C.p,C.s,U.q,U.r,U.o,je.a,Be.a,$e.a,re.a,ne.a,ce.o,ae.a,se.a],pipes:[F.d,k.a],styles:[".entry-list[_ngcontent-%COMP%]{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry[_ngcontent-%COMP%]{display:flex;align-items:center}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}textarea.note[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:var(--color-text-100);white-space:pre-wrap}.address-string[_ngcontent-%COMP%]{font-size:smaller;color:var(--color-text-200)}"],changeDetection:0});var pt=d("HMPB"),ft=d("uHMJ"),gt=d("ZFbG");function bt(e,t){if(1&e&&(v.hc(0,"div",22),v.sc(1,"localeDate"),v.Vc(2),v.sc(3,"translate"),v.sc(4,"timeAgo"),v.gc()),2&e){var c=t.ngIf;v.yc("title",v.uc(1,3,c,"medium")),v.Qb(2),v.Yc(" ",v.tc(3,6,"customer.last-login"),": ",v.tc(4,8,c)," ")}}function ht(e,t){if(1&e){var c=v.ic();v.hc(0,"button",23),v.pc("click",function(){return v.Lc(c),v.rc().create()}),v.Vc(1),v.sc(2,"translate"),v.gc()}if(2&e){var r=v.rc();v.yc("disabled",!(r.addressDefaultsUpdated||r.detailForm.valid&&r.detailForm.dirty)),v.Qb(1),v.Xc(" ",v.tc(2,2,"common.create")," ")}}function vt(e,t){if(1&e){var c=v.ic();v.hc(0,"button",23),v.pc("click",function(){return v.Lc(c),v.rc(2).save()}),v.Vc(1),v.sc(2,"translate"),v.gc()}if(2&e){var r=v.rc(2);v.yc("disabled",!(r.addressDefaultsUpdated||r.detailForm.valid&&r.detailForm.dirty)),v.Qb(1),v.Xc(" ",v.tc(2,2,"common.update")," ")}}function yt(e,t){1&e&&v.Tc(0,vt,3,4,"button",24),2&e&&v.yc("vdrIfPermissions","UpdateCustomer")}function Ct(e,t){1&e&&(v.hc(0,"vdr-form-field",25),v.sc(1,"translate"),v.cc(2,"input",26),v.gc()),2&e&&v.yc("label",v.tc(1,1,"customer.password"))}var Rt=function(){return["customer","customFields"]};function Ot(e,t){if(1&e&&v.cc(0,"vdr-custom-field-control",30),2&e){var c=v.rc().$implicit,r=v.rc(2);v.yc("customFieldsFormGroup",r.detailForm.get(v.Bc(2,Rt)))("customField",c)}}function Et(e,t){if(1&e&&(v.fc(0),v.Tc(1,Ot,1,3,"vdr-custom-field-control",29),v.ec()),2&e){var c=t.$implicit,r=v.rc(2);v.Qb(1),v.yc("ngIf",r.customFieldIsSet(c.name))}}function Dt(e,t){if(1&e&&(v.hc(0,"section",27),v.hc(1,"label"),v.Vc(2),v.sc(3,"translate"),v.gc(),v.Tc(4,Et,2,1,"ng-container",28),v.gc()),2&e){var c=v.rc();v.Qb(2),v.Wc(v.tc(3,2,"common.custom-fields")),v.Qb(2),v.yc("ngForOf",c.customFields)}}function Tt(e,t){if(1&e){var c=v.ic();v.hc(0,"vdr-chip",37),v.pc("iconClick",function(){v.Lc(c);var e=t.$implicit;return v.rc(3).removeFromGroup(e)}),v.Vc(1),v.gc()}if(2&e){var r=t.$implicit;v.yc("colorFrom",r.id),v.Qb(1),v.Wc(r.name)}}function St(e,t){if(1&e&&(v.fc(0),v.Tc(1,Tt,2,2,"vdr-chip",36),v.ec()),2&e){var c=v.rc().ngIf;v.Qb(1),v.yc("ngForOf",c)}}function It(e,t){1&e&&(v.Vc(0),v.sc(1,"translate")),2&e&&v.Xc(" ",v.tc(1,1,"customer.not-a-member-of-any-groups")," ")}function _t(e,t){if(1&e){var c=v.ic();v.hc(0,"button",38),v.pc("click",function(){return v.Lc(c),v.rc(2).addToGroup()}),v.cc(1,"clr-icon",39),v.Vc(2),v.sc(3,"translate"),v.gc()}2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.add-customer-to-group")," "))}function At(e,t){if(1&e&&(v.hc(0,"div",31),v.hc(1,"label",32),v.Vc(2),v.sc(3,"translate"),v.gc(),v.Tc(4,St,2,1,"ng-container",33),v.Tc(5,It,2,3,"ng-template",null,34,v.Uc),v.hc(7,"div"),v.Tc(8,_t,4,3,"button",35),v.gc(),v.gc()),2&e){var c=t.ngIf,r=v.Ic(6);v.Qb(2),v.Wc(v.tc(3,4,"customer.customer-groups")),v.Qb(2),v.yc("ngIf",c.length)("ngIfElse",r),v.Qb(4),v.yc("vdrIfPermissions","UpdateCustomerGroup")}}var Pt=function(){return["UpdateCustomer"]};function Nt(e,t){if(1&e){var c=v.ic();v.hc(0,"vdr-address-card",46),v.pc("setAsDefaultBilling",function(e){return v.Lc(c),v.rc(2).setDefaultBillingAddressId(e)})("setAsDefaultShipping",function(e){return v.Lc(c),v.rc(2).setDefaultShippingAddressId(e)}),v.sc(1,"async"),v.sc(2,"hasPermission"),v.gc()}if(2&e){var r=t.$implicit,n=v.rc(2);v.yc("availableCountries",v.tc(1,6,n.availableCountries$))("isDefaultBilling",n.defaultBillingAddressId===r.value.id)("isDefaultShipping",n.defaultShippingAddressId===r.value.id)("addressForm",r)("customFields",n.addressCustomFields)("editable",v.tc(2,8,v.Bc(10,Pt)))}}function Mt(e,t){if(1&e){var c=v.ic();v.hc(0,"button",47),v.pc("click",function(){return v.Lc(c),v.rc(2).addAddress()}),v.cc(1,"clr-icon",39),v.Vc(2),v.sc(3,"translate"),v.gc()}2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.create-new-address")," "))}var Ft=function(e){return["/orders/",e]};function Ut(e,t){if(1&e&&(v.hc(0,"td",48),v.Vc(1),v.gc(),v.hc(2,"td",48),v.Vc(3),v.gc(),v.hc(4,"td",48),v.Vc(5),v.sc(6,"localeCurrency"),v.gc(),v.hc(7,"td",48),v.Vc(8),v.sc(9,"localeDate"),v.gc(),v.hc(10,"td",49),v.cc(11,"vdr-table-row-action",50),v.sc(12,"translate"),v.gc()),2&e){var c=t.item;v.Qb(1),v.Wc(c.code),v.Qb(2),v.Wc(c.state),v.Qb(2),v.Wc(v.uc(6,6,c.total,c.currencyCode)),v.Qb(3),v.Wc(v.uc(9,9,c.updatedAt,"medium")),v.Qb(3),v.yc("label",v.tc(12,12,"common.open"))("linkTo",v.Cc(14,Ft,c.id))}}function kt(e,t){if(1&e){var c=v.ic();v.hc(0,"div",40),v.hc(1,"div",41),v.hc(2,"h3"),v.Vc(3),v.sc(4,"translate"),v.gc(),v.Tc(5,Nt,3,11,"vdr-address-card",42),v.Tc(6,Mt,4,3,"button",43),v.gc(),v.hc(7,"div",44),v.hc(8,"h3"),v.Vc(9),v.sc(10,"translate"),v.gc(),v.hc(11,"vdr-data-table",45),v.pc("itemsPerPageChange",function(e){return v.Lc(c),v.rc().setOrderItemsPerPage(e)})("pageChange",function(e){return v.Lc(c),v.rc().setOrderCurrentPage(e)}),v.sc(12,"async"),v.sc(13,"async"),v.sc(14,"translate"),v.hc(15,"vdr-dt-column"),v.Vc(16),v.sc(17,"translate"),v.gc(),v.hc(18,"vdr-dt-column"),v.Vc(19),v.sc(20,"translate"),v.gc(),v.hc(21,"vdr-dt-column"),v.Vc(22),v.sc(23,"translate"),v.gc(),v.hc(24,"vdr-dt-column"),v.Vc(25),v.sc(26,"translate"),v.gc(),v.cc(27,"vdr-dt-column"),v.Tc(28,Ut,13,16,"ng-template"),v.gc(),v.gc(),v.gc()}if(2&e){var r=v.rc();v.Qb(3),v.Wc(v.tc(4,13,"customer.addresses")),v.Qb(2),v.yc("ngForOf",r.getAddressFormControls()),v.Qb(1),v.yc("vdrIfPermissions","UpdateCustomer"),v.Qb(3),v.Wc(v.tc(10,15,"customer.orders")),v.Qb(2),v.yc("items",v.tc(12,17,r.orders$))("itemsPerPage",r.ordersPerPage)("totalItems",v.tc(13,19,r.ordersCount$))("currentPage",r.currentOrdersPage)("emptyStateLabel",v.tc(14,21,"customer.no-orders-placed")),v.Qb(5),v.Wc(v.tc(17,23,"common.code")),v.Qb(3),v.Wc(v.tc(20,25,"order.state")),v.Qb(3),v.Wc(v.tc(23,27,"order.total")),v.Qb(3),v.Wc(v.tc(26,29,"common.updated-at"))}}function Qt(e,t){if(1&e){var c=v.ic();v.hc(0,"div",40),v.hc(1,"div",51),v.hc(2,"vdr-customer-history",52),v.pc("addNote",function(e){return v.Lc(c),v.rc().addNoteToCustomer(e)})("updateNote",function(e){return v.Lc(c),v.rc().updateNote(e)})("deleteNote",function(e){return v.Lc(c),v.rc().deleteNote(e)}),v.sc(3,"async"),v.sc(4,"async"),v.gc(),v.gc(),v.gc()}if(2&e){var r=v.rc();v.Qb(2),v.yc("customer",v.tc(3,2,r.entity$))("history",v.tc(4,4,r.history$))}}var Lt=function(e){c(a,e);var r=n(a);function a(e,t,c,n,s,o,i,l){var d;return p(this,a),(d=r.call(this,e,t,c,o)).changeDetector=n,d.formBuilder=s,d.dataService=o,d.modalService=i,d.notificationService=l,d.fetchHistory=new R.a,d.addressDefaultsUpdated=!1,d.ordersPerPage=10,d.currentOrdersPage=1,d.orderListUpdates$=new R.a,d.customFields=d.getCustomFieldConfig("Customer"),d.addressCustomFields=d.getCustomFieldConfig("Address"),d.detailForm=d.formBuilder.group({customer:d.formBuilder.group({title:"",firstName:["",C.C.required],lastName:["",C.C.required],phoneNumber:"",emailAddress:["",[C.C.required,C.C.email]],password:"",customFields:d.formBuilder.group(d.customFields.reduce(function(e,t){return Object.assign(Object.assign({},e),u({},t.name,""))},{}))}),addresses:new C.c([])}),d}return g(a,[{key:"ngOnInit",value:function(){var e=this;this.init(),this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(function(e){return e.countries.items}).pipe(Object(ye.a)(1));var t=this.entity$.pipe(function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];return function(e){return e.lift.call(Object(Ce.a).apply(void 0,[e].concat(t)))}}(this.orderListUpdates$));this.orders$=t.pipe(Object(h.a)(function(e){return e.orders.items})),this.ordersCount$=this.entity$.pipe(Object(h.a)(function(e){return e.orders.totalItems})),this.history$=this.fetchHistory.pipe(Object(E.a)(null),Object(b.a)(function(){return e.dataService.customer.getCustomerHistory(e.id,{sort:{createdAt:m.L.DESC}}).mapStream(function(e){var t;return null===(t=e.customer)||void 0===t?void 0:t.history.items})}))}},{key:"ngOnDestroy",value:function(){this.destroy(),this.orderListUpdates$.complete()}},{key:"customFieldIsSet",value:function(e){return!!this.detailForm.get(["customer","customFields",e])}},{key:"getAddressFormControls",value:function(){return this.detailForm.get(["addresses"]).controls}},{key:"setDefaultBillingAddressId",value:function(e){this.defaultBillingAddressId=e,this.addressDefaultsUpdated=!0}},{key:"setDefaultShippingAddressId",value:function(e){this.defaultShippingAddressId=e,this.addressDefaultsUpdated=!0}},{key:"addAddress",value:function(){var e=this.detailForm.get("addresses"),c=this.formBuilder.group({fullName:"",company:"",streetLine1:["",C.C.required],streetLine2:"",city:"",province:"",postalCode:"",countryCode:["",C.C.required],phoneNumber:"",defaultShippingAddress:!1,defaultBillingAddress:!1});if(this.addressCustomFields.length){var r,n=this.formBuilder.group({}),a=t(this.addressCustomFields);try{for(a.s();!(r=a.n()).done;){var s=r.value;n.addControl(s.name,new C.f(""))}}catch(o){a.e(o)}finally{a.f()}c.addControl("customFields",n)}e.push(c)}},{key:"setOrderItemsPerPage",value:function(e){this.ordersPerPage=+e,this.fetchOrdersList()}},{key:"setOrderCurrentPage",value:function(e){this.currentOrdersPage=+e,this.fetchOrdersList()}},{key:"create",value:function(){var e,t=this,c=this.detailForm.get("customer");if(c){var r=c.value,n=null===(e=c.get("customFields"))||void 0===e?void 0:e.value,a={title:r.title,emailAddress:r.emailAddress,firstName:r.firstName,lastName:r.lastName,phoneNumber:r.phoneNumber,customFields:n};this.dataService.customer.createCustomer(a,r.password).subscribe(function(e){var c=e.createCustomer;switch(c.__typename){case"Customer":t.notificationService.success(Object(fe.a)("common.notify-create-success"),{entity:"Customer"}),c.emailAddress&&!r.password&&t.notificationService.notify({message:Object(fe.a)("customer.email-verification-sent"),translationVars:{emailAddress:r.emailAddress},type:"info",duration:1e4}),t.detailForm.markAsPristine(),t.addressDefaultsUpdated=!1,t.changeDetector.markForCheck(),t.router.navigate(["../",c.id],{relativeTo:t.route});break;case"EmailAddressConflictError":t.notificationService.error(c.message)}})}}},{key:"save",value:function(){var e=this;this.entity$.pipe(Object(X.a)(1),Object(Re.a)(function(c){var r,n=c.id,a=[],s=e.detailForm.get("customer");if(s&&s.dirty){var o=s.value,i=null===(r=s.get("customFields"))||void 0===r?void 0:r.value,u={id:n,title:o.title,emailAddress:o.emailAddress,firstName:o.firstName,lastName:o.lastName,phoneNumber:o.phoneNumber,customFields:i};a.push(e.dataService.customer.updateCustomer(u).pipe(Object(h.a)(function(e){return e.updateCustomer})))}var l=e.detailForm.get("addresses");if(l&&l.dirty||e.addressDefaultsUpdated){var d,m=t(l.controls);try{for(m.s();!(d=m.n()).done;){var p=d.value;if(p.dirty||e.addressDefaultsUpdated){var f=p.value,g={fullName:f.fullName,company:f.company,streetLine1:f.streetLine1,streetLine2:f.streetLine2,city:f.city,province:f.province,postalCode:f.postalCode,countryCode:f.countryCode,phoneNumber:f.phoneNumber,defaultShippingAddress:e.defaultShippingAddressId===f.id,defaultBillingAddress:e.defaultBillingAddressId===f.id,customFields:f.customFields};f.id?a.push(e.dataService.customer.updateCustomerAddress(Object.assign(Object.assign({},g),{id:f.id})).pipe(Object(h.a)(function(e){return e.updateCustomerAddress}))):a.push(e.dataService.customer.createCustomerAddress(n,g).pipe(Object(h.a)(function(e){return e.createCustomerAddress})))}}}catch(b){m.e(b)}finally{m.f()}}return Object(be.a)(a)})).subscribe(function(c){var r,n=t(c);try{for(n.s();!(r=n.n()).done;){var a=r.value;switch(a.__typename){case"Customer":case"Address":e.notificationService.success(Object(fe.a)("common.notify-update-success"),{entity:"Customer"}),e.detailForm.markAsPristine(),e.addressDefaultsUpdated=!1,e.changeDetector.markForCheck(),e.fetchHistory.next();break;case"EmailAddressConflictError":e.notificationService.error(a.message)}}}catch(s){n.e(s)}finally{n.f()}},function(t){e.notificationService.error(Object(fe.a)("common.notify-update-error"),{entity:"Customer"})})}},{key:"addToGroup",value:function(){var e=this;this.modalService.fromComponent(Ae,{size:"md"}).pipe(Object(b.a)(function(e){return e?Object(he.a)(e):ve.a}),Object(Oe.a)(function(t){return e.dataService.customer.addCustomersToGroup(t,[e.id])})).subscribe({next:function(t){e.notificationService.success(Object(fe.a)("customer.add-customers-to-group-success"),{customerCount:1,groupName:t.addCustomersToGroup.name})},complete:function(){e.dataService.customer.getCustomer(e.id,{take:0}).single$.subscribe(),e.fetchHistory.next()}})}},{key:"removeFromGroup",value:function(e){var t=this;this.modalService.dialog({title:Object(fe.a)("customer.confirm-remove-customer-from-group"),buttons:[{type:"secondary",label:Object(fe.a)("common.cancel")},{type:"danger",label:Object(fe.a)("common.delete"),returnValue:!0}]}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.removeCustomersFromGroup(e.id,[t.id]):ve.a}),Object(b.a)(function(){return t.dataService.customer.getCustomer(t.id,{take:0}).single$})).subscribe(function(c){t.notificationService.success(Object(fe.a)("customer.remove-customers-from-group-success"),{customerCount:1,groupName:e.name}),t.fetchHistory.next()})}},{key:"addNoteToCustomer",value:function(e){var t=this,c=e.note;this.dataService.customer.addNoteToCustomer(this.id,c).subscribe(function(){t.fetchHistory.next(),t.notificationService.success(Object(fe.a)("common.notify-create-success"),{entity:"Note"})})}},{key:"updateNote",value:function(e){var t=this;this.modalService.fromComponent(m.u,{closable:!0,locals:{displayPrivacyControls:!1,note:e.data.note}}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.updateCustomerNote({noteId:e.id,note:c.note}):ve.a})).subscribe(function(e){t.fetchHistory.next(),t.notificationService.success(Object(fe.a)("common.notify-update-success"),{entity:"Note"})})}},{key:"deleteNote",value:function(e){var t=this;return this.modalService.dialog({title:Object(fe.a)("common.confirm-delete-note"),body:e.data.note,buttons:[{type:"secondary",label:Object(fe.a)("common.cancel")},{type:"danger",label:Object(fe.a)("common.delete"),returnValue:!0}]}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.deleteCustomerNote(e.id):ve.a})).subscribe(function(){t.fetchHistory.next(),t.notificationService.success(Object(fe.a)("common.notify-delete-success"),{entity:"Note"})})}},{key:"setFormValues",value:function(e){var c,r,n=this.detailForm.get("customer");if(n&&n.patchValue({title:e.title,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,emailAddress:e.emailAddress}),e.addresses){var a,s=new C.c([]),o=t(e.addresses);try{for(o.s();!(a=o.n()).done;){var i=a.value,u=i,l=(u.customFields,Object(pe.c)(u,["customFields"])),d=this.formBuilder.group(Object.assign(Object.assign({},l),{countryCode:i.country.code}));if(s.push(d),i.defaultShippingAddress&&(this.defaultShippingAddressId=i.id),i.defaultBillingAddress&&(this.defaultBillingAddressId=i.id),this.addressCustomFields.length){var m,p=this.formBuilder.group({}),f=t(this.addressCustomFields);try{for(f.s();!(m=f.n()).done;){var g=m.value.name,b=null===(c=i.customFields)||void 0===c?void 0:c[g],h=new C.f(b);p.addControl(g,h)}}catch(T){f.e(T)}finally{f.f()}d.addControl("customFields",p)}}}catch(T){o.e(T)}finally{o.f()}this.detailForm.setControl("addresses",s)}if(this.customFields.length){var v,y=this.detailForm.get(["customer","customFields"]),R=t(this.customFields);try{for(R.s();!(v=R.n()).done;){var O=v.value.name,E=null===(r=e.customFields)||void 0===r?void 0:r[O],D=y.get(O);D&&D.patchValue(E)}}catch(T){R.e(T)}finally{R.f()}}this.changeDetector.markForCheck()}},{key:"fetchOrdersList",value:function(){var e=this;this.dataService.customer.getCustomer(this.id,{take:this.ordersPerPage,skip:(this.currentOrdersPage-1)*this.ordersPerPage}).single$.pipe(Object(h.a)(function(e){return e.customer}),Object(W.a)(ge.notNullOrUndefined)).subscribe(function(t){return e.orderListUpdates$.next(t)})}}]),a}(m.l);function wt(e,t){1&e&&(v.hc(0,"span"),v.Vc(1),v.sc(2,"translate"),v.gc()),2&e&&(v.Qb(1),v.Wc(v.tc(2,1,"customer.update-customer-group")))}function Vt(e,t){1&e&&(v.hc(0,"span"),v.Vc(1),v.sc(2,"translate"),v.gc()),2&e&&(v.Qb(1),v.Wc(v.tc(2,1,"customer.create-customer-group")))}function Gt(e,t){if(1&e&&(v.Tc(0,wt,3,3,"span",4),v.Tc(1,Vt,3,3,"span",4)),2&e){var c=v.rc();v.yc("ngIf",c.group.id),v.Qb(1),v.yc("ngIf",!c.group.id)}}function jt(e,t){1&e&&(v.hc(0,"span"),v.Vc(1),v.sc(2,"translate"),v.gc()),2&e&&(v.Qb(1),v.Wc(v.tc(2,1,"customer.update-customer-group")))}function Bt(e,t){1&e&&(v.hc(0,"span"),v.Vc(1),v.sc(2,"translate"),v.gc()),2&e&&(v.Qb(1),v.Wc(v.tc(2,1,"customer.create-customer-group")))}function $t(e,t){if(1&e){var c=v.ic();v.hc(0,"button",5),v.pc("click",function(){return v.Lc(c),v.rc().cancel()}),v.Vc(1),v.sc(2,"translate"),v.gc(),v.hc(3,"button",6),v.pc("click",function(){return v.Lc(c),v.rc().save()}),v.Tc(4,jt,3,3,"span",4),v.Tc(5,Bt,3,3,"span",4),v.gc()}if(2&e){var r=v.rc();v.Qb(1),v.Wc(v.tc(2,4,"common.cancel")),v.Qb(2),v.yc("disabled",!r.group.name),v.Qb(1),v.yc("ngIf",r.group.id),v.Qb(1),v.yc("ngIf",!r.group.id)}}Lt.\u0275fac=function(e){return new(e||Lt)(v.bc(_.a),v.bc(_.e),v.bc(m.I),v.bc(v.j),v.bc(C.e),v.bc(m.s),v.bc(m.F),v.bc(m.G))},Lt.\u0275cmp=v.Vb({type:Lt,selectors:[["vdr-customer-detail"]],features:[v.Nb],decls:45,vars:57,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[3,"customer"],["class","last-login",3,"title",4,"ngIf"],["locationId","customer-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","title",3,"label","readOnlyToggle"],["id","title","type","text","formControlName","title"],["for","firstName",3,"label","readOnlyToggle"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label","readOnlyToggle"],["id","lastName","type","text","formControlName","lastName"],["for","emailAddress",3,"label","readOnlyToggle"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","phoneNumber",3,"label","readOnlyToggle"],["id","phoneNumber","type","text","formControlName","phoneNumber"],["for","password",3,"label",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["class","groups",4,"ngIf"],["class","clr-row",4,"ngIf"],[1,"last-login",3,"title"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["formGroupName","customFields"],[4,"ngFor","ngForOf"],["entityName","Customer",3,"customFieldsFormGroup","customField",4,"ngIf"],["entityName","Customer",3,"customFieldsFormGroup","customField"],[1,"groups"],[1,"clr-control-label"],[4,"ngIf","ngIfElse"],["noGroups",""],["class","btn btn-sm btn-secondary",3,"click",4,"vdrIfPermissions"],["icon","times",3,"colorFrom","iconClick",4,"ngFor","ngForOf"],["icon","times",3,"colorFrom","iconClick"],[1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],[1,"clr-row"],[1,"clr-col-md-4"],[3,"availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","editable","setAsDefaultBilling","setAsDefaultShipping",4,"ngFor","ngForOf"],["class","btn btn-secondary",3,"click",4,"vdrIfPermissions"],[1,"clr-col-md-8"],[3,"items","itemsPerPage","totalItems","currentPage","emptyStateLabel","itemsPerPageChange","pageChange"],[3,"availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","editable","setAsDefaultBilling","setAsDefaultShipping"],[1,"btn","btn-secondary",3,"click"],[1,"left"],[1,"right"],["iconShape","shopping-cart",3,"label","linkTo"],[1,"clr-col-md-6"],[3,"customer","history","addNote","updateNote","deleteNote"]],template:function(e,t){if(1&e&&(v.hc(0,"vdr-action-bar"),v.hc(1,"vdr-ab-left"),v.hc(2,"div",0),v.cc(3,"vdr-entity-info",1),v.sc(4,"async"),v.cc(5,"vdr-customer-status-label",2),v.sc(6,"async"),v.Tc(7,bt,5,10,"div",3),v.sc(8,"async"),v.gc(),v.gc(),v.hc(9,"vdr-ab-right"),v.cc(10,"vdr-action-bar-items",4),v.Tc(11,ht,3,4,"button",5),v.sc(12,"async"),v.Tc(13,yt,1,1,"ng-template",null,6,v.Uc),v.gc(),v.gc(),v.hc(15,"form",7),v.hc(16,"vdr-form-field",8),v.sc(17,"translate"),v.sc(18,"async"),v.cc(19,"input",9),v.gc(),v.hc(20,"vdr-form-field",10),v.sc(21,"translate"),v.sc(22,"async"),v.cc(23,"input",11),v.gc(),v.hc(24,"vdr-form-field",12),v.sc(25,"translate"),v.sc(26,"async"),v.cc(27,"input",13),v.gc(),v.hc(28,"vdr-form-field",14),v.sc(29,"translate"),v.sc(30,"async"),v.cc(31,"input",15),v.gc(),v.hc(32,"vdr-form-field",16),v.sc(33,"translate"),v.sc(34,"async"),v.cc(35,"input",17),v.gc(),v.Tc(36,Ct,3,3,"vdr-form-field",18),v.sc(37,"async"),v.Tc(38,Dt,5,4,"section",19),v.gc(),v.Tc(39,At,9,6,"div",20),v.sc(40,"async"),v.Tc(41,kt,29,31,"div",21),v.sc(42,"async"),v.Tc(43,Qt,5,6,"div",21),v.sc(44,"async")),2&e){var c,r,n=v.Ic(14);v.Qb(3),v.yc("entity",v.tc(4,21,t.entity$)),v.Qb(2),v.yc("customer",v.tc(6,23,t.entity$)),v.Qb(2),v.yc("ngIf",null==(c=v.tc(8,25,t.entity$))||null==c.user?null:c.user.lastLogin),v.Qb(4),v.yc("ngIf",v.tc(12,27,t.isNew$))("ngIfElse",n),v.Qb(4),v.yc("formGroup",t.detailForm.get("customer")),v.Qb(1),v.yc("label",v.tc(17,29,"customer.title"))("readOnlyToggle",!v.tc(18,31,t.isNew$)),v.Qb(4),v.yc("label",v.tc(21,33,"customer.first-name"))("readOnlyToggle",!v.tc(22,35,t.isNew$)),v.Qb(4),v.yc("label",v.tc(25,37,"customer.last-name"))("readOnlyToggle",!v.tc(26,39,t.isNew$)),v.Qb(4),v.yc("label",v.tc(29,41,"customer.email-address"))("readOnlyToggle",!v.tc(30,43,t.isNew$)),v.Qb(4),v.yc("label",v.tc(33,45,"customer.phone-number"))("readOnlyToggle",!v.tc(34,47,t.isNew$)),v.Qb(4),v.yc("ngIf",v.tc(37,49,t.isNew$)),v.Qb(2),v.yc("ngIf",t.customFields.length),v.Qb(1),v.yc("ngIf",null==(r=v.tc(40,51,t.entity$))?null:r.groups),v.Qb(2),v.yc("ngIf",!v.tc(42,53,t.isNew$)),v.Qb(2),v.yc("ngIf",!v.tc(44,55,t.isNew$))}},directives:[Pe.a,Pe.b,ee.a,ke,U.o,Pe.c,Qe.a,C.E,C.q,C.j,Le.a,A.a,C.b,C.p,C.h,we.a,C.k,ce.u,U.n,Ve.a,te.a,ce.o,P.a,N.a,me,M.a,mt],pipes:[U.b,F.d,pt.a,ft.a,k.a,gt.a],styles:[".last-login[_ngcontent-%COMP%]{margin-left:6px;color:var(--color-grey-500)}"],changeDetection:0});var xt=function(){return["CreateCustomerGroup","UpdateCustomerGroup"]},Wt=function(){function e(){p(this,e)}return g(e,[{key:"cancel",value:function(){this.resolveWith()}},{key:"save",value:function(){this.resolveWith(this.group.name)}}]),e}();Wt.\u0275fac=function(e){return new(e||Wt)},Wt.\u0275cmp=v.Vb({type:Wt,selectors:[["vdr-customer-group-detail-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["for","name",3,"label"],["id","name","type","text",3,"ngModel","readonly","ngModelChange"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(v.Tc(0,Gt,2,2,"ng-template",0),v.hc(1,"vdr-form-field",1),v.sc(2,"translate"),v.hc(3,"input",2),v.pc("ngModelChange",function(e){return t.group.name=e}),v.sc(4,"hasPermission"),v.gc(),v.gc(),v.Tc(5,$t,6,6,"ng-template",3)),2&e&&(v.Qb(1),v.yc("label",v.tc(2,3,"common.name")),v.Qb(2),v.yc("ngModel",t.group.name)("readonly",!v.tc(4,5,v.Bc(7,xt))))},directives:[y.a,Le.a,A.a,C.b,C.p,C.s,V.a,U.o],pipes:[F.d,k.a],styles:[""],changeDetection:0});var Xt=d("LRne"),Kt=d("CqXF"),Ht=d("8BSi");function Yt(e,t){if(1&e){var c=v.ic();v.hc(0,"button",7),v.pc("click",function(){return v.Lc(c),v.rc().create()}),v.cc(1,"clr-icon",8),v.Vc(2),v.sc(3,"translate"),v.gc()}2&e&&(v.Qb(2),v.Xc(" ",v.tc(3,1,"customer.create-new-customer-group")," "))}var Zt=function(e){return{contents:e}},zt=function(e){return["./",e]};function qt(e,t){if(1&e){var c=v.ic();v.hc(0,"tr"),v.sc(1,"async"),v.hc(2,"td",11),v.cc(3,"vdr-entity-info",12),v.gc(),v.hc(4,"td",11),v.hc(5,"vdr-chip",13),v.Vc(6),v.gc(),v.gc(),v.hc(7,"td",14),v.hc(8,"a",15),v.cc(9,"clr-icon",16),v.Vc(10),v.sc(11,"translate"),v.gc(),v.gc(),v.hc(12,"td",17),v.hc(13,"button",18),v.pc("click",function(){v.Lc(c);var e=t.$implicit;return v.rc(2).update(e)}),v.cc(14,"clr-icon",19),v.Vc(15),v.sc(16,"translate"),v.gc(),v.gc(),v.hc(17,"td",17),v.hc(18,"vdr-dropdown"),v.hc(19,"button",20),v.Vc(20),v.sc(21,"translate"),v.cc(22,"clr-icon",21),v.gc(),v.hc(23,"vdr-dropdown-menu",22),v.hc(24,"button",23),v.pc("click",function(){v.Lc(c);var e=t.$implicit;return v.rc(2).delete(e.id)}),v.sc(25,"hasPermission"),v.cc(26,"clr-icon",24),v.Vc(27),v.sc(28,"translate"),v.gc(),v.gc(),v.gc(),v.gc(),v.gc()}if(2&e){var r,n=t.$implicit,a=v.rc(2);v.Tb("active",n.id===(null==(r=v.tc(1,11,a.activeGroup$))?null:r.id)),v.Qb(3),v.yc("entity",n),v.Qb(2),v.yc("colorFrom",n.id),v.Qb(1),v.Wc(n.name),v.Qb(2),v.yc("routerLink",v.Cc(25,zt,v.Cc(23,Zt,n.id))),v.Qb(2),v.Xc(" ",v.tc(11,13,"customer.view-group-members")," "),v.Qb(5),v.Xc(" ",v.tc(16,15,"common.edit")," "),v.Qb(5),v.Xc(" ",v.tc(21,17,"common.actions")," "),v.Qb(4),v.yc("disabled",!v.tc(25,19,"DeleteCustomerGroup")),v.Qb(3),v.Xc(" ",v.tc(28,21,"common.delete")," ")}}function Jt(e,t){if(1&e&&(v.hc(0,"table",9),v.sc(1,"async"),v.hc(2,"tbody"),v.Tc(3,qt,29,27,"tr",10),v.sc(4,"async"),v.gc(),v.gc()),2&e){var c=v.rc();v.Tb("expanded",v.tc(1,3,c.activeGroup$)),v.Qb(3),v.yc("ngForOf",v.tc(4,5,c.groups$))}}function ec(e,t){1&e&&v.cc(0,"vdr-empty-placeholder")}var tc=function(e){return{groupName:e}};function cc(e,t){if(1&e){var c=v.ic();v.fc(0),v.hc(1,"div",25),v.hc(2,"div",26),v.Vc(3),v.sc(4,"async"),v.gc(),v.cc(5,"div",27),v.hc(6,"button",28),v.pc("click",function(){return v.Lc(c),v.rc().closeMembers()}),v.cc(7,"clr-icon",29),v.gc(),v.gc(),v.hc(8,"div",30),v.hc(9,"vdr-dropdown"),v.hc(10,"button",31),v.Vc(11),v.sc(12,"translate"),v.cc(13,"clr-icon",21),v.gc(),v.hc(14,"vdr-dropdown-menu",22),v.hc(15,"button",32),v.pc("click",function(){v.Lc(c);var e=t.ngIf,r=v.rc();return r.removeFromGroup(e,r.selectedCustomerIds)}),v.sc(16,"hasPermission"),v.cc(17,"clr-icon",24),v.Vc(18),v.sc(19,"translate"),v.gc(),v.gc(),v.gc(),v.hc(20,"button",33),v.pc("click",function(){v.Lc(c);var e=t.ngIf;return v.rc().addToGroup(e)}),v.Vc(21),v.sc(22,"translate"),v.gc(),v.gc(),v.hc(23,"vdr-customer-group-member-list",34),v.pc("selectionChange",function(e){return v.Lc(c),v.rc().selectedCustomerIds=e})("fetchParamsChange",function(e){return v.Lc(c),v.rc().fetchGroupMembers$.next(e)}),v.sc(24,"async"),v.sc(25,"async"),v.gc(),v.ec()}if(2&e){var r=t.ngIf,n=v.rc();v.Qb(3),v.Yc(" ",r.name," (",v.tc(4,11,n.membersTotal$),") "),v.Qb(7),v.yc("disabled",0===n.selectedCustomerIds.length),v.Qb(1),v.Xc(" ",v.tc(12,13,"common.with-selected")," "),v.Qb(4),v.yc("disabled",!v.tc(16,15,"UpdateCustomerGroup")),v.Qb(3),v.Xc(" ",v.tc(19,17,"customer.remove-from-group")," "),v.Qb(3),v.Xc(" ",v.uc(22,19,"customer.add-customers-to-group",v.Cc(26,tc,r.name))," "),v.Qb(2),v.yc("members",v.tc(24,22,n.members$))("route",n.route)("totalItems",v.tc(25,24,n.membersTotal$))("selectedMemberIds",n.selectedCustomerIds)}}var rc=function(){function e(t,c,r,n,a){p(this,e),this.dataService=t,this.notificationService=c,this.modalService=r,this.route=n,this.router=a,this.selectedCustomerIds=[],this.fetchGroupMembers$=new f.a({skip:0,take:0,filterTerm:""}),this.refreshActiveGroupMembers$=new f.a(void 0)}return g(e,[{key:"ngOnInit",value:function(){var e=this;this.groups$=this.dataService.customer.getCustomerGroupList().mapStream(function(e){return e.customerGroups.items});var t=this.route.paramMap.pipe(Object(h.a)(function(e){return e.get("contents")}),Object(D.a)(),Object(S.a)(function(){return e.selectedCustomerIds=[]}));this.listIsEmpty$=this.groups$.pipe(Object(h.a)(function(e){return 0===e.length})),this.activeGroup$=Object(O.a)(this.groups$,t).pipe(Object(h.a)(function(e){var t=l(e,2),c=t[0],r=t[1];if(r)return c.find(function(e){return e.id===r})}));var c=Object(O.a)(this.activeGroup$,this.fetchGroupMembers$,this.refreshActiveGroupMembers$).pipe(Object(b.a)(function(t){var c=l(t,2),r=c[0],n=c[1],a=n.skip,s=n.take,o=n.filterTerm;return r?e.dataService.customer.getCustomerGroupWithCustomers(r.id,{skip:a,take:s,filter:{emailAddress:{contains:o}}}).mapStream(function(e){var t;return null===(t=e.customerGroup)||void 0===t?void 0:t.customers}):Object(Xt.a)(void 0)}));this.members$=c.pipe(Object(h.a)(function(e){var t;return null!==(t=null==e?void 0:e.items)&&void 0!==t?t:[]})),this.membersTotal$=c.pipe(Object(h.a)(function(e){var t;return null!==(t=null==e?void 0:e.totalItems)&&void 0!==t?t:0}))}},{key:"create",value:function(){var e=this;this.modalService.fromComponent(Wt,{locals:{group:{name:""}}}).pipe(Object(b.a)(function(t){return t?e.dataService.customer.createCustomerGroup({name:t,customerIds:[]}):ve.a}),Object(b.a)(function(){return e.dataService.customer.getCustomerGroupList().single$})).subscribe(function(){e.notificationService.success(Object(fe.a)("common.notify-create-success"),{entity:"CustomerGroup"})},function(t){e.notificationService.error(Object(fe.a)("common.notify-create-error"),{entity:"CustomerGroup"})})}},{key:"delete",value:function(e){var t=this;this.modalService.dialog({title:Object(fe.a)("customer.confirm-delete-customer-group"),buttons:[{type:"secondary",label:Object(fe.a)("common.cancel")},{type:"danger",label:Object(fe.a)("common.delete"),returnValue:!0}]}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.deleteCustomerGroup(e):ve.a}),Object(b.a)(function(e){return e.deleteCustomerGroup.result===m.t.DELETED?t.dataService.customer.getCustomerGroupList().mapSingle(function(){return{errorMessage:!1}}):Object(Xt.a)({errorMessage:e.deleteCustomerGroup.message})})).subscribe(function(e){"string"==typeof e.errorMessage?t.notificationService.error(e.errorMessage):t.notificationService.success(Object(fe.a)("common.notify-delete-success"),{entity:"CustomerGroup"})},function(e){t.notificationService.error(Object(fe.a)("common.notify-delete-error"),{entity:"CustomerGroup"})})}},{key:"update",value:function(e){var t=this;this.modalService.fromComponent(Wt,{locals:{group:e}}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.updateCustomerGroup({id:e.id,name:c}):ve.a})).subscribe(function(){t.notificationService.success(Object(fe.a)("common.notify-update-success"),{entity:"CustomerGroup"})},function(e){t.notificationService.error(Object(fe.a)("common.notify-update-error"),{entity:"CustomerGroup"})})}},{key:"closeMembers",value:function(){var e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}},{key:"addToGroup",value:function(e){var t=this;this.modalService.fromComponent(x,{locals:{group:e,route:this.route},size:"md",verticalAlign:"top"}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.addCustomersToGroup(e.id,c).pipe(Object(Kt.a)(c)):ve.a})).subscribe({next:function(c){t.notificationService.success(Object(fe.a)("customer.add-customers-to-group-success"),{customerCount:c.length,groupName:e.name}),t.refreshActiveGroupMembers$.next(),t.selectedCustomerIds=[]}})}},{key:"removeFromGroup",value:function(e,t){var c=this;this.dataService.customer.removeCustomersFromGroup(e.id,t).subscribe({complete:function(){c.notificationService.success(Object(fe.a)("customer.remove-customers-from-group-success"),{customerCount:t.length,groupName:e.name}),c.refreshActiveGroupMembers$.next(),c.selectedCustomerIds=[]}})}}]),e}();rc.\u0275fac=function(e){return new(e||rc)(v.bc(m.s),v.bc(m.G),v.bc(m.F),v.bc(_.a),v.bc(_.e))},rc.\u0275cmp=v.Vb({type:rc,selectors:[["vdr-customer-group-list"]],decls:14,vars:12,consts:[["locationId","customer-group-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"group-wrapper"],["class","table group-list",3,"expanded",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"group-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"table","group-list"],[3,"active",4,"ngFor","ngForOf"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[3,"members","route","totalItems","selectedMemberIds","selectionChange","fetchParamsChange"]],template:function(e,t){if(1&e&&(v.hc(0,"vdr-action-bar"),v.cc(1,"vdr-ab-left"),v.hc(2,"vdr-ab-right"),v.cc(3,"vdr-action-bar-items",0),v.Tc(4,Yt,4,3,"button",1),v.gc(),v.gc(),v.hc(5,"div",2),v.Tc(6,Jt,5,7,"table",3),v.sc(7,"async"),v.Tc(8,ec,1,0,"ng-template",null,4,v.Uc),v.hc(10,"div",5),v.sc(11,"async"),v.Tc(12,cc,26,28,"ng-container",6),v.sc(13,"async"),v.gc(),v.gc()),2&e){var c=v.Ic(9);v.Qb(4),v.yc("vdrIfPermissions","CreateCustomerGroup"),v.Qb(2),v.yc("ngIf",!v.tc(7,6,t.listIsEmpty$))("ngIfElse",c),v.Qb(4),v.Tb("expanded",v.tc(11,8,t.activeGroup$)),v.Qb(2),v.yc("ngIf",v.tc(13,10,t.activeGroup$))}},directives:[Pe.a,Pe.b,Pe.c,Qe.a,we.a,U.o,ce.o,U.n,ee.a,te.a,_.h,re.a,ne.a,ae.a,se.a,Ht.a,w],pipes:[U.b,F.d,k.a],styles:[".group-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.group-wrapper[_ngcontent-%COMP%]   .group-list.expanded[_ngcontent-%COMP%]{width:calc(100% - 40vw)}.group-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.group-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.group-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.group-members[_ngcontent-%COMP%]     table.table{margin-top:0}.group-members[_ngcontent-%COMP%]     table.table th{top:0}.group-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}vdr-empty-placeholder[_ngcontent-%COMP%]{flex:1}"],changeDetection:0});var nc=d("Tn/u"),ac=function(){return["./create"]};function sc(e,t){1&e&&(v.hc(0,"a",6),v.cc(1,"clr-icon",7),v.Vc(2),v.sc(3,"translate"),v.gc()),2&e&&(v.yc("routerLink",v.Bc(4,ac)),v.Qb(2),v.Xc(" ",v.tc(3,2,"customer.create-new-customer")," "))}var oc=function(e){return["./",e]};function ic(e,t){if(1&e){var c=v.ic();v.hc(0,"td",8),v.Vc(1),v.gc(),v.hc(2,"td",8),v.Vc(3),v.gc(),v.hc(4,"td",8),v.cc(5,"vdr-customer-status-label",9),v.gc(),v.hc(6,"td",10),v.cc(7,"vdr-table-row-action",11),v.sc(8,"translate"),v.gc(),v.hc(9,"td"),v.hc(10,"vdr-dropdown"),v.hc(11,"button",12),v.Vc(12),v.sc(13,"translate"),v.cc(14,"clr-icon",13),v.gc(),v.hc(15,"vdr-dropdown-menu",14),v.hc(16,"button",15),v.pc("click",function(){v.Lc(c);var e=t.item;return v.rc().deleteCustomer(e)}),v.sc(17,"hasPermission"),v.cc(18,"clr-icon",16),v.Vc(19),v.sc(20,"translate"),v.gc(),v.gc(),v.gc(),v.gc()}if(2&e){var r=t.item;v.Qb(1),v.Zc(" ",r.title," ",r.firstName," ",r.lastName," "),v.Qb(2),v.Wc(r.emailAddress),v.Qb(2),v.yc("customer",r),v.Qb(2),v.yc("label",v.tc(8,10,"common.edit"))("linkTo",v.Cc(18,oc,r.id)),v.Qb(5),v.Xc(" ",v.tc(13,12,"common.actions")," "),v.Qb(4),v.yc("disabled",!v.tc(17,14,"DeleteCustomer")),v.Qb(3),v.Xc(" ",v.tc(20,16,"common.delete")," ")}}var uc=function(t){c(a,t);var r=n(a);function a(t,c,n,i,u){var l,d;return p(this,a),(d=r.call(this,c,n)).dataService=t,d.modalService=i,d.notificationService=u,d.emailSearchTerm=new C.f(""),d.lastNameSearchTerm=new C.f(""),e((l=s(d),o(a.prototype)),"setQueryFn",l).call(l,function(){var e;return(e=d.dataService.customer).getCustomerList.apply(e,arguments).refetchOnChannelChange()},function(e){return e.customers},function(e,t){return{options:{skip:e,take:t,filter:{emailAddress:{contains:d.emailSearchTerm.value},lastName:{contains:d.lastNameSearchTerm.value}},sort:{createdAt:nc.SortOrder.DESC}}}}),d}return g(a,[{key:"ngOnInit",value:function(){var t=this;e(o(a.prototype),"ngOnInit",this).call(this),Object(Ce.a)(this.emailSearchTerm.valueChanges,this.lastNameSearchTerm.valueChanges).pipe(Object(W.a)(function(e){return 2<e.length||0===e.length}),Object(T.a)(250),Object(I.a)(this.destroy$)).subscribe(function(){return t.refresh()})}},{key:"deleteCustomer",value:function(e){var t=this;return this.modalService.dialog({title:Object(fe.a)("catalog.confirm-delete-customer"),body:"".concat(e.firstName," ").concat(e.lastName),buttons:[{type:"secondary",label:Object(fe.a)("common.cancel")},{type:"danger",label:Object(fe.a)("common.delete"),returnValue:!0}]}).pipe(Object(b.a)(function(c){return c?t.dataService.customer.deleteCustomer(e.id):ve.a})).subscribe(function(){t.notificationService.success(Object(fe.a)("common.notify-delete-success"),{entity:"Customer"}),t.refresh()},function(e){t.notificationService.error(Object(fe.a)("common.notify-delete-error"),{entity:"Customer"})})}}]),a}(m.n);uc.\u0275fac=function(e){return new(e||uc)(v.bc(m.s),v.bc(_.e),v.bc(_.a),v.bc(m.F),v.bc(m.G))},uc.\u0275cmp=v.Vb({type:uc,selectors:[["vdr-customer-list"]],features:[v.Nb],decls:26,vars:32,consts:[["type","text","name","emailSearchTerm",1,"search-input","ml3",3,"formControl","placeholder"],["type","text","name","lastNameSearchTerm",1,"search-input","ml3",3,"formControl","placeholder"],["locationId","customer-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"customer"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(v.hc(0,"vdr-action-bar"),v.hc(1,"vdr-ab-left"),v.cc(2,"input",0),v.sc(3,"translate"),v.cc(4,"input",1),v.sc(5,"translate"),v.gc(),v.hc(6,"vdr-ab-right"),v.cc(7,"vdr-action-bar-items",2),v.Tc(8,sc,4,5,"a",3),v.gc(),v.gc(),v.hc(9,"vdr-data-table",4),v.pc("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),v.sc(10,"async"),v.sc(11,"async"),v.sc(12,"async"),v.sc(13,"async"),v.hc(14,"vdr-dt-column",5),v.Vc(15),v.sc(16,"translate"),v.gc(),v.hc(17,"vdr-dt-column",5),v.Vc(18),v.sc(19,"translate"),v.gc(),v.hc(20,"vdr-dt-column"),v.Vc(21),v.sc(22,"translate"),v.gc(),v.cc(23,"vdr-dt-column"),v.cc(24,"vdr-dt-column"),v.Tc(25,ic,21,20,"ng-template"),v.gc()),2&e&&(v.Qb(2),v.yc("formControl",t.emailSearchTerm)("placeholder",v.tc(3,14,"customer.search-customers-by-email")),v.Qb(2),v.yc("formControl",t.lastNameSearchTerm)("placeholder",v.tc(5,16,"customer.search-customers-by-last-name")),v.Qb(4),v.yc("vdrIfPermissions","CreateCustomer"),v.Qb(1),v.yc("items",v.tc(10,18,t.items$))("itemsPerPage",v.tc(11,20,t.itemsPerPage$))("totalItems",v.tc(12,22,t.totalItems$))("currentPage",v.tc(13,24,t.currentPage$)),v.Qb(5),v.yc("expand",!0),v.Qb(1),v.Wc(v.tc(16,26,"customer.name")),v.Qb(2),v.yc("expand",!0),v.Qb(1),v.Wc(v.tc(19,28,"customer.email-address")),v.Qb(3),v.Wc(v.tc(22,30,"customer.customer-type")))},directives:[Pe.a,Pe.b,A.a,C.b,C.p,C.g,Pe.c,Qe.a,we.a,P.a,N.a,_.h,ce.o,ke,M.a,re.a,ne.a,ae.a,se.a],pipes:[F.d,U.b,k.a],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"]});var lc=function(e){c(r,e);var t=n(r);function r(e,c){return p(this,r),t.call(this,e,{__typename:"Customer",id:"",createdAt:"",updatedAt:"",title:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:null,addresses:null,user:null},function(e){return c.customer.getCustomer(e).mapStream(function(e){return e.customer})})}return r}(m.m);lc.\u0275fac=function(e){return new(e||lc)(v.lc(_.e),v.lc(m.s))},lc.\u0275prov=v.Xb({token:lc,factory:lc.\u0275fac,providedIn:"root"});var dc=[{path:"customers",component:uc,pathMatch:"",data:{breadcrumb:Object(fe.a)("breadcrumb.customers")}},{path:"customers/:id",component:Lt,resolve:Object(m.O)(lc),canDeactivate:[m.o],data:{breadcrumb:mc}},{path:"groups",component:rc,data:{breadcrumb:Object(fe.a)("breadcrumb.customer-groups")}}];function mc(e,t){return Object(m.Q)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.customers",getName:function(e){return"".concat(e.firstName," ").concat(e.lastName)},route:"customers"})}var pc=function e(){p(this,e)};pc.\u0275fac=function(e){return new(e||pc)},pc.\u0275mod=v.Zb({type:pc}),pc.\u0275inj=v.Yb({imports:[[m.J,_.i.forChild(dc)]]})}}])}();
//# sourceMappingURL=6-es5.d07142e29e187a42f1f7.js.map