!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{eSfC:function(n,r,c){"use strict";c.r(r),c.d(r,"LoginComponent",function(){return m}),c.d(r,"LoginModule",function(){return k}),c.d(r,"loginRoutes",function(){return w}),c.d(r,"LoginGuard",function(){return y});var a=c("t9nd"),o=c("fXoL"),i=c("tyNb"),s=c("3Pt+"),l=c("8MG2"),d=c("Bzlx"),u=c("ofXK"),g=c("sYmb");function h(e,n){1&e&&(o.hc(0,"span"),o.Vc(1,"-"),o.gc())}function p(e,n){if(1&e&&(o.hc(0,"span"),o.Vc(1),o.Tc(2,h,2,0,"span",12),o.gc()),2&e){var t=o.rc();o.Qb(1),o.Xc("",t.brand," "),o.Qb(1),o.yc("ngIf",!t.hideVendureBranding||!t.hideVersion)}}function b(e,n){1&e&&(o.hc(0,"span"),o.Vc(1,"vendure"),o.gc())}function f(e,n){if(1&e&&(o.hc(0,"span"),o.Vc(1),o.gc()),2&e){var t=o.rc();o.Qb(1),o.Xc("v",t.version,"")}}var m=function(){function n(t,r){e(this,n),this.authService=t,this.router=r,this.username="",this.password="",this.rememberMe=!1,this.version=a.a,this.brand=Object(a.U)().brand,this.hideVendureBranding=Object(a.U)().hideVendureBranding,this.hideVersion=Object(a.U)().hideVersion}return t(n,[{key:"logIn",value:function(){var e=this;this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(function(n){switch(n.__typename){case"CurrentUser":var t=e.getRedirectRoute();e.router.navigateByUrl(t||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":e.errorMessage=n.message}})}},{key:"getRedirectRoute",value:function(){var e,n=new RegExp("".concat(a.b,"=(.*)"));try{var t=window.location.search.match(n);t&&1<t.length&&(e=atob(decodeURIComponent(t[1])))}catch(r){}return e}}]),n}();m.\u0275fac=function(e){return new(e||m)(o.bc(a.k),o.bc(i.e))},m.\u0275cmp=o.Vb({type:m,selectors:[["vdr-login"]],decls:25,vars:24,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"]],template:function(e,n){1&e&&(o.hc(0,"div",0),o.hc(1,"form",1),o.hc(2,"label",2),o.cc(3,"img",3),o.gc(),o.hc(4,"div",4),o.hc(5,"input",5),o.pc("ngModelChange",function(e){return n.username=e}),o.sc(6,"translate"),o.gc(),o.hc(7,"input",6),o.pc("ngModelChange",function(e){return n.password=e}),o.sc(8,"translate"),o.gc(),o.hc(9,"clr-alert",7),o.hc(10,"clr-alert-item"),o.hc(11,"span",8),o.Vc(12),o.gc(),o.gc(),o.gc(),o.hc(13,"clr-checkbox-wrapper"),o.hc(14,"input",9),o.pc("ngModelChange",function(e){return n.rememberMe=e}),o.gc(),o.hc(15,"label"),o.Vc(16),o.sc(17,"translate"),o.gc(),o.gc(),o.hc(18,"button",10),o.pc("click",function(){return n.logIn()}),o.Vc(19),o.sc(20,"translate"),o.gc(),o.gc(),o.hc(21,"div",11),o.Tc(22,p,3,2,"span",12),o.Tc(23,b,2,0,"span",12),o.Tc(24,f,2,1,"span",12),o.gc(),o.gc(),o.gc()),2&e&&(o.Qb(5),o.yc("ngModel",n.username)("placeholder",o.tc(6,16,"common.username")),o.Qb(2),o.yc("ngModel",n.password)("placeholder",o.tc(8,18,"common.password")),o.Qb(2),o.Tb("visible",n.errorMessage),o.yc("clrAlertType","danger")("clrAlertClosable",!1),o.Qb(3),o.Xc(" ",n.errorMessage," "),o.Qb(2),o.yc("ngModel",n.rememberMe),o.Qb(2),o.Wc(o.tc(17,20,"common.remember-me")),o.Qb(2),o.yc("disabled",!n.username||!n.password),o.Qb(1),o.Xc(" ",o.tc(20,22,"common.login")," "),o.Qb(3),o.yc("ngIf",n.brand),o.Qb(1),o.yc("ngIf",!n.hideVendureBranding),o.Qb(1),o.yc("ngIf",!n.hideVersion))},directives:[s.E,s.q,s.r,l.u,d.a,s.b,s.p,s.s,l.f,l.g,l.h,l.k,s.a,l.i,u.o],pipes:[g.d],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--login-page-bg);background-size:auto;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center}.version[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;animation-delay:.2s;transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@-webkit-keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]});var v=c("lJxs"),y=function(){function n(t,r){e(this,n),this.router=t,this.authService=r}return t(n,[{key:"canActivate",value:function(e){var n=this;return this.authService.checkAuthenticatedStatus().pipe(Object(v.a)(function(e){return e&&n.router.navigate(["/"]),!e}))}}]),n}();y.\u0275fac=function(e){return new(e||y)(o.lc(i.e),o.lc(a.k))},y.\u0275prov=o.Xb({token:y,factory:y.\u0275fac,providedIn:"root"});var w=[{path:"",component:m,pathMatch:"full",canActivate:[y]}],k=function n(){e(this,n)};k.\u0275fac=function(e){return new(e||k)},k.\u0275mod=o.Zb({type:k}),k.\u0275inj=o.Yb({imports:[[a.J,i.i.forChild(w)]]})}}])}();
//# sourceMappingURL=9-es5.ec03ea9f0b45b2c001a1.js.map